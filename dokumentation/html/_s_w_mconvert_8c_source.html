<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIC SID Project: musictools/SID-Wizard-1.7/sources/SWMconvert.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIC SID Project
   &#160;<span id="projectnumber">prototype</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_s_w_mconvert_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SWMconvert.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_s_w_mconvert_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//==============================================================================</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// SID-Wizard&#39;s SWM v1 module converter application (2013 Hermit Software)</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//==============================================================================</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// $Id: SWMconvert.c 382 2014-06-23 17:53:01Z hermitsoft $</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//-----------------source-library inclusions------------------------------------</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="stdio_8h.html">stdio.h</a>&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="string_8h.html">string.h</a>&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="ctype_8h.html">ctype.h</a>&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="stdlib_8h.html">stdlib.h</a>&gt;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//----------------------literate constant definitions---------------------------</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;SWM-spec.src&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a367ba81f78d6fb6a2f0269fa891459ed">   13</a></span>&#160;<span class="preprocessor">#define FILENAME_LENGTH_MAX 256</span></div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a9acad272399839ea9901389ea2eba52b">   14</a></span>&#160;<span class="preprocessor">#define C64_FILENAME_LENGTH_MAX 16</span></div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8471ef1fc2e359bf5138a7517d543f81">   15</a></span>&#160;<span class="preprocessor">#define TUNEDATA_SIZE_MAX 65536</span></div>
<div class="line"><a name="l00016"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0cd782f81d534316a4f436e4ce65fb6a">   16</a></span>&#160;<span class="preprocessor">#define EXT_LENGTH_MAX 4</span></div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a938f4ef45af65ae45439ce34afdc5f0c">   17</a></span>&#160;<span class="preprocessor">#define TYPE_ID_LENGTH_MAX 32</span></div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ace9f16ecc6b8bdf14fe8161076832603">   18</a></span>&#160;<span class="preprocessor">#define XM_PATTERNS_MAX 256</span></div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">   19</a></span>&#160;<span class="preprocessor">#define XM_INSTRUMENTS_MAX 128 </span></div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">   20</a></span>&#160;<span class="preprocessor">#define MIDI_CHANNELS_MAX 64  //maximum allowed number of MIDI channels (tracks in MIDI format 1)</span></div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a313a2a228e7c8de38d4d3acfb9cbd84b">   21</a></span>&#160;<span class="preprocessor">#define MIDI_TRACKLEN_MAX 65536 //maximum length of one MIDI-track</span></div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ace57b458c1b00668b74dae3a5933fe13">   22</a></span>&#160;<span class="preprocessor">#define MIDI_VLV_LEN_MAX 8 //maximum length of variable-length variables in MIDI</span></div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">   23</a></span>&#160;<span class="preprocessor">#define SID_CHNAMOUNT 3   //SID/SWM maximal amount of channels - hardwired</span></div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad4c44ea97054d28ea251df647bf6a657">   24</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#ad4c44ea97054d28ea251df647bf6a657">XM_CHNAMOUNT</a>=18; <span class="comment">//number channels to represent converted SWM channels in XM</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">   25</a></span>&#160;<span class="preprocessor">#define XM_COL_PER_TRK 5 //number of (byte) columns in one XM track (note,inst.,vol.,fx,fx-value</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a48207e58e4493633a51e019d9e1b5706">   26</a></span>&#160;<span class="preprocessor">#define XM_SAMPLING_FREQUENCY 48000.00</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#ifndef M_PI</span></div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">   28</a></span>&#160;<span class="preprocessor">#define M_PI 3.14159265358979323846</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ada5f18da7af755dd8992ffee7d41dd84">   30</a></span>&#160;<span class="preprocessor">#define CHORD_SILENCER_RATIO 2 //can be 1..4 - how much the chord-note loudness is smaller</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aeaf69d8f8b3ebfd510b7a5f43ab0c2ee">   31</a></span>&#160;<span class="preprocessor">#define VICE_P00_OFFSET 0x1A //vice program-offset (not containing PRG load-address following after)</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#afed83846bce42b8514a138da8cb6ab8e">   32</a></span>&#160;<span class="preprocessor">#define VICE_P00_FILENAME_OFFSET 0x8</span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aef87eaee7ea37b658fee72fdd151484b">   33</a></span>&#160; <span class="keywordtype">char</span>* <a class="code" href="_s_w_mconvert_8c.html#aef87eaee7ea37b658fee72fdd151484b">SWM_ID</a>=<span class="stringliteral">&quot;SWM1&quot;</span>; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#af1c49230c45ce1c9a4653bd1eeed56e0">   34</a></span>&#160; <span class="keywordtype">char</span>* <a class="code" href="_s_w_mconvert_8c.html#af1c49230c45ce1c9a4653bd1eeed56e0">SWS_ID</a>=<span class="stringliteral">&quot;SWMS&quot;</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//XM format descriptor constants - in order they appear in XM file==============</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa646a10ff302610e2f6401f063099b96">   37</a></span>&#160;<span class="preprocessor">#define XM_ID_OFFSET 0</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a4175e20e436f98b28da338ae5114c911">   38</a></span>&#160; <span class="keywordtype">char</span>* <a class="code" href="_s_w_mconvert_8c.html#a4175e20e436f98b28da338ae5114c911">XM_ID</a>=<span class="stringliteral">&quot;Extended Module: &quot;</span>;</div>
<div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a5699d8f6565bc21ef40fbe8b3cc577a5">   39</a></span>&#160;<span class="preprocessor"> #define XM_ID_SIZE 18</span></div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ab09efdeaf27be43a19d884280baf1f25">   40</a></span>&#160;<span class="preprocessor">#define XM_TITLE_OFFSET 17 </span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa35211353e34ab42661c1a8a9b7b05a1">   41</a></span>&#160;<span class="preprocessor"> #define XM_TITLE_SIZE 20 //length of title is 20 characters</span></div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a3496d3fe676012b5ed9e553eabb4bc00">   42</a></span>&#160;<span class="preprocessor">#define XM_$1A_OFFSET 37</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae904259aebe88f64060e61765a212c8d">   43</a></span>&#160;<span class="preprocessor">#define XM_TRACKERNAME_OFFSET 38 //Digitracker:Author-name, FastTracker:&quot;FastTracker II&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#afef64a928911e6a64dcec85d178efb7e">   44</a></span>&#160; <span class="keywordtype">char</span>* <a class="code" href="_s_w_mconvert_8c.html#afef64a928911e6a64dcec85d178efb7e">XM_TRACKERNAME</a>=<span class="stringliteral">&quot;SID-Wizard&quot;</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0643471d94d14e02058a9c69b918e1a5">   45</a></span>&#160;<span class="preprocessor"> #define XM_TRACKERNAME_SIZE 20 //lenth of trackername is 20 characters</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aaa5828f4c5641f663a53b171eca36033">   46</a></span>&#160;<span class="preprocessor">#define XM_VERSION_OFFSET 58  //little endian word - $04 then $01 ($0104) for this specification</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a78cffc27914756c2dca5e953f3719c23">   47</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a78cffc27914756c2dca5e953f3719c23">XM_VERSION</a>=0x0104;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a72df2e6479658f76c0401c0e24de7b99">   48</a></span>&#160;<span class="preprocessor">#define XM_HEADERSIZE_OFFSET 60 //at offset 60 the header-size of the module is a double-word </span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8403de6934dc4f7d7a12f701a2b4ba12">   49</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a8403de6934dc4f7d7a12f701a2b4ba12">XM_HEADERSIZE</a>[4]={0x14,0x01,0,0}; <span class="comment">//e.g. $14 $01 $00 $00</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ab36e44357aaae329cf284dd55502238b">   50</a></span>&#160;<span class="preprocessor">#define XM_SONGLENGTH_OFFSET XM_HEADERSIZE_OFFSET+4 //(l.e.word) Song length (in patten order table)</span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">   51</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>=0;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aca1d7ace35bd89dd40c860b3d4b88ffe">   52</a></span>&#160;<span class="preprocessor">#define XM_RESTARTPOS_OFFSET XM_HEADERSIZE_OFFSET+6 //(l.e.word) Restart position</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">   53</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>=0;</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a327b44943d537204b35d9730f0714e99">   54</a></span>&#160;<span class="preprocessor">#define XM_CHNAMOUNT_OFFSET XM_HEADERSIZE_OFFSET+8 //(l.e.word) Number of channels (2,4,6,8,10,...,32)</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a85fa066baaa13af3d17346ea91d5ea7d">   55</a></span>&#160;<span class="preprocessor">#define XM_PTNAMOUNT_OFFSET XM_HEADERSIZE_OFFSET+10 //(l.e.word) Number of patterns (max 256)</span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">   56</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a78a0ae1b38495cfbf4b0a3e2a9351524">   57</a></span>&#160;<span class="preprocessor">#define XM_INSAMOUNT_OFFSET XM_HEADERSIZE_OFFSET+12 //(l.e.word) Number of instruments (max 128)</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a1ff3974dbab298dcec36dcd65699aa79">   58</a></span>&#160;<span class="preprocessor">#define XM_FREQTYPE_OFFSET XM_HEADERSIZE_OFFSET+14 //(l.e.word) Flags: </span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0c66234fe19213461d19aa4d77bdb8ca">   59</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a0c66234fe19213461d19aa4d77bdb8ca">XM_FREQTYPE</a>=1; <span class="comment">//bit 0: 0 = Amiga frequency table (see below); 1 = Linear frequency table</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa66341f074527c0dafbfb6fe472a3068">   60</a></span>&#160;<span class="preprocessor">#define XM_DEFTEMPO_OFFSET XM_HEADERSIZE_OFFSET+16 //(l.e.word) Default tempo</span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0361d40b1b9bb68aff4425fb27dd5faf">   61</a></span>&#160;<span class="preprocessor">#define XM_DEFAUBPM_OFFSET XM_HEADERSIZE_OFFSET+18 //(l.e.word) Default BPM</span></div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a25f94dfcc2b30a42aec1cff899cfb7c3">   62</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a25f94dfcc2b30a42aec1cff899cfb7c3">XM_DEFAUBPM</a>=0x7d; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a50683681223cb2978b1a021cbab8adac">   63</a></span>&#160;<span class="preprocessor">#define XM_ORDERLIST_OFFSET XM_HEADERSIZE_OFFSET+20 //256 bytes (fix size) Pattern order table</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a6295c7f73818553f16e576a771efa716">   64</a></span>&#160;<span class="preprocessor"> #define XM_ORDERLIST_SIZE 256</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">//XM PATTERN FORMAT - pattern starts with 4byte  (dword) Pattern header-length value</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#adf8d54bff5b31b2f7dad525f409bf41c">   66</a></span>&#160;<span class="preprocessor">#define XM_PATTERNS_OFFSET XM_ORDERLIST_OFFSET+XM_ORDERLIST_SIZE</span></div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad7f726652eae34beefe5443c8e57ae78">   67</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ad7f726652eae34beefe5443c8e57ae78">XM_PATTERN_HEADER_SIZE</a>[4]={0x09,0,0,0}; <span class="comment">//(dword) Pattern header length</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a2e133ee744125ec57147b8377b0c3b61">   68</a></span>&#160;<span class="preprocessor">#define XM_PACKTYPE_OFFSET 4 //(byte) Packing type (always 0)</span></div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a912afc5e254350520950829159d2bc71">   69</a></span>&#160;<span class="preprocessor"> #define XM_PACKTYPE 0 </span></div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a1d5564f744c81832b17112728fc399ad">   70</a></span>&#160;<span class="preprocessor">#define XM_PTNROWS_OFFSET 5 //(word) Number of rows in pattern (1..256)</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a81a1a8307bdfee429ddfd4bc39e00568">   71</a></span>&#160;<span class="preprocessor">#define XM_PTNSIZE_OFFSET 7 //(word) Packed patterndata size - zero if pattern is empty</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//XM_PTNDATA_OFFSET=XM_PATTERN_HEADER_SIZE here starts the packed patterndata</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; <span class="comment">//unsigned char XM_PACKSIGN[6]={0x80,0x81,0x82,0x84,0x88,0x90}; //NOP,NOTE,INST,VOL,FX,FXVALUE</span></div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a5913bb175d4eae67446f2844b7e06845">   74</a></span>&#160;<span class="preprocessor"> #define XM_NOP_PACKSIGN 0x80</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a98d8cc2a1ce7509b02901e94e65a5c22">   75</a></span>&#160;<span class="preprocessor"> #define XM_NOTE_PACKSIGN 0x81</span></div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a1727419bf2495fe575251ebc29afbe28">   76</a></span>&#160;<span class="preprocessor"> #define XM_INST_PACKSIGN 0x82</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a5c4d04d1c7d6420bef6c6f5775f177ca">   77</a></span>&#160;<span class="preprocessor"> #define XM_VOL_PACKSIGN 0x84</span></div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ac672d89827a1137f2b20e32c530cd95e">   78</a></span>&#160;<span class="preprocessor"> #define XM_FX_PACKSIGN   0x88</span></div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a42c8edb9dd33e03a282db61c8920ed15">   79</a></span>&#160;<span class="preprocessor"> #define XM_FXVAL_PACKSIGN 0x90</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">   80</a></span>&#160;<span class="preprocessor"> #define XM_GATEOFF_VALUE 97</span></div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a30736904d3288886af231d465aa70537">   81</a></span>&#160;<span class="preprocessor"> #define XM_PORTAMENTO_FX 3</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a4855f56b50a0ced0d12a9159a9715e0a">   82</a></span>&#160;<span class="preprocessor"> #define XM_VIBRATO_FX 4</span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae6fd5b68d0c72a9ae169652bbf15e781">   83</a></span>&#160;<span class="preprocessor"> #define XM_NOTE_VOL_FX 0xC</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#abdc9f8a3f0edf40f0cc7fd6276e8c8f4">   84</a></span>&#160;<span class="preprocessor"> #define XM_MAIN_TEMPO_FX 0xF</span></div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a85264ba3423d8123833745f7a9816314">   85</a></span>&#160;<span class="preprocessor"> #define XM_MAIN_VOL_FX 0x10</span></div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae2fdf0115609f5959a5551661f2d5954">   86</a></span>&#160;<span class="preprocessor"> #define XM_LEGATO_FXVALUE 0xff //used together with portamento</span></div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae9a82ecbd8a64c027f205fa46024af1d">   87</a></span>&#160;<span class="preprocessor"> #define XM_LEGATO_MIN_VAL 0xf0 //used for XM-to-SWM conversion to reduce patternsize by making these $3F legato command</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8469db01dfcd321748eb386dc3913632">   88</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a8469db01dfcd321748eb386dc3913632">BigFxConvTable</a>[0x20]={0, 1,2,3,0,0,<a class="code" href="_s_w_mconvert_8c.html#ae6fd5b68d0c72a9ae169652bbf15e781">XM_NOTE_VOL_FX</a>,0,<a class="code" href="_s_w_mconvert_8c.html#a4855f56b50a0ced0d12a9159a9715e0a">XM_VIBRATO_FX</a>,0,0,0,0,0xE,0,0, <a class="code" href="_s_w_mconvert_8c.html#abdc9f8a3f0edf40f0cc7fd6276e8c8f4">XM_MAIN_TEMPO_FX</a>,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0xE,0 }; <span class="comment">//SWM-bigFX - to - XM Fx</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a9fc2f922fb82ebfb3fa9d15a0244c903">   89</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a9fc2f922fb82ebfb3fa9d15a0244c903">SmallFxConvTable</a>[0x10]={0, 0,0,0, 0,<a class="code" href="_s_w_mconvert_8c.html#ae6fd5b68d0c72a9ae169652bbf15e781">XM_NOTE_VOL_FX</a>,0,0, <a class="code" href="_s_w_mconvert_8c.html#a4855f56b50a0ced0d12a9159a9715e0a">XM_VIBRATO_FX</a>,<a class="code" href="_s_w_mconvert_8c.html#a4855f56b50a0ced0d12a9159a9715e0a">XM_VIBRATO_FX</a>,<a class="code" href="_s_w_mconvert_8c.html#a85264ba3423d8123833745f7a9816314">XM_MAIN_VOL_FX</a>,0,0,0,0,0}; <span class="comment">//SWM-smallFX - to - XM FX conversion table</span></div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad176b83628ff95c278db87fbbdec6135">   90</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ad176b83628ff95c278db87fbbdec6135">SWM_bigFX_Oneshot</a>[0x20]={0, 0,0,0, 0,0,1, 0,0,0,0,0,0,0,0,0, 1,0,0,0,0,0, 0,0,0,0,0,0,0, 0,1,0}; <span class="comment">//if 1, the corresponding SWM FX is of one-shot (non-continuous) type</span></div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a39de276f1705512a971ac89ef46494d1">   91</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a39de276f1705512a971ac89ef46494d1">SWM_bigFX_NoteResets</a>[0x20]={0, 1,1,1,0,0,0,0,1, 0,0,0,0,0,0,0, 0,0,0,0,0,0, 0,0,0,0,0,0,0, 0,0,0}; <span class="comment">//if the effect should be reset/deleted at new note...</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">//XM INSTRUMENT FORMAT - instrument starts with 4byte (dword) Instrument-header size</span></div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ac6d6672b483892f4e8f2554c09dfd437">   93</a></span>&#160;<span class="preprocessor">#define XM_INST_HEADER_SIZE_OFFSET 0</span></div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae5833f5f157c71f3217a999a176b0231">   94</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ae5833f5f157c71f3217a999a176b0231">XM_INST_HEADER_SIZE</a>[4]={0x07,0x01,0,0};  <span class="comment">//{0x1D,0,0,0};</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a07dd0776d413e1fd7a7be00a287f8790">   95</a></span>&#160;<span class="preprocessor">#define XM_INSNAME_OFFSET 4  // 22 bytes (char) Instrument name</span></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a3397d25188f3dd62490958e5a7f86464">   96</a></span>&#160;<span class="preprocessor"> #define XM_INSNAME_SIZE 22</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad0cfb81cbdd6b1821b6c07086126feec">   97</a></span>&#160;<span class="preprocessor">#define XM_INSTYPE_OFFSET 26 //(byte) Instrument type (random value, but should always be zero)</span></div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a83b26b762d0aa9a2b2ad653a1c38a8d9">   98</a></span>&#160;<span class="preprocessor"> #define XM_INSTYPE 0  </span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#af567661820c83f5223fdd259ce110675">   99</a></span>&#160;<span class="preprocessor">#define XM_SAMPLEAMOUNT_OFFSET 27 //(word) Number of samples in instrument</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a433dec215e4d466080eaa0b4afba5d40">  100</a></span>&#160;<span class="preprocessor"> #define XM_SAMPLE_HEADER_SIZE 0x0028 //dword</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a1168facedca4805a2bcc17870ecf82f4">  102</a></span>&#160;<span class="preprocessor">#define XM_C4_NOTE_PERIOD 64.00 //default sample-period (for default C-5 SWM-note / C-4 XM-note) 49)</span></div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa0b6d00d8d0c2fe0e299c7f5dfef863c">  103</a></span>&#160;<span class="preprocessor">#define SWM_C5_NOTE_VALUE  49 //default note value for C-5 SWM note / C-4 XM_NOTE</span></div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aae708432d21a3fdcee92bb310bafbd12">  104</a></span>&#160;<span class="preprocessor">#define XM_1X_PERIOD (16.35*XM_C4_NOTE_PERIOD/2) //number of sample-periods in 1x (50Hz) framespeed</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a4fed4b2469eb2fa4a03616fd7731a9bf">  105</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a4fed4b2469eb2fa4a03616fd7731a9bf">XM_PERIOD_PER_FRAME</a>; <span class="comment">//will be used to calculate periods</span></div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#afb4f7320f0d72850c3d079d337176515">  106</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#afb4f7320f0d72850c3d079d337176515">ATTACK_times</a>[16]={2,8,16,24,38,56,68,80,100,250,500,800,1000,3000,5000,8000};</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aaa2f4b5d69c129bca71cff7e5fd67ee6">  107</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#aaa2f4b5d69c129bca71cff7e5fd67ee6">DECAY_RELEASE_MaxTimes</a>[16]={6,24,48,72,114,168,204,240,300,750,1500,2400,3000,9000,15000,24000};</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0d6231f0d43776715da0a11a7af38842">  108</a></span>&#160;<span class="preprocessor">#define ADSR_time_ScaleRate 32 </span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">//MIDI format descriptor constants======================================</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">//Header-chunk (every value is in big-endian format)</span></div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#afdb811e2d2c73aabbd9db0e5f9370cd7">  112</a></span>&#160;<span class="preprocessor">#define MIDI_ID_OFFSET 0</span></div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ac8f1507a5d0533800536c161817ceb64">  113</a></span>&#160;<span class="keywordtype">char</span>* <a class="code" href="_s_w_mconvert_8c.html#ac8f1507a5d0533800536c161817ceb64">MIDI_ID</a>=<span class="stringliteral">&quot;MThd&quot;</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aaf49a378fbe4115c6c763daf074a5a99">  114</a></span>&#160;<span class="preprocessor">#define MIDI_ID_SIZE 4</span></div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a51d6ce9a265b8a29810993b1669e52d6">  115</a></span>&#160;<span class="preprocessor">#define MIDI_HEADERSIZE_OFFSET 4 //the header-size of the MIDI is a big-endian double-word </span></div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8992a840970af64a8ea04118358aa040">  116</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a8992a840970af64a8ea04118358aa040">MIDI_HEADERSIZE</a>[4]={0,0,0,0x6}; <span class="comment">//always 00 00 00 06 for standard MIDI files</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#af9b3b07a58c48af946c349d974c266c0">  117</a></span>&#160;<span class="preprocessor">#define MIDI_VERSION_OFFSET 8  //big endian 2-byte word</span></div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">  118</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a>; <span class="comment">//(0:single-track,1:multiple-track,2:multiple song)</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a5d5b81208e0f49109a96aed961dc82ab">  119</a></span>&#160;<span class="preprocessor">#define MIDI_TRACK_AMOUNT_OFFSET 0xA //2 byte big-endian word containing number of tracks</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa40617d652aaf2a55939a5143b42ce22">  120</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#aa40617d652aaf2a55939a5143b42ce22">MIDI_TRACK_AMOUNT</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a6f0448fecb5cb596998caee0339eb066">  121</a></span>&#160;<span class="preprocessor">#define MIDI_DIVISION_OFFSET 0xC //2 byte - If the value is positive, then it represents the units per beat. For example, +96 would mean 96 ticks per beat.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">  122</a></span>&#160;<span class="keywordtype">signed</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>;</div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#af6c831f2601e8659ac5d9c71e457e208">  123</a></span>&#160;<span class="preprocessor">#define MIDI_TRACKS_OFFSET 0xE //here tracks are starting</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; <span class="comment">//Track-chunk - offset values here are relative to track-chunks&#39; beginnings</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ac70dbc7d80ad6221cf6bd0eb284544fb">  125</a></span>&#160;<span class="preprocessor"> #define MIDI_TRACK_ID_OFFSET 0</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ab2b7ec9c93bf4d6d90678f689b0f9e45">  126</a></span>&#160; <span class="keywordtype">char</span>* <a class="code" href="_s_w_mconvert_8c.html#ab2b7ec9c93bf4d6d90678f689b0f9e45">MIDI_TRACK_ID</a>=<span class="stringliteral">&quot;MTrk&quot;</span>; <span class="comment">//4 bytes - the literal string MTrk. This marks the beginning of a track. </span></div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aae84d16139ed8494d92b9c5d5fe33cbc">  127</a></span>&#160;<span class="preprocessor"> #define MIDI_TRACK_SIZE_OFFSET 4 //4 bytes - the number of bytes in the track chunk following this number. </span></div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a866257b75936a2dfe8c3fc00021442fd">  128</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="_s_w_mconvert_8c.html#a866257b75936a2dfe8c3fc00021442fd">MIDI_TRACK_SIZE</a>[64]; <span class="comment">//collecting track-sizes here</span></div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a453648b4e5c9a92a9166db8107a9b549">  129</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="_s_w_mconvert_8c.html#a453648b4e5c9a92a9166db8107a9b549">MIDI_TRACK_OFFSET</a>[64]; <span class="comment">//calculating from sizes</span></div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae63a9263e5094abbedb60883dd21006a">  130</a></span>&#160;<span class="preprocessor"> #define MIDI_TRACK_EVENT_OFFSET 8 //a sequenced track event</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">//Track-event format (consists of a delta time since the last event, and one of three types of events.)</span></div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a05e3ab1bc068f15059b995efb393d0d0">  132</a></span>&#160;<span class="preprocessor">  #define MIDI_DELTA_TIME_OFFSET 0 //variable-length big-endian value, last databyte has bit7 cleared (others have it set)</span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8e3d0faec024bed92b595bb5a37fd6d0">  133</a></span>&#160;<span class="preprocessor">  #define MIDI_EVENT_OFFSET 0</span></div>
<div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a2211d8cdaa9cbcc584211e208ddfb5c4">  134</a></span>&#160;<span class="preprocessor">  #define MIDI_META_EVENT_OFFSET 0</span></div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a3482b6b2d03883bf8c2ead2a4b09d4de">  135</a></span>&#160;<span class="preprocessor">  #define MIDI_SYSEX_EVENT_OFFSET 0</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="comment">//Meta-event format</span></div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7adf3b33943fcd2b5371d66800f9ee0d">  137</a></span>&#160;<span class="preprocessor">   #define MIDI_META_TYPE_OFFSET 0</span></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0746515c8ac027966225cb42b3fe1c91">  138</a></span>&#160;<span class="preprocessor">   #define MIDI_META_LENGTH_OFFSET 1 //length of meta event data expressed as a variable length value. </span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a473cf62601526046cdc2bafafa933e75">  139</a></span>&#160;<span class="preprocessor">   #define MIDI_META_EVENT_DATA_OFFSET 0</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   <span class="comment">//System-exclusive event format</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">//A system exclusive event can take one of two forms:</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">//sysex_event = 0xF0 + &lt;data_bytes&gt; 0xF7 or sysex_event = 0xF7 + &lt;data_bytes&gt; 0xF7</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">//In the first case, the resultant MIDI data stream would include the 0xF0. In the second case the 0xF0 is omitted.  </span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">//-----------------global variable declarations---------------------------------</span></div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">  146</a></span>&#160;<span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>[<a class="code" href="_s_w_mconvert_8c.html#a367ba81f78d6fb6a2f0269fa891459ed">FILENAME_LENGTH_MAX</a>]; <span class="comment">//input-file described as 1st command-line parameter</span></div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">  147</a></span>&#160;<span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>[<a class="code" href="_s_w_mconvert_8c.html#a938f4ef45af65ae45439ce34afdc5f0c">TYPE_ID_LENGTH_MAX</a>]; <span class="comment">//type identifier string inside the source file </span></div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">  148</a></span>&#160;<span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>[<a class="code" href="_s_w_mconvert_8c.html#a367ba81f78d6fb6a2f0269fa891459ed">FILENAME_LENGTH_MAX</a>]; <span class="comment">//output-file described as 2nd command-line parameter</span></div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">  149</a></span>&#160;<a class="code" href="stdio_8h.html#a175abb747ea3b78aa8da87355dcec473">FILE</a> *<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, *<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>; <span class="comment">//in/out tune-file descriptors</span></div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">  150</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a8471ef1fc2e359bf5138a7517d543f81">TUNEDATA_SIZE_MAX</a>]; <span class="comment">//tune-file-data loaded in memory for conversion</span></div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a61fadc6749a3e4de2c4c1fcc8f4accdc">  151</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>=0,<a class="code" href="_s_w_mconvert_8c.html#a61fadc6749a3e4de2c4c1fcc8f4accdc">OutputSize</a>=0;  <span class="comment">//detected size of the loaded/saved tune</span></div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">  152</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>,<a class="code" href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a>; <span class="comment">//offset &amp; length in file where the file-type ID can be found</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a2e54a7e472577fd07d329355d567e31a">  154</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>,<a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a>,<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>,<a class="code" href="_s_w_mconvert_8c.html#a2e54a7e472577fd07d329355d567e31a">SubtuneAmount</a>,<a class="code" href="_s_w_mconvert_8c.html#ae598de553d4de8402a78d07303ea7c31">ChordAmount</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a08d399b22d86a0ff5a9350140eaa2934">  155</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a08d399b22d86a0ff5a9350140eaa2934">XMinstAmount</a>;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">  156</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a7358d0df9d4fdb976d837517a3434cbb">SampleLength</a>,<a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a>,<a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>,<a class="code" href="_s_w_mconvert_8c.html#a181cd98f6dfc42bf4944a66066a61f30">LoopLength</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">  157</a></span>&#160;<span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>[256]; <span class="comment">//array to hold tune author-info</span></div>
<div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">  158</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[32*<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>][256]; <span class="comment">//array to hold orderlist (3 sequences)</span></div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ac79ae9da647a56348bbafd411f023250">  159</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ac79ae9da647a56348bbafd411f023250">SWM_SEQ_SIZE</a>[256]; <span class="comment">//array of SWM sequence-sizes</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a5ca70a2c9de78651a100422b35bb18d8">  160</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a5ca70a2c9de78651a100422b35bb18d8">SWM_SEQ_TOP</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">  161</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[32][2]; <span class="comment">//subtune-tempos</span></div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">  162</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[256][256]; <span class="comment">//array to hold SWM pattern-data</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a604e1aa9b57a04a3c0bcbe31c4ddcf37">  163</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a604e1aa9b57a04a3c0bcbe31c4ddcf37">PATTERNSIZES</a>[256]; <span class="comment">//array of effective SWM pattern-sizes</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">//unsigned char PACKEDSIZES[256]; //compressed pattern-sizes</span></div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">  165</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[256]; <span class="comment">//array of musical lengths of patterns</span></div>
<div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">  166</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[256]; <span class="comment">//result pattern-numbers of 3-to-1 orderlist conversion / imported XM orderlist</span></div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">  167</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[<a class="code" href="_s_w_mconvert_8c.html#ace9f16ecc6b8bdf14fe8161076832603">XM_PATTERNS_MAX</a>]; <span class="comment">//offsets of patterns in XM-file</span></div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">  168</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="_s_w_mconvert_8c.html#ace9f16ecc6b8bdf14fe8161076832603">XM_PATTERNS_MAX</a>];  <span class="comment">//array of musical lengths (number of rows) of XM patterns</span></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a10cc467511ea79df2236a0323a3661d4">  169</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a10cc467511ea79df2236a0323a3661d4">XMpatternSize</a>[<a class="code" href="_s_w_mconvert_8c.html#ace9f16ecc6b8bdf14fe8161076832603">XM_PATTERNS_MAX</a>]; <span class="comment">//array of effective XM pattern-sizes</span></div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">  170</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a>[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>][256]; <span class="comment">//groups of 3 SWM patterns put into XM patterns </span></div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7028dff28ae8d96b3cfe3e9f4d3961ce">  171</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a7028dff28ae8d96b3cfe3e9f4d3961ce">XMseqTranspose</a>[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>][256]; <span class="comment">//transpose-value of sequence-positions</span></div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7a7241774dc160d2ddd1d65f858a0802">  172</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a7a7241774dc160d2ddd1d65f858a0802">XMseqPos</a>[256]; <span class="comment">//skew register for XM-orderlist, where seq-effects are left out</span></div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">  173</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>][256]; <span class="comment">//XM pattern-bunch references to the original SWM pattern-numbers</span></div>
<div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa9cb0dc94254b49a296fc8daa58b0cc3">  174</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#aa9cb0dc94254b49a296fc8daa58b0cc3">XMpattTranspose</a>[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>][256]; <span class="comment">//to detect if pattern-notes need to be transposed</span></div>
<div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">  175</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[256*32]; <span class="comment">//temporary place for one pattern, before writing it to file</span></div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">  176</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a>[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>][256*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]; <span class="comment">//holds three temporarily read vertical unpacked XM patterns</span></div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">  177</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#ace9f16ecc6b8bdf14fe8161076832603">XM_PATTERNS_MAX</a>][256*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]; <span class="comment">//holds registered (non-duplicated) vertical unpacked XM patterns</span></div>
<div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a51b43419a8b2d074202d6022ffc396c4">  178</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a51b43419a8b2d074202d6022ffc396c4">XMinstName</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>][<a class="code" href="_s_w_mconvert_8c.html#a3397d25188f3dd62490958e5a7f86464">XM_INSNAME_SIZE</a>]; <span class="comment">//XM instrument-names</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a4e2e9fe44d37b8797ad46c85330314b7">  179</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#adb5cb6efa4cf51d6320d717fb248aa14">XMinsVibDelay</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>],<a class="code" href="_s_w_mconvert_8c.html#ab0162de92e566fd007cceb5009bd4df3">XMinsVibAmp</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>],<a class="code" href="_s_w_mconvert_8c.html#a4e2e9fe44d37b8797ad46c85330314b7">XMinsVibFreq</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>];</div>
<div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">  180</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>]; </div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">  181</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a97ab0f6a3b5d22c449b6b1cdbe922bbb">XMinsAttack</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>], <a class="code" href="_s_w_mconvert_8c.html#ac9db4d2a92c8d00f99e2bbb919e6b2f5">XMinsDecay</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>], <a class="code" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>];</div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a3a780c23caed8c11c27d32938b966209">  182</a></span>&#160; <span class="keywordtype">signed</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a3a780c23caed8c11c27d32938b966209">XMinsTransp</a>[<a class="code" href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a>];</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">  183</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>]={0,0,0}; <span class="comment">//init non-linear SWM data pointer for SWM source</span></div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a2bc90a4d171b833f8bb06de67ca17cc3">  184</a></span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a2bc90a4d171b833f8bb06de67ca17cc3">ResetFx</a>[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>]={0,0,0}; <span class="comment">//signs if an effect should be reset at note-start</span></div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">  185</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[64][256]; <span class="comment">//array to hold instruments</span></div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">  186</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[64]; <span class="comment">//0 if instrument is not chord, otherwise the default chord-number</span></div>
<div class="line"><a name="l00187"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ab6de30d2ae653b5aaabaee15396ac8b0">  187</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ab6de30d2ae653b5aaabaee15396ac8b0">INSTNAMES</a>[64][32]; <span class="comment">//array of instrument-names</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">  188</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[256]; <span class="comment">//array of chords</span></div>
<div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a1baadd52d31bcab127954eeeccff46bb">  189</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a1baadd52d31bcab127954eeeccff46bb">ChordLen</a>[64]; <span class="comment">//length of chords</span></div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">  190</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[64]; <span class="comment">//base-indexes/positions of chords inside chordtable</span></div>
<div class="line"><a name="l00191"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">  191</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>, <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>, <a class="code" href="_s_w_mconvert_8c.html#a177084439e1b59bcf04fcf8de509168f">PackSignPos</a>, <a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>,<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>,<a class="code" href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">XMpattPos</a>,<a class="code" href="_s_w_mconvert_8c.html#aeaf7e6bae86a2f31c521794796bc10d2">SWMseqLength</a>[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>];</div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a00eb068b5fb87045ee96f4d5f9c51302">  192</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[64], <a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[64], <a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[64], <a class="code" href="_s_w_mconvert_8c.html#a00eb068b5fb87045ee96f4d5f9c51302">ActVol</a>[64], <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[64], <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[64], <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>[64]; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">  193</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>,<a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>,<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>,<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>,<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ac2ca7efd41d2925e2bd8db3c74ac854a">  194</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ac2ca7efd41d2925e2bd8db3c74ac854a">WFchar</a>[16]={<span class="charliteral">&#39;0&#39;</span>,<span class="charliteral">&#39;T&#39;</span>,<span class="charliteral">&#39;S&#39;</span>,<span class="charliteral">&#39;3&#39;</span>,<span class="charliteral">&#39;P&#39;</span>,<span class="charliteral">&#39;5&#39;</span>,<span class="charliteral">&#39;6&#39;</span>,<span class="charliteral">&#39;7&#39;</span>,<span class="charliteral">&#39;N&#39;</span>,<span class="charliteral">&#39;9&#39;</span>,<span class="charliteral">&#39;a&#39;</span>,<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;c&#39;</span>,<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;e&#39;</span>,<span class="charliteral">&#39;f&#39;</span>}; <span class="comment">//WAVEFORM-NIBBLE display (in sample-name)</span></div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#af0d88d1e9f5ebda92dd9595f20d3f6f3">  195</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#af0d88d1e9f5ebda92dd9595f20d3f6f3">OctavePeriod</a>[16]={16,16,16,16,16,8,4,2,1,1,1,1,1,1,1,1}; <span class="comment">//divide framespeed for deeper octave instruments</span></div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">  196</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>][<a class="code" href="_s_w_mconvert_8c.html#a313a2a228e7c8de38d4d3acfb9cbd84b">MIDI_TRACKLEN_MAX</a>], <a class="code" href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a>[<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>]; <span class="comment">//midi delta-time-data for different channels</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">  197</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[8]={4,2,18,8}; <span class="comment">//set default MIDI time-signature</span></div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#af2816d5909253f7f75b35d6beaec7ae6">  198</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#af2816d5909253f7f75b35d6beaec7ae6">MIDInotes</a>[<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>][<a class="code" href="_s_w_mconvert_8c.html#a313a2a228e7c8de38d4d3acfb9cbd84b">MIDI_TRACKLEN_MAX</a>]; <span class="comment">//midi note-data for different channels</span></div>
<div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#adb50d199b0acc7cab403bb6ff8a0e7e3">  199</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#adb50d199b0acc7cab403bb6ff8a0e7e3">MIDIvelos</a>[<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>][<a class="code" href="_s_w_mconvert_8c.html#a313a2a228e7c8de38d4d3acfb9cbd84b">MIDI_TRACKLEN_MAX</a>]; <span class="comment">//midi velocity-data for different channels</span></div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a407575f0c8057573a7b2b3dc326a431c">  200</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>], <a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>], <a class="code" href="_s_w_mconvert_8c.html#a407575f0c8057573a7b2b3dc326a431c">TuneBPM</a>=120, <a class="code" href="_s_w_mconvert_8c.html#a000ec550efb8715efa0fd920ca2b51d8">MIDItempo</a>=500000;</div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a3c70de86e241b099679ce2782db96d67">  201</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a3c70de86e241b099679ce2782db96d67">Digits</a>[<a class="code" href="_s_w_mconvert_8c.html#ace57b458c1b00668b74dae3a5933fe13">MIDI_VLV_LEN_MAX</a>]; <span class="comment">//stores variable length value digits temporarily when processing MIDI</span></div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a2379b5bc521862f7b0ec0200f7a7a7e3">  202</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a2379b5bc521862f7b0ec0200f7a7a7e3">CurrentTrack</a>; <span class="comment">//temp for multitrack MIDI&#39;s currently processed track-number</span></div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a6595ec138038a344a0a2d14855bc6aaf">  203</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a6595ec138038a344a0a2d14855bc6aaf">SWMtoXMvibAmp</a>[16]= {0x0,0x1,0x2,0x3,0x4,0x4,0x5,0x6,0x6,0x6,0x7,0x8,0x9,0xA,0xC,0xF}; <span class="comment">//XM amplitude values for SWM amplitude values 0..15</span></div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a424f1eb6ce3cfd7defa70dbd5be299e0">  204</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a424f1eb6ce3cfd7defa70dbd5be299e0">SWMtoXMvibFreq</a>[16]={0xF,0xF,0xF,0xE,0xA,0x8,0x7,0x6,0x5,0x4,0x4,0x3,0x3,0x3,0x3,0x3}; <span class="comment">//XM frequency values for SWM frequency values 0..15</span></div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aeca477d7ebb0803e9de6bdd86bea207b">  205</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#aeca477d7ebb0803e9de6bdd86bea207b">XMtoSWMvibAmp</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMamp)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=15; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="keywordflow">if</span>(<a class="code" href="_s_w_mconvert_8c.html#a6595ec138038a344a0a2d14855bc6aaf">SWMtoXMvibAmp</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]&gt;=XMamp) <span class="keywordflow">break</span>; <span class="comment">//find the matching SW-amplitude in the array</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; <span class="keywordflow">return</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa12020586c748b15b0f642e011dd4ea8">  211</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#aa12020586c748b15b0f642e011dd4ea8">XMtoSWMvibFreq</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMvib)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=15; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="keywordflow">if</span>(<a class="code" href="_s_w_mconvert_8c.html#a424f1eb6ce3cfd7defa70dbd5be299e0">SWMtoXMvibFreq</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]&lt;=XMvib) <span class="keywordflow">break</span>; <span class="comment">//find the matching SW-amplitude in the array</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>==16) <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=4; <span class="comment">//default vibrato for a zero-case </span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; <span class="keywordflow">return</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">//-----------------function-prototype declarations------------------------------</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#abe701e33917c61bfffabe0c84f389113">ProcessInput</a>(); <span class="keywordtype">char</span>* <a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<span class="keywordtype">char</span> *filename); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<span class="keywordtype">char</span> *filename,<span class="keywordtype">char</span> *newExt);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a8a668e7a8a3eb98cb6a57761fc4970ee">ProcessSWM</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a0bda1eaf737f1a78d5b861ec41b186b9">ProcessXM</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a1e95cfaa4d03cafbe95c0215cf55eb9c">ProcessMIDI</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#ad806a9cf90d874a6e0ed78b95bb552f0">ConvertTune</a>(); </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#aec653097046ff24c296d7ea72c3ffecd">GenerateXM</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#aa9de0598c0a83cf144ba247501aec0f4">GenerateMIDI</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#adc4e477a4e849e60575b4352d19a5471">GerenateSWS</a>();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a6deea02a3a06869ccdeb1fdc3adee0c0">ProcessSWMver1</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a647c9e53ce7e67aae4b1d2bacdcbb1a6">ProcessXM204</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a087c8ae400dd7d3bb08b573ecded83c4">DisplayInputInfo</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ae0fe51430e9cfac621d3d62060dd8f4e">LowByte</a>(<span class="keywordtype">int</span> num); <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a3d04ecd0ce48798116cec8c952b750d8">HiByte</a>(<span class="keywordtype">int</span> num); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a48c89e7348314ae53287bef6d6edf473">CutExt</a>(<span class="keywordtype">char</span> *filename);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DataToWrite); <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DataToWrite);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>(); </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a88fd95a9901ba7482a05b7ca455b92da">SWMtoXMslide</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> SWMslide); <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a51ff3fec354cf2977cb012fd711adda1">XMtoSWMslide</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMslide);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a69d78552435a794730f9f0f9f2d8532f">ATTACKtoXMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> AttackNibble); <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#acf987664642f1c7e519380858085bcd3">ATTACKtoSWMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> XMattack);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a7796645a162efd545d6f1bddd74681d4">DECAYtoXMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DecayNibble, <span class="keywordtype">float</span> SustainNibble);  </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a558813ed43d7430a63bbb702afdf0487">DECAYtoSWMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> XMdecay, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMsustain);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a50fa8ec29e4dda97353ec07676dad3f0">RELEASEtoXMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ReleaseNibble, <span class="keywordtype">float</span> SustainNibble);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a7e85c91cc42aa9f6574bfc286b420a1f">RELEASEtoSWMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> XMrelease, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMsustain);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a4050eb1e64b874341e34c89c17847548">WriteP00header</a>(); <span class="comment">//write &#39;C64File&#39; header to file;</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="_s_w_mconvert_8c.html#ae77bd7aceb642db9e7d94ac748130a87">ReadVarLenNum</a>(); </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a205e98defd45247b25a9a12f08d0d8ac">ProcessMIDItrack</a>(); <span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a40849854c215922d69679bda489fecd6">SetChordInstr</a>();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">//==============================================================================</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0ddf1224851353fc92bfbff6f499fa97">  240</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a> (<span class="stringliteral">&quot;\n====================================\n&quot;</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;         <span class="stringliteral">&quot;SID-Wizard SWM1 converter (app v1.7)\n&quot;</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;         <span class="stringliteral">&quot;====================================\n&quot;</span>);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; <span class="keywordflow">if</span> ( (argc==2 &amp;&amp; !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(argv[1],<span class="stringliteral">&quot;-help&quot;</span>)) || argc==1 )</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a> (<span class="stringliteral">&quot;Converts to/from XM or MIDI formats,\n&quot;</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;          <span class="stringliteral">&quot;between .prg &amp; .P00, and S00 to SID.\n&quot;</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          <span class="stringliteral">&quot;And .swm to .sws (2SID/stereo)      \n&quot;</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;          <span class="stringliteral">&quot;Usage syntax is pretty simple:      \n&quot;</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          <span class="stringliteral">&quot;SWMconvert &lt;inputfile&gt; [outputfile] \n&quot;</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;          <span class="stringliteral">&quot;------------------------------------\n&quot;</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;          <span class="stringliteral">&quot;(Formats will depend on extensions.)\n&quot;</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;          <span class="stringliteral">&quot;If you don&#39;t specify an output-file,\n&quot;</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;          <span class="stringliteral">&quot;name of the input file will be used \n&quot;</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;          <span class="stringliteral">&quot;as output-filename. Existing files  \n&quot;</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;          <span class="stringliteral">&quot;will be overwritten automatically.  \n&quot;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;          <span class="stringliteral">&quot;------------------------------------\n&quot;</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;          <span class="stringliteral">&quot; 2014 Hermit Soft. (Mihaly Horvath) \n&quot;</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;          <span class="stringliteral">&quot;====================================\n&quot;</span>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nPress ENTER key...\n\n&quot;</span>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="stdio_8h.html#a3e29caa20f7cffe18f410f01278905a8">getchar</a>();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(1);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; <span class="keywordflow">else</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(argv[1],<span class="stringliteral">&quot;rb&quot;</span>); </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a> == 0 )</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>( <span class="stringliteral">&quot;Could not open input-file...\n&quot;</span> );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>();<a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(2);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <a class="code" href="string_8h.html#ab208b9c243f0a136d9ad86cd58caeaf7">strcpy</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>,argv[1]);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">if</span> (argc==3) <a class="code" href="string_8h.html#ab208b9c243f0a136d9ad86cd58caeaf7">strcpy</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,argv[2]);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#abe701e33917c61bfffabe0c84f389113">ProcessInput</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\n**** Module processed. Going to Convert ****.\n---------------------------------------------\n&quot;</span>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#ad806a9cf90d874a6e0ed78b95bb552f0">ConvertTune</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">//==========================FUNCTIONS=====================================================</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#abe701e33917c61bfffabe0c84f389113">  290</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#abe701e33917c61bfffabe0c84f389113">ProcessInput</a>()</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;{</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Input-file name: %s \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Input-file extension: %s \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>));</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; <span class="comment">//read extension and decide if input is SWM or XM</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.SWM&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.PRG&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.swm&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.prg&quot;</span>) )</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>=2; <a class="code" href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a>=4;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a8a668e7a8a3eb98cb6a57761fc4970ee">ProcessSWM</a>();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.P00&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.p00&quot;</span>) )</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>=<a class="code" href="_s_w_mconvert_8c.html#aeaf69d8f8b3ebfd510b7a5f43ab0c2ee">VICE_P00_OFFSET</a>+2; <a class="code" href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a>=4;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">if</span> ( <a class="code" href="string_8h.html#a2a16e376fdf760ab48963ace1fbd8231">strlen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>)==0 || <a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.prg&quot;</span>) ) <a class="code" href="_s_w_mconvert_8c.html#a8a668e7a8a3eb98cb6a57761fc4970ee">ProcessSWM</a>(); <span class="comment">//only call ProcessSWM if the given output-file is not .prg</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; }</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.S00&quot;</span>) ||  !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.s00&quot;</span>) )</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Converting .S00 format to .SID format.&quot;</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.XM&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.xm&quot;</span>))</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>=<a class="code" href="_s_w_mconvert_8c.html#aa646a10ff302610e2f6401f063099b96">XM_ID_OFFSET</a>; <a class="code" href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a>=<a class="code" href="_s_w_mconvert_8c.html#a5699d8f6565bc21ef40fbe8b3cc577a5">XM_ID_SIZE</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a0bda1eaf737f1a78d5b861ec41b186b9">ProcessXM</a>();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.MID&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.mid&quot;</span>) )</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>=<a class="code" href="_s_w_mconvert_8c.html#afdb811e2d2c73aabbd9db0e5f9370cd7">MIDI_ID_OFFSET</a>; <a class="code" href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a>=<a class="code" href="_s_w_mconvert_8c.html#aaf49a378fbe4115c6c763daf074a5a99">MIDI_ID_SIZE</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a1e95cfaa4d03cafbe95c0215cf55eb9c">ProcessMIDI</a>();</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; } </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; <span class="keywordflow">else</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; { </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Unsupported file-extension... ***\n&quot;</span>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);<a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>();<a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(3);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">//==========================================================================================</span></div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a57356a6758396b1dceb0b0d082a3d026">  329</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a57356a6758396b1dceb0b0d082a3d026">GenerateSWS</a>()</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;{</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j,k;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;to SWS 2SID/stereo SID-Wizard worktune format. \n&quot;</span>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Output file-name will be: %s\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); <span class="comment">// !!!important &quot;wb&quot; is for binary (not to check text-control characters)</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0x3333); <span class="comment">//-2. load-address of PRG format</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; <span class="comment">//write SWM header</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;4;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#af1c49230c45ce1c9a4653bd1eeed56e0">SWS_ID</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//0-3. SWM-ID</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+FSPEEDPOS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);    <span class="comment">//4.preferred framespeed</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>*2;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0xFF,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//5-$A.solo all tracks</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+SWM_DEFP_POS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//$B. default pattern-length - should depend on XM patternlengths</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+SEQAMOPOS]*2,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//$C. sequence-amount</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+PTAMOUPOS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);   <span class="comment">//$D. pattern-amount</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+INSTAMPOS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);   <span class="comment">//$E. number of instruments </span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+CHRDLEPOS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);   <span class="comment">//$F. chordtable-length (calculated in converter)</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+TMPLENPOS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);   <span class="comment">//$10. tempo-program table size</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);<a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//two obsolete empty bytes</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+DRIVERTYPE_POS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//$13</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+TUNINGTYPE_POS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//$14</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+SWM_HILI_POS],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//$15 step-highlighting amount for 2SID version</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//SID2 address ID                   //$16</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//$17 //(kept for possible upcoming expansion)</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;(tuneheadersize-AUTHORPOS);<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+AUTHORPOS+<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//$18..$3f - author-info</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; <span class="comment">//F.Sequences</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting Sequences (orderlist): ---------&quot;</span>);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a> != 0)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a2e54a7e472577fd07d329355d567e31a">SubtuneAmount</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>; j++)     </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">for</span> (k=0; k&lt;<a class="code" href="_s_w_mconvert_8c.html#ac79ae9da647a56348bbafd411f023250">SWM_SEQ_SIZE</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>*3+j]; k++)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;     <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>*3+j][k],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#ac79ae9da647a56348bbafd411f023250">SWM_SEQ_SIZE</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>*3+j],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>; j++)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0xFE,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//dummy sequence delimiter</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(1,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//dummy sequence size</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  }</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=<a class="code" href="_s_w_mconvert_8c.html#a5ca70a2c9de78651a100422b35bb18d8">SWM_SEQ_TOP</a>+1;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//rest of the data matches to SWM</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\n**** Conversion is complete. **** \nSWS file &#39;%s&#39; generated... :)&quot;</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; <span class="stringliteral">&quot;\n-----------------------------------------------------\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;} </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160; </div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">//=================================================================================</span></div>
<div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ad806a9cf90d874a6e0ed78b95bb552f0">  387</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#ad806a9cf90d874a6e0ed78b95bb552f0">ConvertTune</a>()  <span class="comment">//convert to target format</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; <span class="keywordtype">int</span> Data,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Deciding on output-format and filename.\n&quot;</span>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; <span class="comment">//read extension and decide if input is SWM or XM</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="string_8h.html#a2a16e376fdf760ab48963ace1fbd8231">strlen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>)==0) <span class="comment">//if no output-file specified, give the same name and opposite/obvious extension</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; { <span class="comment">//no output-filename given</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;No output-file given. Using input-filename, appending extension.&quot;</span>);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="string_8h.html#ab208b9c243f0a136d9ad86cd58caeaf7">strcpy</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>); </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.XM&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.xm&quot;</span>) )</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  { <span class="comment">//no output given</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.swm.prg&quot;</span>); <span class="comment">//append corresponding extension</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting XM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.MID&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.mid&quot;</span>) )</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  { <span class="comment">//no output given</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.swm.prg&quot;</span>); <span class="comment">//append corresponding extension</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting MIDI &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  }  </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.S00&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.s00&quot;</span>) ) <span class="comment">//if input-format is .S00, converting it to .sid</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  { <span class="comment">//no output given</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.sid&quot;</span>); <span class="comment">//append with new extension</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Converting .S00 VICE C64-file to .sid file... ***&quot;</span>);    </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>,<span class="stringliteral">&quot;rb&quot;</span>); </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>,<a class="code" href="_s_w_mconvert_8c.html#aeaf69d8f8b3ebfd510b7a5f43ab0c2ee">VICE_P00_OFFSET</a>,0); <span class="comment">//go right after end of .S00 &#39;C64File&#39; header (omit header from .seq)</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">while</span>( (Data=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)) != <a class="code" href="stdio_8h.html#a59adc4c82490d23754cd39c2fb99b0da">EOF</a> ) { <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(Data,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); } <span class="comment">//copy source to target</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Conversion done, file &#39;%s&#39; is generated... ***\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  } </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  { <span class="comment">//no output given</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.xm&quot;</span>); <span class="comment">//append new extension</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting SWM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#aec653097046ff24c296d7ea72c3ffecd">GenerateXM</a>();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.swm&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.prg&quot;</span>) )</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; { <span class="comment">//output name &amp; SWM extension given</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.xm&quot;</span>) )  { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting XM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>(); }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.mid&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.MID&quot;</span>) )  { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting MIDI &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>(); }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.SWM&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.PRG&quot;</span>) ||  !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.swm&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.prg&quot;</span>) )  <span class="comment">//what if input format is the same (SWM)?</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Are U crazy Man? SWM to SWM? ***\n&quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>(); <a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(111); }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.P00&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.p00&quot;</span>) ) <span class="comment">//if input-format is .P00, converting it to .prg</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  {  </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Converting .P00 VICE C64-file to .prg file... ***&quot;</span>);    </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>,<span class="stringliteral">&quot;rb&quot;</span>); </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <span class="keywordtype">char</span> OutputFileName2[<a class="code" href="_s_w_mconvert_8c.html#a367ba81f78d6fb6a2f0269fa891459ed">FILENAME_LENGTH_MAX</a>];</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>,<a class="code" href="_s_w_mconvert_8c.html#afed83846bce42b8514a138da8cb6ab8e">VICE_P00_FILENAME_OFFSET</a>,0); <a class="code" href="stdio_8h.html#ab80c528a844501e0400dee07e44d5cfd">fgets</a>(OutputFileName2,<a class="code" href="_s_w_mconvert_8c.html#a9acad272399839ea9901389ea2eba52b">C64_FILENAME_LENGTH_MAX</a>+1,<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//get real C64 filename from P00 file</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="string_8h.html#a2a16e376fdf760ab48963ace1fbd8231">strlen</a>(OutputFileName2);<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) OutputFileName2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="ctype_8h.html#a6c87523fdad41bc18c94f4f0296718ac">tolower</a>(OutputFileName2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]); <span class="comment">//convert to lowercase for C64</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <a class="code" href="stdio_8h.html#a175abb747ea3b78aa8da87355dcec473">FILE</a> * OutputFile2 = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(OutputFileName2,<span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>,<a class="code" href="_s_w_mconvert_8c.html#aeaf69d8f8b3ebfd510b7a5f43ab0c2ee">VICE_P00_OFFSET</a>,0); <span class="comment">//go right after end of .P00 &#39;C64File&#39; header (omit header from .prg)</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <span class="keywordflow">while</span>( (Data=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)) != <a class="code" href="stdio_8h.html#a59adc4c82490d23754cd39c2fb99b0da">EOF</a> ) { <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(Data,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(Data,OutputFile2); } <span class="comment">//copy source to target</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(OutputFile2);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Conversion done, files &#39;%s&#39; and &#39;%s&#39; are generated... ***\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,OutputFileName2);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  } </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.xm&quot;</span>) )</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; { <span class="comment">//output name &amp; XM extension given</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.xm&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.XM&quot;</span>) ) { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Are U crazy Man? XM to XM? ***\n&quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>(); <a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(111); } <span class="comment">//what if input format is the same</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">else</span> { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting SWM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#aec653097046ff24c296d7ea72c3ffecd">GenerateXM</a>(); }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.MID&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.mid&quot;</span>) ) </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160; { <span class="comment">//output name &amp; MIDI extension given</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.xm&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.XM&quot;</span>) ) { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** No XM to MIDI conversion support yet. ***\n&quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>(); <a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(111); } <span class="comment">//what if input format is the same</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.MID&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.mid&quot;</span>) ) { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Are U crazy Man? MIDI to MIDI? ***\n&quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>(); <a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(111); }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">else</span> { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting SWM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#aa9de0598c0a83cf144ba247501aec0f4">GenerateMIDI</a>(); }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; } </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.sws&quot;</span>) )</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; { <span class="comment">//output name &amp; SWS extension given</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.sws&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.SWS&quot;</span>) ) { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Are U crazy Man? SWS to SWS? ***\n&quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>(); <a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(111); } <span class="comment">//what if input format is the same</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.swm&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.prg&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.P00&quot;</span>) ) </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting SWM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a57356a6758396b1dceb0b0d082a3d026">GenerateSWS</a>(); }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.P00&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.p00&quot;</span>) ) <span class="comment">//.P00 VICE C64file output? convert .prg to .P00</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; {<span class="comment">//output name &amp; P00 extension given</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.xm&quot;</span>) )  { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting XM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>(); }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.P00&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.p00&quot;</span>) ) </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   { <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Are U crazy Man? P00 to P00? ***\n&quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>(); <a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(111); }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.SWM&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.PRG&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.swm&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.prg&quot;</span>) )</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Converting .swm/.prg to .P00 VICE C64-file... ***&quot;</span>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>,<span class="stringliteral">&quot;rb&quot;</span>); </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a4050eb1e64b874341e34c89c17847548">WriteP00header</a>(); <span class="keywordflow">while</span>( (Data=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)) != <a class="code" href="stdio_8h.html#a59adc4c82490d23754cd39c2fb99b0da">EOF</a> ) { <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(Data,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Conversion done, file &#39;%s.P00&#39; is generated... ***\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; <span class="keywordflow">else</span> <span class="comment">//if output extension not found, automatic format (opposite of input-format)</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.XM&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.xm&quot;</span>) )</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  { <span class="comment">//input-file is xm, no output-format/extension was given</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.swm.prg&quot;</span>); <span class="comment">//append with corresponding extension</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting XM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.MID&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.mid&quot;</span>) )</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  { <span class="comment">//input-file is MIDI, no output-format/extension was given</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.swm.prg&quot;</span>); <span class="comment">//append with corresponding extension</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting MIDI &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.S00&quot;</span>) || !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>),<span class="stringliteral">&quot;.s00&quot;</span>) ) <span class="comment">//if input-format is .S00, converting it to .sid</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  { <span class="comment">//no output format/extension given</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.sid&quot;</span>); <span class="comment">//append with new extension</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Converting .S00 VICE C64-file to .sid file... ***&quot;</span>);    </div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a>,<span class="stringliteral">&quot;rb&quot;</span>); </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>,<a class="code" href="_s_w_mconvert_8c.html#aeaf69d8f8b3ebfd510b7a5f43ab0c2ee">VICE_P00_OFFSET</a>,0); <span class="comment">//go right after end of .S00 &#39;C64File&#39; header (omit header from .seq)</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keywordflow">while</span>( (Data=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)) != <a class="code" href="stdio_8h.html#a59adc4c82490d23754cd39c2fb99b0da">EOF</a> ) { <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(Data,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); } <span class="comment">//copy source to target</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** Conversion done, file &#39;%s&#39; is generated... ***\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  } </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  { <span class="comment">//input-file is swm or P00, no output-format was given</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.xm&quot;</span>); <span class="comment">//append with new extension</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting SWM &quot;</span>); <a class="code" href="_s_w_mconvert_8c.html#aec653097046ff24c296d7ea72c3ffecd">GenerateXM</a>(); <span class="comment">//preferred output-format is XM for SWM</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  }</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">//==========================================================================================</span></div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8a668e7a8a3eb98cb6a57761fc4970ee">  510</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a8a668e7a8a3eb98cb6a57761fc4970ee">ProcessSWM</a>()  <span class="comment">//check SWM type and version---------------------------------</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <span class="comment">//counts bytes in loops</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Processing SID-Wizard module.......\n&quot;</span>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">//display filesize and format</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, 0, <a class="code" href="stdio_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>); <a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>=<a class="code" href="stdio_8h.html#a046e408cf01687b77dec5ba6f93d2dd3">ftell</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, 0, <a class="code" href="stdio_8h.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Input-file size: %d bytes \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; <a class="code" href="stdio_8h.html#aef2371f3bdebc43f05c4fe8e892dde1c">fread</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>,<span class="keyword">sizeof</span>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>),<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>),<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a>; <a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>],<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Input-filetype ID: \&quot;%s\&quot; (at offset %d) \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>,<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; <span class="keywordflow">if</span> (!<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>,<a class="code" href="_s_w_mconvert_8c.html#aef87eaee7ea37b658fee72fdd151484b">SWM_ID</a>))</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a6deea02a3a06869ccdeb1fdc3adee0c0">ProcessSWMver1</a>();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; <span class="keywordflow">else</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** The module is of unknown format... ***\n&quot;</span>);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);<a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>();<a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(4);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">//------------------------------------------------------------</span></div>
<div class="line"><a name="l00537"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a6deea02a3a06869ccdeb1fdc3adee0c0">  537</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a6deea02a3a06869ccdeb1fdc3adee0c0">ProcessSWMver1</a>() <span class="comment">//import SWM version 1.0 data to arrays</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j,k;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DataIndex,Size;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> PatternData,PreceedingData;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;256;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) { <span class="keywordflow">for</span>(j=0;j&lt;256;j++) <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=0; } <span class="comment">//init patterns (no garbage if checked longer) </span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;SWM module is of version 1.0 .......\n\n&quot;</span>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; <a class="code" href="string_8h.html#a8ae2a657b19c6f41114182c286a59661">strncpy</a>(<a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>,(<span class="keywordtype">char</span>*)<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>+<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+AUTHORPOS,40);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Author-info: %s \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+SEQAMOPOS];</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a2e54a7e472577fd07d329355d567e31a">SubtuneAmount</a> = (<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>!=0) ? ((<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>-1)/3)+1 : 1 ;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a>=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+PTAMOUPOS];</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#ae598de553d4de8402a78d07303ea7c31">ChordAmount</a>=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+CHRDLEPOS];</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+INSTAMPOS];</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Number of subtunes   : %d (%d sequences) \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a2e54a7e472577fd07d329355d567e31a">SubtuneAmount</a>,<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Number of patterns   : %d \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Number of instruments: %d \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; <span class="comment">//fill arrays with SWM data read backwards</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n**** READING TUNE-DATA (backwards) ****\n---------------------------------------&quot;</span>);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; DataIndex=<a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>-1; <span class="comment">//point to end of tune-data</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; <span class="comment">//A.Subtune-funktempos</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nReading Subtune-tempos: &quot;</span>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=<a class="code" href="_s_w_mconvert_8c.html#a2e54a7e472577fd07d329355d567e31a">SubtuneAmount</a>-1; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&gt;=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>--)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; { </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][1]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%x-&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]); DataIndex--;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][0]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%x &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]); DataIndex--;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; <span class="comment">//B.skip Tempotable (no tempotable in XM)</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nReading Tempo-programs. &quot;</span>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; DataIndex -= <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+TMPLENPOS];</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; <span class="comment">//C.Chord-table</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nReading Chords: -------------\n &quot;</span>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ae598de553d4de8402a78d07303ea7c31">ChordAmount</a> != 0)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=<a class="code" href="_s_w_mconvert_8c.html#ae598de553d4de8402a78d07303ea7c31">ChordAmount</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&gt;0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>--)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%x &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   DataIndex--;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; <span class="comment">//D.Instruments</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nReading Instruments: --------\n &quot;</span>); </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a> != 0)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&gt;0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>--)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   DataIndex-=instnamelength; <span class="comment">//point to beginning of instrument-name</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   Size=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex];  <span class="comment">//before name there is the size of instrument</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][Size]=0xff; <span class="comment">//correct size-info back to delimiter</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">for</span> (j=0; j&lt;instnamelength; j++) <span class="comment">//display read instrument&#39;s name</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#ab6de30d2ae653b5aaabaee15396ac8b0">INSTNAMES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex+j+1]; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex+j+1]);</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;($%2X) &quot;</span>,Size); <span class="comment">//display instrument-size after its name in brackets</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <span class="keywordflow">for</span> (j=Size; j&gt;=0; j--) <span class="comment">//copy effective instrument-data</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]; DataIndex--; <span class="comment">//printf(&quot;%d,%2x &quot;,j,INSTRUMENTS[i][j]);</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; <span class="comment">//E.Patterns</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nReading Patterns: -----------&quot;</span>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a> != 0)</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=<a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&gt;0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>--)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]; DataIndex--; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a604e1aa9b57a04a3c0bcbe31c4ddcf37">PATTERNSIZES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=Size=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]; DataIndex--;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][Size-1]=0xff;  <span class="comment">//set delimiter as pattern-endsignal</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n Pattern%d ($%2X rows, $%2X bytes): &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],Size); <span class="comment">//display pattern-number and size</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordflow">for</span> (j=Size-2; j&gt;=0; j--)</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    PatternData=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]; PreceedingData=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex-1];</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">//check for packed-NOP and handle it</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> ( (PACKEDMIN&lt;=PatternData &amp;&amp; PatternData&lt;=PACKEDMAX) &amp;&amp; (PreceedingData==0||(PACKEDMIN&lt;=PreceedingData &amp;&amp; PreceedingData&lt;=PACKEDMAX)) )</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    { <span class="comment">//packed NOP</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;     <span class="comment">//printf(&quot;p&quot;); //sign in displayer that it&#39;s treated as packed NOP</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;     <span class="keywordflow">for</span> (k=(PatternData-PACKEDMIN+1); k&gt;0; k--) { <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=0; j--; }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=PatternData;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="comment">//printf(&quot;%02X &quot;,PatternData); </span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    DataIndex--;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  }</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a5ca70a2c9de78651a100422b35bb18d8">SWM_SEQ_TOP</a>=DataIndex;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; <span class="comment">//F.Sequences</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nReading Sequences (orderlists): ---------&quot;</span>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a> != 0)</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>-1; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&gt;=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>--)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   Size=<a class="code" href="_s_w_mconvert_8c.html#ac79ae9da647a56348bbafd411f023250">SWM_SEQ_SIZE</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex];DataIndex--;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n Seq.%2X ($%2X bytes): &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,Size);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keywordflow">for</span> (j=Size-1; j&gt;=0; j--)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex];</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%02X &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]); </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    DataIndex--;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">//==========================================================================================</span></div>
<div class="line"><a name="l00657"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aa9de0598c0a83cf144ba247501aec0f4">  657</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#aa9de0598c0a83cf144ba247501aec0f4">GenerateMIDI</a>() <span class="comment">//----- Export MIDI data from the imported SWM data ------------------</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;{</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j,k,l,<a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>,MIDItrackPointer,DeltaCount,PPQN=0x60,PALpulses=PPQN/(4*6),RowDelta;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> PrevChannel,PrevNote,PrevIns,PrevChord,WasGateOff,<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>,<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>,<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>,<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>,<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>,<a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> TrackTemp[65536]; <span class="comment">//pattern is collected here before writing to file, because size must be detected beforehands</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; <span class="keywordtype">signed</span> <span class="keywordtype">int</span> InsOctave=0;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; <span class="keywordtype">signed</span> <span class="keywordtype">char</span> Transpose[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>];</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;to MIDI format 1 (contains &#39;MTrk&#39; tracks for each SWM track). \n&quot;</span>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Output file-name will be: %s\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); <span class="comment">// !!!important &quot;wb&quot; is for binary (not to check text-control characters)</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160; </div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; <span class="comment">//assemble MIDI header chunk</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; <a class="code" href="stdio_8h.html#a73b65b19805a89f134ac0ee9a4656cc8">fputs</a>(<a class="code" href="_s_w_mconvert_8c.html#ac8f1507a5d0533800536c161817ceb64">MIDI_ID</a>,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);       <span class="comment">//put MIDI-ID to the output-file</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(0);<a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(6); <span class="comment">//MIDI header-size</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(1);                 <span class="comment">//MIDI version 1 (each track separated)</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>);     <span class="comment">//number of separate MIDI tracks</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(PPQN);             <span class="comment">//PPQN - MIDI pulses per quarter-note</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a40849854c215922d69679bda489fecd6">SetChordInstr</a>();  <span class="comment">//check for chord-instruments, set chords</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; <span class="comment">//assemble MIDI track chunks</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  RowDelta = (<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]&amp;0x80)? (<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]&amp;0x7F)*PALpulses : (<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]+(<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][1]&amp;0x7F))/2*PALpulses; <span class="comment">//init tune-tempo (no funktempo yet)</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">//printf (&quot;Delta-time between pattern-rows (default tempo): %d\n&quot;,RowDelta);</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nAssembling Track (channel) %d  \n&quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="stdio_8h.html#a73b65b19805a89f134ac0ee9a4656cc8">fputs</a>(<a class="code" href="_s_w_mconvert_8c.html#ab2b7ec9c93bf4d6d90678f689b0f9e45">MIDI_TRACK_ID</a>,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//put MIDI-Track ID &#39;MTrk&#39; into output file</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  MIDItrackPointer=DeltaCount=<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>=PrevIns=0; PrevNote=WasGateOff=GATEOFFX; PrevChord=PrevChannel=0; <span class="comment">//init</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;seqlength;j++) <span class="comment">//j counts current sequence&#39;s positions</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="keywordflow">if</span> (RowDelta==0) RowDelta=6*PALpulses; <span class="comment">//handle accidental zero-tempo, set 6 as default tempo in this case</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]&lt;0x80)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   { </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">//transfer SWM pattern to MIDI</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>=<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot; Converting Pattern $%x, &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>); </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>=0; <span class="comment">//init non-linear SWM data pointer for SWM source</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">for</span> (k=0;k&lt;maxptnlen;k++) <span class="comment">//safety loop to prevent hangs, k counts pattern-rows</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;     <span class="comment">//A. Scan a SWM row and set note/ins/fx variables</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>=<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>=0; <span class="comment">//no continuous FX is needed yet</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>][<a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>]; <span class="comment">//printf(&quot; n%2X&quot;,ActNote[k]);</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>==0xFF) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>++;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;     <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>&amp;0x7F) &amp;&amp; ((<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>&amp;0x7F)&lt;0x60) ) <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>=<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>]; <span class="comment">//new note re-selects default chord</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>&amp;0x80) <span class="comment">//check if next (instrument) column exists</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;     {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>][<a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>]; <span class="comment">//printf(&quot; i%2X&quot;,ActInsFx[k]);</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>=<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>&amp;0x7F) &amp;&amp; <a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a> &lt; INSTR_MAX ) <span class="comment">//select instrument</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;       { <a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>=<a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>; InsOctave=(<span class="keywordtype">signed</span> char)<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>][SWI_OCTAVE_POS]/12; <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>=<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>]; }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>&amp;0x70)==0x70) <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>=<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>&amp;0xF;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>++; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>&amp;0x80) <span class="comment">//check if next (FX) column exists</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      { </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>][<a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>];  <span class="comment">//printf(&quot; f%2X&quot;,ActFx[k]);</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>++;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;       <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>&amp;0xF0)==0x70) <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>=<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>&amp;0xF;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;       <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a> &lt; 0x20) <span class="comment">//check if next (BigFX-Value) column exists</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;       {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>][<a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>];  <span class="comment">//printf(&quot; v%2X&quot;,ActFxVal[k]);</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;        <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>++; </div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>==0x07) <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>=<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>&amp;0x3F;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;       }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;     }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;     <span class="comment">//B. Convert ActNote,ActIns,etc. to MIDI events, fill TrackTemp[] array</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>&amp;0x7F) <span class="comment">//if nonzero and valid note</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;     {</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>&amp;0x7F)==GATEOFFX || !(WasGateOff) )</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;       <span class="comment">//write VARIABLE LENTGH (!) MIDI delta-timing value</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;       <span class="keywordflow">if</span> (DeltaCount&gt;=0x80*0x80) { TrackTemp[MIDItrackPointer]=((DeltaCount&amp;0x1FC000)/0x4000)|0x80; MIDItrackPointer++; }  </div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keywordflow">if</span> (DeltaCount&gt;=0x80) { TrackTemp[MIDItrackPointer]=((DeltaCount&amp;0x3F80)/0x80)|0x80; MIDItrackPointer++; } </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;         TrackTemp[MIDItrackPointer]=DeltaCount&amp;0x7F; MIDItrackPointer++; DeltaCount=0; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;       TrackTemp[MIDItrackPointer]=0x80+PrevChannel; MIDItrackPointer++; <span class="comment">//write Note-Off MIDI message</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;       TrackTemp[MIDItrackPointer]=PrevNote; MIDItrackPointer++; <span class="comment">//write MIDI note</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;       TrackTemp[MIDItrackPointer]=0; MIDItrackPointer++;  <span class="comment">//write MIDI-note velocity (should be based on SWM Sustain-FX)</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;       WasGateOff=GATEOFFX;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;       <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[PrevIns]) <span class="comment">// mute chord-sounds too if Instrument uses chords</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;       {</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">for</span>(l=0;l&lt;<a class="code" href="_s_w_mconvert_8c.html#a1baadd52d31bcab127954eeeccff46bb">ChordLen</a>[PrevChord];l++)</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;        {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;         <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[ <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[PrevChord] + l ] ) <span class="comment">//base sound wasn&#39;t repeated</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;          TrackTemp[MIDItrackPointer]=0; MIDItrackPointer++;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;          TrackTemp[MIDItrackPointer]=PrevNote + (<span class="keywordtype">signed</span> char) <a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[ <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[PrevChord] + l ] ; MIDItrackPointer++;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;          TrackTemp[MIDItrackPointer]=0; MIDItrackPointer++;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         }</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;       }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">if</span> ( ( <a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>&amp;0x7F)!=GATEOFFX &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>&amp;0x7F)&lt;0x60 )</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;       <span class="comment">//write VARIABLE LENTGH (!) MIDI delta-timing value</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;       <span class="keywordflow">if</span> (DeltaCount&gt;=0x80*0x80) { TrackTemp[MIDItrackPointer]=((DeltaCount&amp;0x1FC000)/0x4000)|0x80; MIDItrackPointer++; }  </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">if</span> (DeltaCount&gt;=0x80) { TrackTemp[MIDItrackPointer]=((DeltaCount&amp;0x3F80)/0x80)|0x80; MIDItrackPointer++; } </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;         TrackTemp[MIDItrackPointer]=DeltaCount&amp;0x7F; MIDItrackPointer++; DeltaCount=0; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;       PrevChannel=<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>&amp;0x7; TrackTemp[MIDItrackPointer]=0x90+PrevChannel; MIDItrackPointer++; <span class="comment">//write Note-On MIDI message</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;       TrackTemp[MIDItrackPointer]=PrevNote=(<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>&amp;0x7F)+Transpose[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+InsOctave*12+12-1; MIDItrackPointer++; <span class="comment">//write MIDI note</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;       TrackTemp[MIDItrackPointer]=0x7F; MIDItrackPointer++;  <span class="comment">//write MIDI-note velocity (should be based on SWM Sustain-FX)</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;       WasGateOff=0; PrevIns=<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>; PrevChord=<a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;       <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>]) <span class="comment">//expand chord-sounds if Instrument uses chords</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;       {</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordflow">for</span>(l=0;l&lt;<a class="code" href="_s_w_mconvert_8c.html#a1baadd52d31bcab127954eeeccff46bb">ChordLen</a>[<a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>];l++)</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;         <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[ <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[<a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>] + l ] ) <span class="comment">//if 0, don&#39;t repeat base sound</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;          TrackTemp[MIDItrackPointer]=0; MIDItrackPointer++; <span class="comment">//timing is 0 between chords</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;          TrackTemp[MIDItrackPointer]=PrevNote + (<span class="keywordtype">signed</span> char) <a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[ <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[<a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>] + l ] ; MIDItrackPointer++;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;          TrackTemp[MIDItrackPointer]=0x5F; MIDItrackPointer++; <span class="comment">//chord-sounds should be a bit silenter</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;         }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;       }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      }</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;     }</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;     </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;     <span class="comment">//C. Handle possible pattern-effects</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>==0x13) RowDelta=(<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>&amp;0x3F)*PALpulses; <span class="comment">//track-tempo change</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;     </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;     DeltaCount+=RowDelta; <span class="comment">//time being spent during NOPs</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="comment">//handle orderlist/sequence effects</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]==0xFE || <a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]==0xFF) <span class="keywordflow">break</span>; <span class="comment">//exit j-loop if sequence ends</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]&lt;0xA0) { Transpose[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=(<span class="keywordtype">signed</span> char)(<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]-0x90); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot; Transpose %d, &quot;</span>,Transpose[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]); }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]&gt;=0xB0) RowDelta=(<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]-0xB0)*PALpulses;  <span class="comment">//changed tempo from sequence</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <a class="code" href="cubase64__4encode_waveforms_8m.html#a2077ef4250727e426b5a8123517ed352">else</a> ; <span class="comment">//other orderlist FX? e.g. tempo-setting / volume-setting</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(0);<a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(MIDItrackPointer+4); <span class="comment">//put size of track to MIDI file</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;MIDItrackPointer;j++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(TrackTemp[j],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//write entire track to MIDI file</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(RowDelta&amp;0x7F,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);<a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0xFF,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);<a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0x2F,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//put an end to the track</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\n**** Conversion is complete. **** \nMIDI file &#39;%s&#39; generated... :)&quot;</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; <span class="stringliteral">&quot;\n-----------------------------------------------------\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;}</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">//==========================================================================================</span></div>
<div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#aec653097046ff24c296d7ea72c3ffecd">  800</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#aec653097046ff24c296d7ea72c3ffecd">GenerateXM</a>()  <span class="comment">//----- Export XM data from the imported SWM data ------------------</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;{</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j,k,l,MustClearChords[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>],RowCount;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; <span class="keywordtype">char</span> strend=0,PtnMatch,NotePortaFx[3]={0,0,0}; <span class="comment">//&#39;strend&#39; is used to detect end of string</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> InsWaveForm[32], InsArpTable[32], InsPWpos, ChordPos, InsPulseWid1, InsSpeed, ActPitch[32],GateOFFprg,Transpose[3],VibDelay;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; <span class="keywordtype">float</span> SampleYscale, InsDutyCycle1;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; <span class="keywordtype">int</span> PrevSample, ActSample, SampleDiff, WaveProgLen, InsOctave, ActWaveForm, PrevWaveForm,PrevPitch,PitchPeriod[32],PrevPitchPeriod;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160; <span class="comment">//float f; //frequency</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; <span class="comment">//float t; //counts time spent in sample</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;to XM (Fasttracker v2.04) format. \n&quot;</span>);</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Output file-name will be: %s\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); <span class="comment">// !!!important &quot;wb&quot; is for binary (not to check text-control characters)</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; <span class="comment">//detect orderlist-length and loop-position, shrink orderlist effects, resilt is in XMseqTemp array. </span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; <span class="comment">//No support for different track-patternlengths and track-tempos, sequence-effects and subtunes in XM.</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>;j++)</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  Transpose[j]=0; <span class="comment">//init</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=k=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;seqlength; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a7a7241774dc160d2ddd1d65f858a0802">XMseqPos</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=k;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &lt; 0x80 ) {<a class="code" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a>[j][k]=<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; <a class="code" href="_s_w_mconvert_8c.html#a7028dff28ae8d96b3cfe3e9f4d3961ce">XMseqTranspose</a>[j][k]=Transpose[j]; k++; }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] == 0xFE) {<a class="code" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a>[j][k]=0xFF; <a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>=0;<span class="keywordflow">break</span>;} <span class="comment">//check hardcoded end-signals</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] == 0xFF) {<a class="code" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a>[j][k]=0xFF; <a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>=<a class="code" href="_s_w_mconvert_8c.html#a7a7241774dc160d2ddd1d65f858a0802">XMseqPos</a>[<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1]]; <span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &lt; 0xA0) Transpose[j]=(<span class="keywordtype">signed</span> char)(<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-0x90); <span class="comment">//transpose-FX? </span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <a class="code" href="cubase64__4encode_waveforms_8m.html#a2077ef4250727e426b5a8123517ed352">else</a> ;<span class="comment">//other orderlist-FX - not supported in XM</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; } </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>=k; <span class="comment">//effective length of XM orderlist (without seq-fx, length based on 3rd channel only)</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160; </div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; <span class="comment">//calculate orderlist itself and XM pattern-references ----------------</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Converting 3-sequence orderlist to 1-sequence XM orderlist...\n&quot;</span>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160; strend=0;<a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[0]=0; <span class="comment">//reset pattern-count and 1st pattern for XM</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>;j++) { <a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[j][0]=<a class="code" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a>[j][0]; <a class="code" href="_s_w_mconvert_8c.html#aa9cb0dc94254b49a296fc8daa58b0cc3">XMpattTranspose</a>[j][0]=<a class="code" href="_s_w_mconvert_8c.html#a7028dff28ae8d96b3cfe3e9f4d3961ce">XMseqTranspose</a>[j][0]; } <span class="comment">//zero pattern always the 1st</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>=1;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=1;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//roll through XM-orderlist</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; { </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  <span class="keywordflow">for</span> (k=0; k&lt;<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>;k++) <span class="comment">//seek for match of all 3 patterns //and check if end of orderlist arrived</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   PtnMatch=0; <span class="comment">//init match-detector (will be set to 1 if the bunch of 3 patterns has occured already)</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>; j++) <span class="comment">//check 3 channels in SWM, if new pattern-set or occured already</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] == 0xFF) strend=1; <span class="comment">//check hardcoded end-signal (created in previous loop)</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]==<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[j][k]) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a7028dff28ae8d96b3cfe3e9f4d3961ce">XMseqTranspose</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]==<a class="code" href="_s_w_mconvert_8c.html#aa9cb0dc94254b49a296fc8daa58b0cc3">XMpattTranspose</a>[j][k]) ) PtnMatch++; </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   } <span class="comment">//if counts up to 3, all channels have there&#39;s match with existing pattern-layout</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   <span class="keywordflow">if</span> (PtnMatch==<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  } </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="comment">//here we got the info in &#39;PtnMatch&#39; if new pattern is needed or reusing existing (PtnMatch==3)</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">if</span> (strend==1) <span class="keywordflow">break</span>; <span class="comment">//if we reached the end, don&#39;t register endsignal in pattern-list</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="keywordflow">if</span> (PtnMatch==<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>) <span class="comment">//if matches, just store existing pattern-number, </span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=k; <span class="comment">//reuse existing pattern-layout</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  {  <span class="comment">//if no match, create new 3-pattern bunch  //register new pattern and give reference to original SWM patterns </span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keywordflow">for</span> (j=0; j&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>; j++) { <a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[j][<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>]=<a class="code" href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; <a class="code" href="_s_w_mconvert_8c.html#aa9cb0dc94254b49a296fc8daa58b0cc3">XMpattTranspose</a>[j][<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>]=<a class="code" href="_s_w_mconvert_8c.html#a7028dff28ae8d96b3cfe3e9f4d3961ce">XMseqTranspose</a>[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; } </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>++;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nOrderlist-length: %d (restarts at position %d) , %d XM pattern(s) needed.\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>,<a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>,<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; <span class="comment">//write XM header------------------------------------------------------</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; <a class="code" href="stdio_8h.html#a73b65b19805a89f134ac0ee9a4656cc8">fputs</a>(<a class="code" href="_s_w_mconvert_8c.html#a4175e20e436f98b28da338ae5114c911">XM_ID</a>,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//write XM TYPE ID to output file</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=strend=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#aa35211353e34ab42661c1a8a9b7b05a1">XM_TITLE_SIZE</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//write XM title to output file (filename for now)</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">//if (OutputFileName[i] == 0) strend=1; //end of string reached? sign in &#39;strend&#39; </span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>( (strend==0) ? <a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] : <span class="charliteral">&#39; &#39;</span> , <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//or OutputFileName[i]?</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; }</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0x1A,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//write mysterious $1A</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=strend=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a0643471d94d14e02058a9c69b918e1a5">XM_TRACKERNAME_SIZE</a> ;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//write tracker-name to output file (filename for now)</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#afef64a928911e6a64dcec85d178efb7e">XM_TRACKERNAME</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] == 0) strend=1; <span class="comment">//end of string reached? sign in &#39;strend&#39; </span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>( (strend==0) ? <a class="code" href="_s_w_mconvert_8c.html#afef64a928911e6a64dcec85d178efb7e">XM_TRACKERNAME</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] : <span class="charliteral">&#39; &#39;</span> , <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a78cffc27914756c2dca5e953f3719c23">XM_VERSION</a>); <span class="comment">//XM-version</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;4;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a8403de6934dc4f7d7a12f701a2b4ba12">XM_HEADERSIZE</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//XM-Header size</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160; </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#ad4c44ea97054d28ea251df647bf6a657">XM_CHNAMOUNT</a>); </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a0c66234fe19213461d19aa4d77bdb8ca">XM_FREQTYPE</a>); </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>((<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]&amp;0x80)? <a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]&amp;0x7F : (<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]+(<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][1]&amp;0x7F))/2  ); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a25f94dfcc2b30a42aec1cff899cfb7c3">XM_DEFAUBPM</a>); <span class="comment">//Tempo values (no funktempo in XM)</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; <span class="comment">//write orderlist------------------------------------------------------</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a6295c7f73818553f16e576a771efa716">XM_ORDERLIST_SIZE</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>) {<a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);<a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;$%x[%2X] &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,<a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);} <span class="comment">//write conversion result to file</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//fill rest with zeroes</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160; }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; <span class="comment">//write pattern-data---------------------------------------------------</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\nConverting SWM pattern-data to XM pattern-data format...&quot;</span>);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a40849854c215922d69679bda489fecd6">SetChordInstr</a>(); <span class="comment">//register Chord-Instruments and Chords</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; <span class="comment">//-------------</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//counts patterns </span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">for</span> (j=0;j&lt;4;j++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#ad7f726652eae34beefe5443c8e57ae78">XM_PATTERN_HEADER_SIZE</a>[j],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//XM-Header size</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a912afc5e254350520950829159d2bc71">XM_PACKTYPE</a>,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//packtype is always the same</span></div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting SWM-patterns ($%X,$%X,$%X) to XM-pattern $%X:  &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[0][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[1][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[2][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>;j++) <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[j]=0; <span class="comment">//init non-linear SWM data pointer for SWM source</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  j=RowCount=0; strend=0;    <span class="comment">// &#39;j&#39; indexes XM pattern-data (SWMpattPointer[] indexes SWM pattern datas)</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">while</span> (strend==0) <span class="comment">//pattern-array filling loop with &#39;j&#39; index variable</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="comment">//A. Scan a SWM row and set note/ins/fx variables</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>;k++)</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   {</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    MustClearChords[k]=0; <span class="comment">//init</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>=<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[k][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; <span class="comment">//printf(&quot;%2X,&quot;,ActSWMptn); </span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a>][ <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[k] ]; <span class="comment">//printf(&quot; n%2X&quot;,ActNote[k]);</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]&amp;0x7F)==PORTAMFX ) NotePortaFx[k]=0xFF; <span class="comment">//register note-culumn initiated portamento</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]&amp;0x7F) &amp;&amp; ((<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]&amp;0x7f) &lt; 0x60 ) )  <span class="comment">//new note exists? valid note?</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    { </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]]; <span class="comment">//new note re-selects default chord</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a2bc90a4d171b833f8bb06de67ca17cc3">ResetFx</a>[k]!=0) <a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=0; <span class="comment">//ActFX=0 if no continuous FX is needed</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    }</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[k]++; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]&amp;0x80) <span class="comment">//check if next (instrument) column exists</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[k][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][ <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[k] ]; <span class="comment">//printf(&quot; i%2X&quot;,ActInsFx[k]);</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;     <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>=<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]&amp;0x7F) &amp;&amp; <a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a> &lt; INSTR_MAX ) </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;     {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]]) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>]==0) ) MustClearChords[k]=1; <span class="comment">//if changing from chord-instrument to non-chord-instrument</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>; <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]]; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;     }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;     <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]&amp;0x70)==0x70) <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]&amp;0xF;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[k]++; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]&amp;0x80) <span class="comment">//check if next (FX) column exists</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;     { </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[k][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][ <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[k] ];  <span class="comment">//printf(&quot; f%2X&quot;,ActFx[k]);</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]&amp;0xF0)==0x70) <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]&amp;0xF;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[k]++;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k] &lt; 0x20) <span class="comment">//check if next (BigFX-Value) column exists</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      {</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[k][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][ <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[k] ];  <span class="comment">//printf(&quot; v%2X&quot;,ActFxVal[k]);</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;       <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]==0x07) <a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]&amp;0x3F;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a>[k]++; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;     }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    }</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <span class="comment">//B. Create XM patterndata-output based on ActNote/ActIns/ActFx/ActFxVal SWM data</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>;k++)</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   {  </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k] == 0xFF) strend=1; <span class="comment">//end of pattern should stop the pattern&#39;s conversion  </span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keywordflow">if</span> (strend==0) RowCount++;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;<a class="code" href="_s_w_mconvert_8c.html#ad4c44ea97054d28ea251df647bf6a657">XM_CHNAMOUNT</a>;k++) <span class="comment">//counts tracks/channels in SWM-patterns    //handle 4th or more column for XM-pattern!!!</span></div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   {</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> (k&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>) <span class="comment">//branch where SWM channels exist</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    {</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;     <span class="comment">//CASE 0 - nothing in the column - init</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>=<a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#a5913bb175d4eae67446f2844b7e06845">XM_NOP_PACKSIGN</a>; <a class="code" href="_s_w_mconvert_8c.html#a177084439e1b59bcf04fcf8de509168f">PackSignPos</a>=j; j++; <span class="comment">//init data to &#39;NOP&#39; signal //remember where to put XM pack-sign </span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;     <span class="comment">//CASE 1 testing - is there something to be put into XM note-column </span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;     <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>=<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]&amp;0x7F)) <span class="comment">//check if note is nonzero</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;     {    </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>==GATEOFFX) { <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a>; <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>|=<a class="code" href="_s_w_mconvert_8c.html#a98d8cc2a1ce7509b02901e94e65a5c22">XM_NOTE_PACKSIGN</a>; j++;}  <span class="comment">//convert gate-off signal to be XM-compatible</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>&lt;0x60) </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      { </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>+<a class="code" href="_s_w_mconvert_8c.html#aa9cb0dc94254b49a296fc8daa58b0cc3">XMpattTranspose</a>[k][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>|=<a class="code" href="_s_w_mconvert_8c.html#a98d8cc2a1ce7509b02901e94e65a5c22">XM_NOTE_PACKSIGN</a>; j++; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;       <span class="comment">//CASE 2 put current instrument-number into XM instrument-column (only after note)</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]; <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>|=<a class="code" href="_s_w_mconvert_8c.html#a1727419bf2495fe575251ebc29afbe28">XM_INST_PACKSIGN</a>; j++;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;       <span class="keywordflow">if</span> (NotePortaFx[k]) { NotePortaFx[k]=0; <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=3; <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=DEFAULTPORTA; } <span class="comment">//if portamento note-FX was registered previously</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;     } </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;     <span class="comment">//CASE 3 testing - is there something to be put into XM volume-column? (should it be continuous?)</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;     <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]&amp;0x70) == SWM_VOLUME_SMALLFX )</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;     { <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]= (<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]&amp;0xF) * (<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]]?(4/<a class="code" href="_s_w_mconvert_8c.html#ada5f18da7af755dd8992ffee7d41dd84">CHORD_SILENCER_RATIO</a>):4) + 0x10; <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>|=<a class="code" href="_s_w_mconvert_8c.html#a5c4d04d1c7d6420bef6c6f5775f177ca">XM_VOL_PACKSIGN</a>; j++; <a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]=0; }</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;     <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]&amp;0x70) == SWM_VOLUME_SMALLFX )</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;     { <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]= (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]&amp;0xF) * (<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]]?(4/<a class="code" href="_s_w_mconvert_8c.html#ada5f18da7af755dd8992ffee7d41dd84">CHORD_SILENCER_RATIO</a>):4) + 0x10; <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>|=<a class="code" href="_s_w_mconvert_8c.html#a5c4d04d1c7d6420bef6c6f5775f177ca">XM_VOL_PACKSIGN</a>; j++; <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=0; }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;     </div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;     <span class="comment">//CASE4 testing - is there something to be put into FX and FX-Value column, convert it</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=0; <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=0; <a class="code" href="_s_w_mconvert_8c.html#a2bc90a4d171b833f8bb06de67ca17cc3">ResetFx</a>[k]=0; <span class="comment">//init</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]) <span class="comment">//check if effect exists</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;     {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]) &lt; 0x20 ) </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      { </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=<a class="code" href="_s_w_mconvert_8c.html#a8469db01dfcd321748eb386dc3913632">BigFxConvTable</a>[<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]]; <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]; <a class="code" href="_s_w_mconvert_8c.html#a2bc90a4d171b833f8bb06de67ca17cc3">ResetFx</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a39de276f1705512a971ac89ef46494d1">SWM_bigFX_NoteResets</a>[<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]];</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;       <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>&lt;=3) &amp;&amp; <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a> ) { <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=<a class="code" href="_s_w_mconvert_8c.html#a88fd95a9901ba7482a05b7ca455b92da">SWMtoXMslide</a>(<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]); <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=0; } <span class="comment">//if slide/portamento, convert slide-amount from SWM to XM </span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;       <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>==<a class="code" href="_s_w_mconvert_8c.html#a4855f56b50a0ced0d12a9159a9715e0a">XM_VIBRATO_FX</a>) &amp;&amp; <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a> ) <span class="comment">//handle vibrato differently</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        { <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=<a class="code" href="_s_w_mconvert_8c.html#a6595ec138038a344a0a2d14855bc6aaf">SWMtoXMvibAmp</a>[<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]/16] | <a class="code" href="_s_w_mconvert_8c.html#a424f1eb6ce3cfd7defa70dbd5be299e0">SWMtoXMvibFreq</a>[<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]&amp;0xF]*16; <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=0; } <span class="comment">//swap amp&amp;speed and invert speed</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;       <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]==SWM_NOTEDELAY_FX) <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=0xD0|(<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&amp;0xF); <span class="comment">//complete note-delay value for $ED XM effect</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;       <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]==SWM_DETUNE_FX) <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=0x50|(<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&amp;0xF); <span class="comment">//complete note-delay value for $E5 XM effect</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;       <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#ad176b83628ff95c278db87fbbdec6135">SWM_bigFX_Oneshot</a>[<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]] ) <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=0; <span class="comment">//if one-shot bigFx, delete bigFX value</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      { </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=<a class="code" href="_s_w_mconvert_8c.html#a9fc2f922fb82ebfb3fa9d15a0244c903">SmallFxConvTable</a>[<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]/16]; <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=(<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]&amp;0xF)*16; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;       <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>==<a class="code" href="_s_w_mconvert_8c.html#ae6fd5b68d0c72a9ae169652bbf15e781">XM_NOTE_VOL_FX</a> || <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>==<a class="code" href="_s_w_mconvert_8c.html#a85264ba3423d8123833745f7a9816314">XM_MAIN_VOL_FX</a>) <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=(<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]&amp;0xF)*4+0x10;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;       <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]/16 == SWM_VIBRATO_BIGFX )  <span class="comment">//vibrato-smallFX is continuous - not resetting ActFx[k]</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        { <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=<a class="code" href="_s_w_mconvert_8c.html#a6595ec138038a344a0a2d14855bc6aaf">SWMtoXMvibAmp</a>[<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]&amp;0xF] | 16*<a class="code" href="_s_w_mconvert_8c.html#a424f1eb6ce3cfd7defa70dbd5be299e0">SWMtoXMvibFreq</a>[<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]][SWI_INSVIBRATO_POS]&amp;0xF]; <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=SWM_VIBRATO_BIGFX; <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=0; <a class="code" href="_s_w_mconvert_8c.html#a2bc90a4d171b833f8bb06de67ca17cc3">ResetFx</a>[k]=1; }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;       <span class="keywordflow">else</span> <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=0; <span class="comment">//all other SWM small-effects are one-shot</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;     }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;     <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]&amp;0x7F)==SWM_LEGATO_INSFX ) { <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=<a class="code" href="_s_w_mconvert_8c.html#a30736904d3288886af231d465aa70537">XM_PORTAMENTO_FX</a>; <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=<a class="code" href="_s_w_mconvert_8c.html#ae2fdf0115609f5959a5551661f2d5954">XM_LEGATO_FXVALUE</a>; <a class="code" href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a>[k]=0; }</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;     <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>&amp;0x70)==VIBRATOFX ) <span class="comment">//note-culumn initiated vibrato?</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;     {<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=<a class="code" href="_s_w_mconvert_8c.html#a4855f56b50a0ced0d12a9159a9715e0a">XM_VIBRATO_FX</a>; <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>=<a class="code" href="_s_w_mconvert_8c.html#a6595ec138038a344a0a2d14855bc6aaf">SWMtoXMvibAmp</a>[<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>&amp;0xF] | 16*<a class="code" href="_s_w_mconvert_8c.html#a424f1eb6ce3cfd7defa70dbd5be299e0">SWMtoXMvibFreq</a>[<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]][SWI_INSVIBRATO_POS]&amp;0xF]; <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=SWM_VIBRATO_BIGFX; <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=0; }</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;     <span class="comment">//XM_Fx and its value calculated, write it out to the pattern-array</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>) <span class="comment">//check if effect exists</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;     { </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>; <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>|=<a class="code" href="_s_w_mconvert_8c.html#ac672d89827a1137f2b20e32c530cd95e">XM_FX_PACKSIGN</a>;j++; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>) { <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>; <a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>|=<a class="code" href="_s_w_mconvert_8c.html#a42c8edb9dd33e03a282db61c8920ed15">XM_FXVAL_PACKSIGN</a>;j++;   }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;     }</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[<a class="code" href="_s_w_mconvert_8c.html#a177084439e1b59bcf04fcf8de509168f">PackSignPos</a>]=<a class="code" href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a>; <span class="comment">//put $80..$88 XM packed-columns signal based on number of columns</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;     <span class="comment">//printf(&quot;:%x|&quot;,ColumnCount);</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">else</span> <span class="comment">//zero out rest of XM columns (where no SWM data lies) - or put chord-notes in</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;     <span class="comment">//CASE5 testing -is there chord to be put into XM tracks 4..8  //handle chords on rest of the tracks?</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;     l = k % <a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>; <span class="comment">//SWM channel to test for chord in current column</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;     ChordPos=(k/<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>)-1; <span class="comment">//index inside chord</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;     <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>[l]) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>=<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[l]&amp;0x7F) &amp;&amp; (ChordPos&lt;<a class="code" href="_s_w_mconvert_8c.html#a1baadd52d31bcab127954eeeccff46bb">ChordLen</a>[l]) )</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;     {</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a> &lt; 0x60 ) <span class="comment">//only chord-instruments and valid notes should trigger chords</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      { </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#a98d8cc2a1ce7509b02901e94e65a5c22">XM_NOTE_PACKSIGN</a>|<a class="code" href="_s_w_mconvert_8c.html#a1727419bf2495fe575251ebc29afbe28">XM_INST_PACKSIGN</a>|<a class="code" href="_s_w_mconvert_8c.html#a5c4d04d1c7d6420bef6c6f5775f177ca">XM_VOL_PACKSIGN</a>;j++;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a> + (<span class="keywordtype">signed</span> char) <a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[ <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[<a class="code" href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a>[l]] + ChordPos ] + <a class="code" href="_s_w_mconvert_8c.html#aa9cb0dc94254b49a296fc8daa58b0cc3">XMpattTranspose</a>[l][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; j++;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[l]&amp;0x7F; j++; <span class="comment">//instrument must be next to note to hear sound in XM</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=(0x40/<a class="code" href="_s_w_mconvert_8c.html#ada5f18da7af755dd8992ffee7d41dd84">CHORD_SILENCER_RATIO</a>)+0x10; j++;  <span class="comment">//volume of chord-notes must be low to prevent distortions</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a> == GATEOFFX )</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      { </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j] = <a class="code" href="_s_w_mconvert_8c.html#a98d8cc2a1ce7509b02901e94e65a5c22">XM_NOTE_PACKSIGN</a>; j++;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;       <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j] = <a class="code" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a>; j++; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <span class="keywordflow">else</span> { <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#a5913bb175d4eae67446f2844b7e06845">XM_NOP_PACKSIGN</a>; j++; }</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;     }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (MustClearChords[l]) <span class="comment">//if there was no Gate-OFF for chords but a non-chord instrument follows</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;     {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j] = <a class="code" href="_s_w_mconvert_8c.html#a98d8cc2a1ce7509b02901e94e65a5c22">XM_NOTE_PACKSIGN</a>; j++;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j] = <a class="code" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a>; j++;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;     }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;     <span class="keywordflow">else</span> { <a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[j]=<a class="code" href="_s_w_mconvert_8c.html#a5913bb175d4eae67446f2844b7e06845">XM_NOP_PACKSIGN</a>; j++; } <span class="comment">//printf(&quot; --|&quot;); //signs empty column in XM</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (strend==1) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   }</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  }</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(RowCount); <span class="comment">//write pattern-length (number of rows)</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(j-1); <span class="comment">//write packed pattern-size</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nXM-Packed Size is %d&quot;</span>,j-1);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="keywordflow">for</span> (k=0;k&lt;j-1;k++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a>[k],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; }</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160; <span class="comment">//Write Instruments---------------------------------------------------</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\nConverting SWM instruments to XI instruments...\n&quot;</span>); </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=1;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  PrevWaveForm=0x21; PrevPitch=<a class="code" href="_s_w_mconvert_8c.html#aa0b6d00d8d0c2fe0e299c7f5dfef863c">SWM_C5_NOTE_VALUE</a>; PrevPitchPeriod=<a class="code" href="_s_w_mconvert_8c.html#a1168facedca4805a2bcc17870ecf82f4">XM_C4_NOTE_PERIOD</a>; GateOFFprg=0; <span class="comment">//init</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  InsPWpos=<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_PULSETBPT_POS]; InsPulseWid1=(<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][InsPWpos]&amp;0xF)*16 + (<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][InsPWpos+1]/16) ;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <span class="keywordflow">if</span> (InsPulseWid1&lt;0x10) InsPulseWid1=0x10; <span class="keywordflow">if</span> (InsPulseWid1&gt;0xF0) InsPulseWid1=0xF0; <span class="comment">//make thin sounds audible </span></div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  InsDutyCycle1=InsPulseWid1/256.00; <span class="comment">//printf(&quot;-%d-%f &quot;,InsPulseWid1,InsDutyCycle1); </span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  InsSpeed=<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_ARP_SPEED_POS]&amp;0x3F; InsOctave=(<span class="keywordtype">signed</span> char)<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_OCTAVE_POS]/12;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a>=( (<a class="code" href="_s_w_mconvert_8c.html#aae708432d21a3fdcee92bb310bafbd12">XM_1X_PERIOD</a>*(InsSpeed+1))/<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>+FSPEEDPOS]) / <a class="code" href="_s_w_mconvert_8c.html#af0d88d1e9f5ebda92dd9595f20d3f6f3">OctavePeriod</a>[InsOctave+8]; <span class="comment">//calculate how many sample-periods are needed</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="keywordflow">for</span>(j=WaveProgLen=0;j&lt;32;j++) <span class="comment">//examine WF/Arp table</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   InsWaveForm[j]=<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][WFTABLEPOS+j*3]; InsArpTable[j]=<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][WFTABLEPOS+j*3+1]; <span class="comment">//get wavetable</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="keywordflow">if</span> ( (InsArpTable[j]&gt;0x80) &amp;&amp; (InsArpTable[j]&lt;0xE0) ) ActPitch[j]=((<span class="keywordtype">unsigned</span> int)InsArpTable[j]&amp;0x7F)-InsOctave*12; <span class="comment">//absolute-pitch handling</span></div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InsArpTable[j]==0x7F) ActPitch[j]=<a class="code" href="_s_w_mconvert_8c.html#aa0b6d00d8d0c2fe0e299c7f5dfef863c">SWM_C5_NOTE_VALUE</a>;   <span class="comment">//chord handling...done in patterndata-conversion</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (InsArpTable[j]==0x80) ActPitch[j]=PrevPitch;   <span class="comment">//NOP handling...</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="keywordflow">else</span> ActPitch[j]=<a class="code" href="_s_w_mconvert_8c.html#aa0b6d00d8d0c2fe0e299c7f5dfef863c">SWM_C5_NOTE_VALUE</a>+(<span class="keywordtype">signed</span> int)InsArpTable[j]; <span class="comment">//relative-pitch handling</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   PitchPeriod[j]=<a class="code" href="_s_w_mconvert_8c.html#a1168facedca4805a2bcc17870ecf82f4">XM_C4_NOTE_PERIOD</a>/pow(2,((ActPitch[j]-<a class="code" href="_s_w_mconvert_8c.html#aa0b6d00d8d0c2fe0e299c7f5dfef863c">SWM_C5_NOTE_VALUE</a>)/12.00)) ;  <span class="comment">//note-frequency on piano keyboard, relative to C-5 piano key (49 in tracker data)</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   PrevPitch=ActPitch[j];  <span class="comment">// printf(&quot;%2x &quot;,)</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a181cd98f6dfc42bf4944a66066a61f30">LoopLength</a> = (PrevWaveForm&amp;0x80) ? <a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a> : PrevPitchPeriod; <span class="comment">//period is one frame in case of noise-waveform</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">if</span> (PrevWaveForm&gt;=0x10) { <span class="keywordflow">if</span> ((PrevWaveForm&amp;1)==0) GateOFFprg=1; <span class="keywordflow">else</span> GateOFFprg=0; } <span class="comment">//sign for ADSR creator that no decay-time (skipped by Gate-off at end of arp-table)</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;   <span class="keywordflow">if</span> ( InsWaveForm[j] == 0xFF ) { <a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>=<a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a>*j-<a class="code" href="_s_w_mconvert_8c.html#a181cd98f6dfc42bf4944a66066a61f30">LoopLength</a>; <span class="keywordflow">break</span>; } <span class="comment">//end of wavetable?</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <span class="keywordflow">if</span> ( InsWaveForm[j] == 0xFE ) <span class="comment">//looping end of wavetable?   </span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;   {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">if</span> ( (InsArpTable[j]-WFTABLEPOS) &lt; j*3 ) <a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>=<a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a>*((InsArpTable[j]-WFTABLEPOS)/3); <span class="comment">//jumpaddress valid and points backwards? </span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (InsArpTable[j]-WFTABLEPOS) &gt;= 0x40*3 ) <a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>=<a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a>*j-<a class="code" href="_s_w_mconvert_8c.html#a181cd98f6dfc42bf4944a66066a61f30">LoopLength</a>; <span class="comment">//waveform-table jump-to-itself endsignal? equals to $FF endsignal</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>=<a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a>*j-<a class="code" href="_s_w_mconvert_8c.html#a181cd98f6dfc42bf4944a66066a61f30">LoopLength</a>;  <span class="comment">//or jumpaddress not pointing inside...</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   }</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   WaveProgLen=j+1;PrevWaveForm=InsWaveForm[j];PrevPitchPeriod=PitchPeriod[j];</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a7358d0df9d4fdb976d837517a3434cbb">SampleLength</a>=<a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a>*WaveProgLen;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;$%x:&quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordflow">for</span> (j=0;j&lt;4;j++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#ae5833f5f157c71f3217a999a176b0231">XM_INST_HEADER_SIZE</a>[j],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//+0 instrument-header-size</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#a3397d25188f3dd62490958e5a7f86464">XM_INSNAME_SIZE</a>;j++)</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  {</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <span class="keywordflow">if</span> ((j&lt;instnamelength) &amp;&amp; (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>!=0) ) <span class="comment">//+4 instrument-name (nothing for instrument 0)</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   { </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#ab6de30d2ae653b5aaabaee15396ac8b0">INSTNAMES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ab6de30d2ae653b5aaabaee15396ac8b0">INSTNAMES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]); </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   }  </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <span class="keywordflow">else</span> <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//fill rest of instrument-name with zeroes (or inst. 0)</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  }</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a83b26b762d0aa9a2b2ad653a1c38a8d9">XM_INSTYPE</a>,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);    <span class="comment">//+26 instrument-type is 0 or &#39;random&#39; according to XM documentation</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(1);                 <span class="comment">//+27 number of samples in instrument</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="comment">//generate instrument sound (settings and sample)</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a433dec215e4d466080eaa0b4afba5d40">XM_SAMPLE_HEADER_SIZE</a>); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0); <span class="comment">//+29 (dword) sample-header size</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;96;j++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//+33 96bytes Sample number assignments for all notes</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">//ADSR, envelope points</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>=0); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0); <span class="comment">//starting point of ADSR</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordflow">if</span> (GateOFFprg) { ; } <span class="comment">//no Attack-time if Waveform-table gated off</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordflow">else</span> { <a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>=<a class="code" href="_s_w_mconvert_8c.html#a69d78552435a794730f9f0f9f2d8532f">ATTACKtoXMtime</a>( (<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_AD_POS]&amp;0xF0)/16 ); } <span class="comment">//calculate Attack-time of ADSR</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>); <span class="comment">//set Attack-time of ADSR</span></div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0x3F);     <span class="comment">//level after attack of ADSR</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="keywordflow">if</span> (GateOFFprg) { <a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>++;  } <span class="comment">//no Decay-time if Waveform-table gated off</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">else</span> { <a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>+=1+<a class="code" href="_s_w_mconvert_8c.html#a7796645a162efd545d6f1bddd74681d4">DECAYtoXMtime</a>( (<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_AD_POS]&amp;0x0F), <a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_SR_POS]/16 ); } <span class="comment">//calculate Decay-time of ADSR</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>); <span class="comment">//added Decay-time of ADSR</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>((<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_SR_POS]&amp;0xF0)/4); <span class="comment">//Sustain-level of ADSR</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>+=1+<a class="code" href="_s_w_mconvert_8c.html#a50fa8ec29e4dda97353ec07676dad3f0">RELEASEtoXMtime</a>( (<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_SR_POS]&amp;0x0F), <a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_SR_POS]/16 );  <span class="comment">//calculate Release-time of ADSR</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a>);  <span class="comment">//added Release-time of ADSR </span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0);    <span class="comment">//level of end of Release phase</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;(48-4*4);j++) { <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); } <span class="comment">//   +129     48   (byte) Points for volume envelope</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">//....the rest...</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;24;j++) { <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); } <span class="comment">//   +177     48   (byte) Points for panning envelope</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(4,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +225      1   (byte) Number of volume points</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +226      1   (byte) Number of panning points</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(2,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +227      1   (byte) Volume sustain point</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +228      1   (byte) Volume loop start point</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +229      1   (byte) Volume loop end point</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +230      1   (byte) Panning sustain point</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +231      1   (byte) Panning loop start point</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +232      1   (byte) Panning loop end point</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(1+((GateOFFprg)?0:2),<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +233      1   (byte) Volume type: bit 0: On; 1: Sustain; 2: Loop</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +234      1   (byte) Panning type: bit 0: On; 1: Sustain; 2: Loop</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +235      1   (byte) Vibrato type</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  VibDelay= (<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][0]&amp;0x30) ? <a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_VIBDELAY_POS] : 0x80-(<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_VIBDELAY_POS]&amp;0x7F) ; <span class="comment">//incremental vibrato?</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(VibDelay,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);       <span class="comment">//   +236      1   (byte) Vibrato sweep</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="comment">//XMinsVibAmp[i] = (INSTRUMENTS[i][0]&amp;0x30) ? SWMtoXMvibAmp[INSTRUMENTS[i][SWI_INSVIBRATO_POS]/16] : 0xF ; //incremental vibrato is treated differently</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a6595ec138038a344a0a2d14855bc6aaf">SWMtoXMvibAmp</a>[<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_INSVIBRATO_POS]/16],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +237      1   (byte) Vibrato depth</span></div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_INSVIBRATO_POS]&amp;0xF) <a class="code" href="_s_w_mconvert_8c.html#a4e2e9fe44d37b8797ad46c85330314b7">XMinsVibFreq</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=4 * <a class="code" href="_s_w_mconvert_8c.html#a424f1eb6ce3cfd7defa70dbd5be299e0">SWMtoXMvibFreq</a>[<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_INSVIBRATO_POS]&amp;0xF];</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="_s_w_mconvert_8c.html#a4e2e9fe44d37b8797ad46c85330314b7">XMinsVibFreq</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a4e2e9fe44d37b8797ad46c85330314b7">XMinsVibFreq</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  <span class="comment">//   +238      1   (byte) Vibrato rate</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0);  <span class="comment">//   +239      2   (word) Volume fadeout</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;11;j++) <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0);  <span class="comment">//   +241      11 words Reserved</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="comment">//sample-calculations and settings</span></div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a7358d0df9d4fdb976d837517a3434cbb">SampleLength</a>%0x10000); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a7358d0df9d4fdb976d837517a3434cbb">SampleLength</a>/0x10000); <span class="comment">//?  4  (dword) Sample length</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>%0x10000); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>/0x10000);    <span class="comment">//     +4      4  (dword) Sample loop start</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>((<a class="code" href="_s_w_mconvert_8c.html#a7358d0df9d4fdb976d837517a3434cbb">SampleLength</a>-<a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>)%0x10000); <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>((<a class="code" href="_s_w_mconvert_8c.html#a7358d0df9d4fdb976d837517a3434cbb">SampleLength</a>-<a class="code" href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a>)/0x10000); <span class="comment">//     +8      4  (dword) Sample loop length</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>( (<a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>])?(0x40/<a class="code" href="_s_w_mconvert_8c.html#ada5f18da7af755dd8992ffee7d41dd84">CHORD_SILENCER_RATIO</a>):0x40 ,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//    +12      1   (byte) Volume - more silent for chord-instruments</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//    +13      1   (byte) Finetune (signed byte -16..+15)</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(1,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//    +14      1   (byte) Type: Bit 0-1: 0 = No loop, 1 = Forward loop, 2 = Ping-pong loop;  4: 16-bit sampledata</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0x80,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//    +15      1   (byte) Panning (0-255)</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_OCTAVE_POS]+12,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//    +16      1   (byte) Relative note number (signed byte)</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//    +17      1   (byte) Reserved</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;22;j++)    <span class="comment">//    +18     22   (char) Sample name</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  { </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="keywordflow">if</span> (j&gt;=WaveProgLen) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<span class="charliteral">&#39;.&#39;</span>,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keywordflow">else</span> <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#ac2ca7efd41d2925e2bd8db3c74ac854a">WFchar</a>[InsWaveForm[j]/16],<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  }</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="comment">//WaveForm Samples </span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  PrevSample=-128; PrevWaveForm=0x21; <span class="comment">//init</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keywordflow">for</span> (j=0;j&lt;WaveProgLen;j++)</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  {</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <span class="keywordflow">if</span> ( (ActWaveForm=InsWaveForm[j]) &lt;= 0x0F ) ActWaveForm=PrevWaveForm; <span class="comment">//repeat previous waveform if 0..F</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <span class="keywordflow">if</span> (PitchPeriod[j]==0) PitchPeriod[j]=1;  <span class="comment">//safety:prevent floating point exception //printf(&quot; %d &quot;,PitchPeriod[j]);</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;<a class="code" href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a>;k++)</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   {</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    l= k % PitchPeriod[j]; SampleYscale=(256.00/PitchPeriod[j]);</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="keywordflow">if</span> (ActWaveForm&amp;0x10) ActSample= (l&lt;=PitchPeriod[j]/2) ? l*SampleYscale+0x40 : (0x100-l*SampleYscale)+0x40; <span class="comment">//triangle-waveform</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">if</span> (ActWaveForm&amp;0x20) ActSample= l*SampleYscale/2+0x40; <span class="comment">//sawtooth-waveform</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">if</span> (ActWaveForm&amp;0x40) ActSample= (l&gt;=(PitchPeriod[j]*InsDutyCycle1)) ? 0x40 : 0xC0; <span class="comment">//pulse-waveform (with adjustable pulsewidth)</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="keywordflow">if</span> (ActWaveForm&amp;0x80) ActSample=(<a class="code" href="stdlib_8h.html#ae23144bcbb8e3742b00eb687c36654d1">rand</a>()%0x80)+0x40; <span class="comment">//noise-waveform  </span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    SampleDiff=ActSample-PrevSample; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(SampleDiff,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); PrevSample=ActSample; PrevWaveForm=ActWaveForm;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   }</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;  &quot;</span>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; }</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\n**** Conversion is complete. **** \nXM file &#39;%s&#39; generated... :)&quot;</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; <span class="stringliteral">&quot;\n-----------------------------------------------------\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;}</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment">//==========================================================================================</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a0bda1eaf737f1a78d5b861ec41b186b9"> 1176</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a0bda1eaf737f1a78d5b861ec41b186b9">ProcessXM</a>()  <span class="comment">//----- Import XM data to arrays ------------------------------------</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;{</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> InputXMver;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160; </div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Processing Fasttracker XM module...\n&quot;</span>);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160; </div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; <span class="comment">//display filesize and format</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>, 0); <a class="code" href="stdio_8h.html#ab80c528a844501e0400dee07e44d5cfd">fgets</a>(<a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>, <a class="code" href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a>, <a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#aaa5828f4c5641f663a53b171eca36033">XM_VERSION_OFFSET</a>, 0); InputXMver=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, 0, <a class="code" href="stdio_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>); <a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>=<a class="code" href="stdio_8h.html#a046e408cf01687b77dec5ba6f93d2dd3">ftell</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, 0, <a class="code" href="stdio_8h.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>);</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Input-file size: %d bytes \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Input-filetype ID: \&quot;%s\&quot; (at offset %d) , version: \&quot;\%X\&quot; \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>,<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>,InputXMver);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160; <span class="keywordflow">if</span> (!<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>,<a class="code" href="_s_w_mconvert_8c.html#a4175e20e436f98b28da338ae5114c911">XM_ID</a>))</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160; { <span class="comment">//check module-version, if doesn&#39;t match, notify but try to do...</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;  <span class="keywordflow">if</span> (InputXMver!=<a class="code" href="_s_w_mconvert_8c.html#a78cffc27914756c2dca5e953f3719c23">XM_VERSION</a>) <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** The module version doesn&#39;t match with \&quot;%X\&quot;, but trying... ***\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a78cffc27914756c2dca5e953f3719c23">XM_VERSION</a>);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a647c9e53ce7e67aae4b1d2bacdcbb1a6">ProcessXM204</a>(); </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; }</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; <span class="keywordflow">else</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; {</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** The module is of unknown format... ***\n&quot;</span>);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);<a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>();<a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(4);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; }</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;}</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160; </div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">//------------------------------------------------------------------</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a647c9e53ce7e67aae4b1d2bacdcbb1a6"> 1202</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a647c9e53ce7e67aae4b1d2bacdcbb1a6">ProcessXM204</a>() <span class="comment">//parse &amp; import XM version 2.04 data to arrays</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;{</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j,k,l,db,PackSign, XMheaderSize=0x0104, SampleAmount, titlend=0;  </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;40;<a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0x20,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++); <span class="comment">//init </span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PtnMatch, InsHeaderSize=0; <span class="comment">//PtnMatch is used to detect if new pattern matches an existing one</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> SampleIndex,SampleSize; <span class="comment">//,InstOffset; </span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> XMinsEnvVol[12],XMinsEnvTime[12];</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMinsEnv; </div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; <span class="comment">//process XM header----------------------------------------------</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nProcessing XM-header...\n&quot;</span>);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#ab09efdeaf27be43a19d884280baf1f25">XM_TITLE_OFFSET</a>, 0); <a class="code" href="stdio_8h.html#ab80c528a844501e0400dee07e44d5cfd">fgets</a>(<a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>,<a class="code" href="_s_w_mconvert_8c.html#aa35211353e34ab42661c1a8a9b7b05a1">XM_TITLE_SIZE</a>,<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nXM title: \&quot;%s\&quot;&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;40;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; {</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]==0) titlend++;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="keywordflow">if</span> (titlend&gt;0) <a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0x20; <span class="comment">//SPACE-character</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; }</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a72df2e6479658f76c0401c0e24de7b99">XM_HEADERSIZE_OFFSET</a>, 0); XMheaderSize=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nXM Header-size: $%X&quot;</span>,XMheaderSize);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#ab36e44357aaae329cf284dd55502238b">XM_SONGLENGTH_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nXM Orderlist length: $%X&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>);</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#aca1d7ace35bd89dd40c860b3d4b88ffe">XM_RESTARTPOS_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot; (looping at $%2X)&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a327b44943d537204b35d9730f0714e99">XM_CHNAMOUNT_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#ad4c44ea97054d28ea251df647bf6a657">XM_CHNAMOUNT</a>=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nNumber of channels: %d&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ad4c44ea97054d28ea251df647bf6a657">XM_CHNAMOUNT</a>);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a85fa066baaa13af3d17346ea91d5ea7d">XM_PTNAMOUNT_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;, Number of XM patterns: $%X&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a78a0ae1b38495cfbf4b0a3e2a9351524">XM_INSAMOUNT_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#a08d399b22d86a0ff5a9350140eaa2934">XMinstAmount</a>=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nXM Instruments: $%X&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a08d399b22d86a0ff5a9350140eaa2934">XMinstAmount</a>);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>&gt;=INSTR_MAX) { <a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>=INSTR_MAX-1; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot; --&gt; reduced to $%X&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>); } <span class="comment">//to be on the safe side</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#aa66341f074527c0dafbfb6fe472a3068">XM_DEFTEMPO_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>()|0x80; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nDefault tune-tempo: $%X \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]&amp;0x7F);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; <span class="comment">//process XM orderlist----------------------------------------</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nProcessing XM pattern-orderlist... \n&quot;</span>);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a50683681223cb2978b1a021cbab8adac">XM_ORDERLIST_OFFSET</a>, 0); <span class="comment">//position to beginning of Orderlist</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) { <a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;$%X &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]); }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; <span class="comment">//process XM patterns-----------------------------------------------</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nProcessing XM patterndata... \n&quot;</span>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[0]=<a class="code" href="_s_w_mconvert_8c.html#a72df2e6479658f76c0401c0e24de7b99">XM_HEADERSIZE_OFFSET</a>+XMheaderSize; <a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>=0; <span class="comment">//init</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//i counts patterns</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; {</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>], 0); <a class="code" href="_s_w_mconvert_8c.html#ad7f726652eae34beefe5443c8e57ae78">XM_PATTERN_HEADER_SIZE</a>[0]=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <span class="comment">//how long is pattern-header?</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+<a class="code" href="_s_w_mconvert_8c.html#a1d5564f744c81832b17112728fc399ad">XM_PTNROWS_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;  <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+<a class="code" href="_s_w_mconvert_8c.html#a81a1a8307bdfee429ddfd4bc39e00568">XM_PTNSIZE_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#a10cc467511ea79df2236a0323a3661d4">XMpatternSize</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1]=<a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] + <a class="code" href="_s_w_mconvert_8c.html#a10cc467511ea79df2236a0323a3661d4">XMpatternSize</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] + <a class="code" href="_s_w_mconvert_8c.html#ad7f726652eae34beefe5443c8e57ae78">XM_PATTERN_HEADER_SIZE</a>[0]; <span class="comment">//prepare place of upcoming pattern</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+<a class="code" href="_s_w_mconvert_8c.html#ad7f726652eae34beefe5443c8e57ae78">XM_PATTERN_HEADER_SIZE</a>[0], 0); <span class="comment">//go to beginning of effective pattern-data</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Pattern $%x (length:$%2x offset:$%4x, size:$%x):  &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,<a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a10cc467511ea79df2236a0323a3661d4">XMpatternSize</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="comment">//unpack one XM pattern, convert selected 3 tracks to 3 vertical-oriented unpacked XM patterns</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];j++) <span class="comment">// j counts pattern-rows</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">XMpattPos</a>=j*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>;</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;<a class="code" href="_s_w_mconvert_8c.html#ad4c44ea97054d28ea251df647bf6a657">XM_CHNAMOUNT</a>;k++) <span class="comment">//k counts pattern-channels</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   {</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    db=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//read pack-signal</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="keywordflow">if</span> (!(db&amp;0x80)) </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]=db; <a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="_s_w_mconvert_8c.html#a00eb068b5fb87045ee96f4d5f9c51302">ActVol</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//no XM packing, all columns filled</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    { <span class="comment">//depack XM data of 1 channel of 1 row</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;     PackSign=db;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a00eb068b5fb87045ee96f4d5f9c51302">ActVol</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=0; <span class="comment">//init to 0</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;     <span class="keywordflow">if</span> ( PackSign &amp; (<a class="code" href="_s_w_mconvert_8c.html#a98d8cc2a1ce7509b02901e94e65a5c22">XM_NOTE_PACKSIGN</a>&amp;0x7F) ) <a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;     <span class="keywordflow">if</span> ( PackSign &amp; (<a class="code" href="_s_w_mconvert_8c.html#a1727419bf2495fe575251ebc29afbe28">XM_INST_PACKSIGN</a>&amp;0x7F) ) <a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;     <span class="keywordflow">if</span> ( PackSign &amp; (<a class="code" href="_s_w_mconvert_8c.html#a5c4d04d1c7d6420bef6c6f5775f177ca">XM_VOL_PACKSIGN</a>&amp;0x7F) ) <a class="code" href="_s_w_mconvert_8c.html#a00eb068b5fb87045ee96f4d5f9c51302">ActVol</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;     <span class="keywordflow">if</span> ( PackSign &amp; (<a class="code" href="_s_w_mconvert_8c.html#ac672d89827a1137f2b20e32c530cd95e">XM_FX_PACKSIGN</a>&amp;0x7F) ) <a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;     <span class="keywordflow">if</span> ( PackSign &amp; (<a class="code" href="_s_w_mconvert_8c.html#a42c8edb9dd33e03a282db61c8920ed15">XM_FXVAL_PACKSIGN</a>&amp;0x7F) ) <a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    }</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="comment">//convert horizontal XM row to vertical XM format, write result-patterns to temporary array</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">if</span> (k&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>) <span class="comment">//should be selectable which tracks of the XM to convert.</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    { </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a>[k][<a class="code" href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">XMpattPos</a>+0]=<a class="code" href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a>[k]; <span class="comment">//printf(&quot;%2x-&quot;,ActNote[k]);</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a>[k][<a class="code" href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">XMpattPos</a>+1]=<a class="code" href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a>[k]; <span class="comment">//printf(&quot;%2x-&quot;,ActIns[k]);</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a>[k][<a class="code" href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">XMpattPos</a>+2]=<a class="code" href="_s_w_mconvert_8c.html#a00eb068b5fb87045ee96f4d5f9c51302">ActVol</a>[k]; <span class="comment">//printf(&quot;%2x-&quot;,ActVol[k]);</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a>[k][<a class="code" href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">XMpattPos</a>+3]=<a class="code" href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a>[k]; <span class="comment">//printf(&quot;%2x-&quot;,ActFx[k]);</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a>[k][<a class="code" href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">XMpattPos</a>+4]=<a class="code" href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a>[k]; <span class="comment">//printf(&quot;%2x  &quot;,ActFxVal[k]);</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    }</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;   }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  }</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  <span class="comment">//compare the resulted 3 vertical XM patterns to existing ones, register if not found, reuse existing if found</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="comment">//(might be good idea to look for transposed patterns here or later, were relative note-intervals and effects match)</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="keywordflow">for</span> (k=0;k&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>;k++)</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  {</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   <span class="comment">//compare the 3 vertical XM patterns to all already registered patterns, if the same, drop it</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   PtnMatch=0; <span class="comment">//init</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   <span class="keywordflow">for</span> (l=0;l&lt;<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>;l++) <span class="comment">//check registered XM patterns from beginning</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   {</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[l]!=<a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]) <span class="keywordflow">continue</span>; <span class="comment">//if mismatch in pattern-sizes, don&#39;t even try to compare their contents</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">for</span> (j=0;j&lt;(<a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>);j++) <span class="comment">//compare bytes one-by-one to pattern &#39;l&#39;</span></div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;     <span class="comment">//printf(&quot;%d,%d &quot;,XMpattTemp[k][j],XMPATTERNS[l][j]);</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a>[k][j]!=<a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[l][j]) {PtnMatch=0;<span class="keywordflow">break</span>;} <span class="comment">//mismatch found</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;     <span class="keywordflow">else</span> PtnMatch++; <span class="comment">//count matching bytes</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    }</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> (PtnMatch) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   <span class="comment">//printf(&quot;%d.%d &quot;,l,PtnMatch);</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   <span class="comment">//register or reuse patterns based on PtnMatch</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <span class="keywordflow">if</span> (PtnMatch) <span class="comment">//if match is found, reusing pattern &#39;l&#39;</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;   {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;$%2x  &quot;</span>,l);</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[k][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=l;</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   }</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <span class="keywordflow">else</span> <span class="comment">//no match found, registering new pattern</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[k][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=++<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>]=(<a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]&lt;=maxptnlen)? <a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] : maxptnlen ; <span class="comment">//register SWM-patternlength in time</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>;j++) <span class="comment">//copy the registered temporary vertical XM pattern to pattern-registry </span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;    { </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>][j]=<a class="code" href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a>[k][j]; <span class="comment">//printf(&quot;%2X,&quot;,XMPATTERNS[SWMpatternCount][j]);</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    }</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;$%2x  &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[k][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   }</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  }</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; }</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; <span class="comment">//process XM instruments</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>=0; <span class="comment">//init - will count instruments that are not empty</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a08d399b22d86a0ff5a9350140eaa2934">XMinstAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nInstr. $%X: &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>); <span class="comment">//display number of instrument</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  InsHeaderSize=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();  <span class="comment">//offset 0 - how long is instrument-header?</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;  <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#a3397d25188f3dd62490958e5a7f86464">XM_INSNAME_SIZE</a>;j++) { <a class="code" href="_s_w_mconvert_8c.html#a51b43419a8b2d074202d6022ffc396c4">XMinstName</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a51b43419a8b2d074202d6022ffc396c4">XMinstName</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]); } <span class="comment">//offset 4 - ins.name</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//offset $1A (26) - inst.type (dummy: 0)</span></div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  SampleAmount=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();  <span class="comment">//offset $1B (27) </span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <span class="keywordflow">if</span> (InsHeaderSize==0x21) { <span class="keywordflow">for</span> (j=0;j&lt;(InsHeaderSize-0x1D);j++) <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); } <span class="comment">//till end of header - needed for some modules</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="keywordflow">if</span> (SampleAmount!=0) <span class="comment">// - from offset $1D (29) sample is coming (if exists)</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>=<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1; <span class="comment">//register last used (non-empty) instrument&#39;s number</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();  <span class="comment">//how long is sample-header?  ($28) //</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;96;k++) <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//sample assignments</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;12;k++) { XMinsEnvTime[k]=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); XMinsEnvVol[k]=<a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); }<span class="comment">//volume envelope points</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;24;k++) <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <span class="comment">//panning envelope points</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=XMinsEnvTime[<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)-1];  <span class="comment">//   +225      1   (byte) Number of volume points</span></div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +226      1   (byte) Number of panning points</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +227      1   (byte) Volume sustain point</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-=XMinsEnvTime[<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]; <span class="comment">//search &#39;release&#39;</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +228      1   (byte) Volume loop start point</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +229      1   (byte) Volume loop end point</span></div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +230      1   (byte) Panning sustain point</span></div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +231      1   (byte) Panning loop start point</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +232      1   (byte) Panning loop end point</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   XMinsEnv=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +233      1   (byte) Volume type: bit 0: On; 1: Sustain; 2: Loop</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <span class="keywordflow">if</span> ((XMinsEnv&amp;0x1)==0) <span class="comment">//if envelope is used at all...</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   { <span class="comment">//no envelope, make standard 00F0 ADSR</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a97ab0f6a3b5d22c449b6b1cdbe922bbb">XMinsAttack</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; <a class="code" href="_s_w_mconvert_8c.html#ac9db4d2a92c8d00f99e2bbb919e6b2f5">XMinsDecay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; <a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0x3F; <a class="code" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   }</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (XMinsEnv&amp;0<a class="code" href="cubase64__1analyze_pitch_8m.html#aab2463cd078f7c5368f6eb80f5a549b8">x2</a>) <span class="comment">//if sustain is on</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   {</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;    <span class="comment">//maybe: if ( XMinsEnvVol[XMinsSustain[i]] &gt; XMinsEnvVol[0] ) </span></div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">if</span> ( XMinsEnvTime[1]) { <a class="code" href="_s_w_mconvert_8c.html#a97ab0f6a3b5d22c449b6b1cdbe922bbb">XMinsAttack</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=XMinsEnvTime[<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]; <a class="code" href="_s_w_mconvert_8c.html#ac9db4d2a92c8d00f99e2bbb919e6b2f5">XMinsDecay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">else</span> { <a class="code" href="_s_w_mconvert_8c.html#ac9db4d2a92c8d00f99e2bbb919e6b2f5">XMinsDecay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=XMinsEnvTime[<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]; <a class="code" href="_s_w_mconvert_8c.html#a97ab0f6a3b5d22c449b6b1cdbe922bbb">XMinsAttack</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; }</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=XMinsEnvVol[<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]]; <span class="comment">//turn sustain-index to sustain-value</span></div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]&gt;=0x40) <a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0x3F; <span class="comment">//compensate overload</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   }</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordflow">else</span> <span class="comment">//if no sustain point given, create decaying instrument</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   { </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a97ab0f6a3b5d22c449b6b1cdbe922bbb">XMinsAttack</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; <a class="code" href="_s_w_mconvert_8c.html#ac9db4d2a92c8d00f99e2bbb919e6b2f5">XMinsDecay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; <a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; <a class="code" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   } </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <span class="comment">//printf(&quot;  (A:$%x, D:$%x,S:$%x , R:$%x)  &quot;,XMinsAttack[i],XMinsDecay[i],XMinsSustain[i],XMinsRelease[i]);</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +234      1   (byte) Panning type: bit 0: On; 1: Sustain; 2: Loop</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +235      1   (byte) Vibrato type</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#adb5cb6efa4cf51d6320d717fb248aa14">XMinsVibDelay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +236      1   (byte) Vibrato sweep</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#ab0162de92e566fd007cceb5009bd4df3">XMinsVibAmp</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +237      1   (byte) Vibrato depth</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a4e2e9fe44d37b8797ad46c85330314b7">XMinsVibFreq</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);  <span class="comment">//   +238      1   (byte) Vibrato rate</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   <span class="comment">//if (XMinsVibFreq[i]&gt;=0x80) XMinsVibFreq[i]=0xFF-XMinsVibFreq[i]; //compensate XM vibrato-charactiristics</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();  <span class="comment">//   +239      2   (word) Volume fadeout</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keywordflow">for</span>(j=0;j&lt;11;j++) <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();  <span class="comment">//   +241      11 words Reserved</span></div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <span class="comment">//rolling through sample(s)</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   SampleSize=0; <span class="comment">//init. will be accumulated by each sample</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;SampleAmount;k++)</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   {</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    SampleSize += ( <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(<a class="code" href="_s_w_mconvert_8c.html#a7358d0df9d4fdb976d837517a3434cbb">SampleLength</a>) + <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(0)*0x10000 ); <span class="comment">//?  4  (dword) Sample length</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;      (Sample $%X - $%x bytes)&quot;</span>,k,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)SampleSize);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>();    <span class="comment">//     +4      4  (dword) Sample loop start</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>(); <span class="comment">//     +8      4  (dword) Sample loop length</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//    +12      1   (byte) Volume - more silent for chord-instruments</span></div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//    +13      1   (byte) Finetune (signed byte -16..+15)</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//    +14      1   (byte) Type: Bit 0-1: 0 = No loop, 1 = Forward loop, 2 = Ping-pong loop;  4: 16-bit sampledata</span></div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//    +15      1   (byte) Panning (0-255)</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a3a780c23caed8c11c27d32938b966209">XMinsTransp</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//    +16      1   (byte) Relative note number (signed byte)</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//    +17      1   (byte) Reserved</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;    <span class="keywordflow">for</span>(j=0;j&lt;22;j++) <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);   <span class="comment">//    +18     22   (char) Sample name</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   }</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <span class="keywordflow">for</span>(SampleIndex=0;SampleIndex&lt;SampleSize;SampleIndex++) { <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); } <span class="comment">//roll through each sample&#39;s audio-data</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  }</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160; }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;}</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="comment">//==========================================================================================</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a1e95cfaa4d03cafbe95c0215cf55eb9c"> 1394</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a1e95cfaa4d03cafbe95c0215cf55eb9c">ProcessMIDI</a>() <span class="comment">//check MIDI type and version--------------------------------</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PrevVelo,OKtrkAmount,MinimumDelta[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>],MaximumDelta[<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>],<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j,k,l,BarPulses,NoteResolution; <span class="comment">//counts bytes in loops</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> RowPulses, SourceIndex; </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> CurrentNote, CurrentVelo, FirstRow, PtnMatch, PattTemp[256*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]; </div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160; <span class="keywordtype">int</span> CurrentDelta; <span class="comment">//,DeltaDiff;</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160; <span class="keywordtype">float</span> BarQuarters;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Processing MIDI file...\n&quot;</span>);</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;40;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0x20; <span class="comment">//init for SWM</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160; </div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; <span class="comment">//display filesize and format</span></div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>, 0); <a class="code" href="stdio_8h.html#ab80c528a844501e0400dee07e44d5cfd">fgets</a>(<a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>, <a class="code" href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a>+1, <a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#af9b3b07a58c48af946c349d974c266c0">MIDI_VERSION_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a>=<a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>();</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, 0, <a class="code" href="stdio_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>); <a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>=<a class="code" href="stdio_8h.html#a046e408cf01687b77dec5ba6f93d2dd3">ftell</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, 0, <a class="code" href="stdio_8h.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>);</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Input-file size: %d bytes \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a>);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Input-filetype ID: \&quot;%s\&quot; (at offset %d) , version: \&quot;\%X\&quot; \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>,<a class="code" href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a>,<a class="code" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; <span class="comment">//init MIDI track/channel pointers before conversion</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160; </div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; <span class="keywordflow">if</span> (!<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a>,<a class="code" href="_s_w_mconvert_8c.html#ac8f1507a5d0533800536c161817ceb64">MIDI_ID</a>))</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; { <span class="comment">//check module-version, if doesn&#39;t match, notify but try to do...  </span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a6f0448fecb5cb596998caee0339eb066">MIDI_DIVISION_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>=<a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Delta-timing resolution (units per quarter-note - PPQN): $%x &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a>==2) {<a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nProcessing multi-song MIDI&#39;s 1st track...&quot;</span>);<a class="code" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a>=0;} <span class="comment">//only 1st tune processed of version 2</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a>==0)</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  { <span class="comment">//single-track MIDI</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nProcessing single-track MIDI...&quot;</span>);</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, (<a class="code" href="_s_w_mconvert_8c.html#af6c831f2601e8659ac5d9c71e457e208">MIDI_TRACKS_OFFSET</a>+4), 0); <a class="code" href="_s_w_mconvert_8c.html#a866257b75936a2dfe8c3fc00021442fd">MIDI_TRACK_SIZE</a>[0]=256*<a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>()+<a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nSize of the track (containing all channels): $%2X bytes\n&quot;</span>,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_s_w_mconvert_8c.html#a866257b75936a2dfe8c3fc00021442fd">MIDI_TRACK_SIZE</a>[0]);</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a205e98defd45247b25a9a12f08d0d8ac">ProcessMIDItrack</a>(); <span class="comment">//fill MIDI delta/note/velocity arrays of channels/tracks</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  }</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a>==1)</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  { <span class="comment">//multi-track MIDI</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nProcessing multi-track MIDI...&quot;</span>);</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, <a class="code" href="_s_w_mconvert_8c.html#a5d5b81208e0f49109a96aed961dc82ab">MIDI_TRACK_AMOUNT_OFFSET</a>, 0); <a class="code" href="_s_w_mconvert_8c.html#aa40617d652aaf2a55939a5143b42ce22">MIDI_TRACK_AMOUNT</a>=<a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>(); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nAmount of MIDI-tracks (channels): $%2X \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#aa40617d652aaf2a55939a5143b42ce22">MIDI_TRACK_AMOUNT</a>);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a453648b4e5c9a92a9166db8107a9b549">MIDI_TRACK_OFFSET</a>[0]=<a class="code" href="_s_w_mconvert_8c.html#af6c831f2601e8659ac5d9c71e457e208">MIDI_TRACKS_OFFSET</a>; <span class="comment">//init</span></div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#aa40617d652aaf2a55939a5143b42ce22">MIDI_TRACK_AMOUNT</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//positioning to beginning of tracks</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   {</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, (<a class="code" href="_s_w_mconvert_8c.html#a453648b4e5c9a92a9166db8107a9b549">MIDI_TRACK_OFFSET</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+4), 0); <a class="code" href="_s_w_mconvert_8c.html#a866257b75936a2dfe8c3fc00021442fd">MIDI_TRACK_SIZE</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=256*<a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>()+<a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>(); </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;    <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nProcessing Track $%x: offset $%x , size $%x&quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_s_w_mconvert_8c.html#a453648b4e5c9a92a9166db8107a9b549">MIDI_TRACK_OFFSET</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_s_w_mconvert_8c.html#a866257b75936a2dfe8c3fc00021442fd">MIDI_TRACK_SIZE</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a2379b5bc521862f7b0ec0200f7a7a7e3">CurrentTrack</a>=<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>; <a class="code" href="_s_w_mconvert_8c.html#a205e98defd45247b25a9a12f08d0d8ac">ProcessMIDItrack</a>(); <span class="comment">//fill MIDI delta/note/velocity arrays of channels/tracks</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a453648b4e5c9a92a9166db8107a9b549">MIDI_TRACK_OFFSET</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1]=<a class="code" href="_s_w_mconvert_8c.html#a453648b4e5c9a92a9166db8107a9b549">MIDI_TRACK_OFFSET</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+4+<a class="code" href="_s_w_mconvert_8c.html#a866257b75936a2dfe8c3fc00021442fd">MIDI_TRACK_SIZE</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+4;</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   }</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  }</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; <span class="keywordflow">else</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160; {</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n*** The MIDI is of unknown format... ***\n&quot;</span>);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);<a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>();<a class="code" href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a>(4);</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160; }</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; <span class="comment">//tune processed, select only tracks which have note events</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nTune processing finished...&quot;</span>);</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=OKtrkAmount=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; { </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>])</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  {</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nChannel %d: %d note events&quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1,<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]); <span class="comment">//for(j=0;j&lt;MIDItrkIndex[i];j++) printf(&quot;%x*%x &quot;,MIDIdeltas[i][j],MIDInotes[i][j]);</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[OKtrkAmount]=<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;OKtrkAmount++; <span class="comment">//register non-empty tracks</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;  }</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; <span class="comment">//note ON/OFF and velocity are in channels at array MIDIdeltas[], MIDInotes[], MIDIvelos[]</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; <span class="comment">//calculate minimal and maximal delta values - might be used to automatically determine needed note-resolution</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>)&amp;&amp;(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;OKtrkAmount);<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//only care about 1st 3 channels wchich contain notes</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; {</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  MinimumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=MaximumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>; PrevVelo=0; <span class="comment">//init</span></div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]];j++) </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  { <span class="comment">//examine smallest delta (except 0 of course) to guess needed resolution</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][j]) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][j]&lt;MinimumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]) &amp;&amp; (PrevVelo)) MinimumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][j];</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][j]&gt;MaximumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]) MaximumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][j];</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   PrevVelo=<a class="code" href="_s_w_mconvert_8c.html#adb50d199b0acc7cab403bb6ff8a0e7e3">MIDIvelos</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][j];</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nTrack $%x Min.delta: $%x (1/%d quarternote), Max.delta: $%x (%.1f quarternotes)&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+1,MinimumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>/MinimumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],MaximumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],(<span class="keywordtype">float</span>)MaximumDelta[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]/(<span class="keywordtype">float</span>)<a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; }</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; <span class="comment">//determine pattern-lengths for SWM</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160; BarQuarters=(float) (4.00/pow(2,(<span class="keywordtype">float</span>)<a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[1]))*<a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[0];  <span class="comment">//calculate how many quarter notes and deltas are in a bar (can be smaller than 1 if e.g. unusual 2/8 = 1/4 time signature)</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; BarPulses = (<span class="keywordtype">unsigned</span> int)(BarQuarters*<a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>); </div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; NoteResolution=16; <span class="comment">//16th notes resolution</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nThere are %.2f quarter notes (%.2f*$%x = $%x pulses) in a Bar.&quot;</span>,BarQuarters,BarQuarters,<a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>,BarPulses);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;PATT_MAX;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) { <a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=(<span class="keywordtype">unsigned</span> int)(BarQuarters*NoteResolution); } </div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; RowPulses=<a class="code" href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a>*(4.00/NoteResolution);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nOne pattern-row takes $%x pulses&quot;</span>,RowPulses);</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nPattern-lengths will be $%x rows with %dth-note resolution = $%x pulses&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[0],NoteResolution,<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[0]*RowPulses); </div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; <span class="comment">//convert BPM to C64 tempo info - BPM is quarter-notes/minute in 4/4, but e.g. eighth-notes/minute for 6/8 or 8/8, etc. </span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; <span class="comment">//unsigned int BeatTime=(unsigned int)( MIDItempo*(float)(4.00/pow(2,(float)TimeSignature[1])) ); //microseconds for a beat</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a407575f0c8057573a7b2b3dc326a431c">TuneBPM</a>=(60000000/<a class="code" href="_s_w_mconvert_8c.html#a000ec550efb8715efa0fd920ca2b51d8">MIDItempo</a>)*(<span class="keywordtype">float</span>)(pow(2,(<span class="keywordtype">float</span>)<a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[1])/4.00); <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nBeats Per Minute: %d&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a407575f0c8057573a7b2b3dc326a431c">TuneBPM</a>); <span class="comment">//real BPM based on denominator</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160; <span class="comment">//unsigned int BarTime=BeatTime*BarQuarters; //time of a bar in microseconds (from quarternote-microseconds MIDItempo)</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> SWMrowTime=<a class="code" href="_s_w_mconvert_8c.html#a000ec550efb8715efa0fd920ca2b51d8">MIDItempo</a>*(4.00/NoteResolution); <span class="comment">//time of SWM pattern-row</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PALframeTime=20000; <span class="comment">//microseconds a PAL (50Hz) frame takes</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> PALframesPerRow=(SWMrowTime/PALframeTime); <span class="comment">//how much PAL frames build up a pattern-row (C64 tune speed)</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; <span class="comment">//if (PALframesPerRow&lt;3) PALframesPerRow=3; //limit to usable speed</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]=PALframesPerRow+0x80; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nC64 tempo (based on BPM %d and Time-signature denominator): $%x\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a407575f0c8057573a7b2b3dc326a431c">TuneBPM</a>,PALframesPerRow);</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="comment">//----create SWM patterns and orderlists--------------------------------------------------------------</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\n*** Generating patterns from the MIDI-datastream. ***&quot;</span>);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>=<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>=<a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>=0; <span class="comment">//init</span></div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//only care about 1st 3 channels wchich contain notes</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; {</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  SourceIndex=k=0; </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;OKtrkAmount)</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  {</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\nGenerating patterns from track $%x: \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+1);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   FirstRow=1; CurrentDelta=<a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][SourceIndex]; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nDelta-time of 1st Note: $%x pulses\n&quot;</span>,CurrentDelta); <span class="comment">//init</span></div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keywordflow">while</span> ( ( SourceIndex &lt; <a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]] ) &amp;&amp; ( (<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>+1)&lt;PATT_MAX ) &amp;&amp; (k&lt;seqlength) )</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   {</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;pattern $%x, &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>+1);  <span class="comment">//  printf(&quot;\n&quot;);</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[1]*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>;j++) PattTemp[j]=0; <span class="comment">//init pattern</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[1];j++) <span class="comment">//j counts pattern-rows</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;     <span class="keywordflow">if</span> (FirstRow) { PattTemp[j*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>+1]=<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1; FirstRow=0; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;*Insturment%d* &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1); } <span class="comment">//select instrument 1..3 at the beginning to get sound </span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;     <span class="keywordflow">if</span> ( SourceIndex &gt;= <a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]] ) <span class="keywordflow">break</span>; <span class="comment">//don&#39;t continue pattern-creation if MIDI data is over</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;     <span class="keywordflow">for</span>(l=0;l&lt;RowPulses;l++) <span class="comment">//counts pattern-row pulses one-by-one, quantizes in 50% range back&amp;forth</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;     {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      <span class="keywordflow">if</span> (CurrentDelta==0) <span class="comment">//delay expired, put event into this or next row, depending on 50% treshold</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      { <span class="comment">//if current note timed out, register it and go to next in MIDI-track</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;       <span class="keywordflow">do</span>  <span class="comment">//wait in place if zero-delay(s) happened - hopefully won&#39;t cause endless loops</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;       {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        CurrentNote=<a class="code" href="_s_w_mconvert_8c.html#af2816d5909253f7f75b35d6beaec7ae6">MIDInotes</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][SourceIndex]; CurrentVelo=<a class="code" href="_s_w_mconvert_8c.html#adb50d199b0acc7cab403bb6ff8a0e7e3">MIDIvelos</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][SourceIndex];</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        <span class="keywordflow">if</span> ( CurrentNote&lt;12 || CurrentNote&gt;=106) CurrentNote=(12-1); <span class="comment">//limit note-range to SWM</span></div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;        <span class="keywordflow">if</span> ( l &lt; (RowPulses/2) ) <span class="comment">//check if less than 50%</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        { <span class="comment">//if smaller than 50%, put in this row...</span></div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;         <span class="keywordflow">if</span> ( (PattTemp[j*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]==0) || (PattTemp[j*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]==<a class="code" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a>) ) <span class="comment">//touch data only if there&#39;s no note data in the place already (one-shot writing)</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;         { PattTemp[j*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]=(CurrentVelo) ? CurrentNote-(12-1) : <a class="code" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a> ;} </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;        }</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        <span class="keywordflow">else</span> </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        {  <span class="comment">//if bigger than 50%, put to next row instead</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;         <span class="keywordflow">if</span> ( (PattTemp[(j+1)*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]==0) || (PattTemp[(j+1)*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]==<a class="code" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a>) ) <span class="comment">//touch data only if there&#39;s no note in the place already (one-shot writing)</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;         { PattTemp[(j+1)*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>]=(CurrentVelo) ? CurrentNote-(12-1) : <a class="code" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a> ; }</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;        }</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        SourceIndex++; CurrentDelta=<a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[<a class="code" href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]][SourceIndex];</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;       } </div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;       <span class="keywordflow">while</span> (CurrentDelta==0); <span class="comment">//wait in place if zero-delay(s) happened </span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;       <span class="comment">//printf(&quot;%x*&quot;,CurrentDelta);</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      CurrentDelta--; <span class="comment">//roll through 0 delays, maximum Rowpulses/2 zero-delays allowed</span></div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;     }</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;     <span class="comment">//printf(&quot;$%2X &quot;,PattTemp[j*XM_COL_PER_TRK]);</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   </div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="comment">//compare the resulted vertical XM pattern to existing ones, register if not found, reuse existing if found</span></div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    <span class="comment">//(might be good idea to look for transposed patterns here or later, were relative note-intervals and effects match)</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    PtnMatch=0; <span class="comment">//init</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <span class="keywordflow">for</span> (l=1;l&lt;=<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>;l++) <span class="comment">//check registered XM patterns from beginning</span></div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    {</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;     <span class="keywordflow">for</span> (j=0;j&lt;(<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[1]*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>);j++) <span class="comment">//compare bytes one-by-one to pattern &#39;l&#39;</span></div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;     {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <span class="keywordflow">if</span> (PattTemp[j]!=<a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[l][j]) {PtnMatch=0;<span class="keywordflow">break</span>;} <span class="comment">//mismatch found</span></div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">else</span> PtnMatch++; <span class="comment">//count matching bytes</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;     }</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;     <span class="keywordflow">if</span> (PtnMatch) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;    <span class="comment">//register or reuse patterns based on PtnMatch</span></div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    <span class="keywordflow">if</span> (PtnMatch) <span class="comment">//if match is found, reusing pattern &#39;l&#39;</span></div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;$%2x  &quot;</span>,l);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][k]=l;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    }</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordflow">else</span> <span class="comment">//no match found, registering new pattern</span></div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][k]=++<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;     <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[1]*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>;j++) <span class="comment">//copy the registered temporary vertical XM pattern to pattern-registry </span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;     { </div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>][j]=PattTemp[j]; <span class="comment">//printf(&quot;%2X,&quot;,XMPATTERNS[SWMpatternCount][j]);</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;     }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;$%2x  &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][k]);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    }</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    k++;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>==0) { <a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[k]=k; <a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>=k; }</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   }</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  }</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  { <span class="comment">//handle empty sequences possibly left</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>++;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\nGenerating empty sequence with empty pattern $%x... \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   <span class="keywordflow">for</span> (k=0;k&lt;<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>;k++) </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][k]=<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>; <span class="comment">//last unused pattern empty pattern</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   }</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  }</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160; }</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160; </div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; <span class="comment">//Generating some basic instruments to get some sound at least...</span></div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>) &amp;&amp; (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;OKtrkAmount); <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; {</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;instnamelength;j++) <a class="code" href="_s_w_mconvert_8c.html#a51b43419a8b2d074202d6022ffc396c4">XMinstName</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=<span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a97ab0f6a3b5d22c449b6b1cdbe922bbb">XMinsAttack</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; <a class="code" href="_s_w_mconvert_8c.html#ac9db4d2a92c8d00f99e2bbb919e6b2f5">XMinsDecay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; <a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0x3F; <a class="code" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0;</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160; }</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>=<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;}</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="comment">//------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a205e98defd45247b25a9a12f08d0d8ac"> 1587</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a205e98defd45247b25a9a12f08d0d8ac">ProcessMIDItrack</a>()</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;{</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> EventTemp,Event,DestinationTrack,MetaEvent=0,MIDIdata1,MIDIdata2,MIDInote,MIDIvelo;</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j; <span class="comment">//set default BPM</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> MIDIdelta,MetaDataLength; <span class="comment">//set default tempo (120bpm in 4/4 mode)</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160; </div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0; <span class="comment">//init</span></div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160; </div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160; <span class="comment">//file pointer points to beginning of track here - read and put MIDI notes to corresponding arrays of channels</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; <span class="keywordflow">while</span> (MetaEvent!=0x2F) <span class="comment">//for(i=0;i&lt;MIDI_TRACK_SIZE[0];)</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160; {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  MIDIdata1=MIDIdata2=0; <span class="comment">//init</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  MIDIdelta=<a class="code" href="_s_w_mconvert_8c.html#ae77bd7aceb642db9e7d94ac748130a87">ReadVarLenNum</a>(); <span class="comment">//i++; //printf (&quot;$%x &quot;,MIDIdelta);</span></div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;  EventTemp=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//printf(&quot;Event %x,  &quot;,EventTemp); //examine Event</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;  <span class="keywordflow">if</span> (EventTemp&amp;0x80) Event=EventTemp; <span class="comment">//if legal event &#39;status&#39; byte</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>, -1, <a class="code" href="stdio_8h.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a>); <span class="comment">//otherwise if no status-byte given, we use the previously read &#39;Event&#39;</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a>!=1) <span class="comment">//if version 0 (single-track) or 2, distribute based on channel-number</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  {  </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   DestinationTrack=Event&amp;0xF; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]+=MIDIdelta;   <span class="comment">//accumulate timing for not touched tracks</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  }</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="keywordflow">else</span> </div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   DestinationTrack=<a class="code" href="_s_w_mconvert_8c.html#a2379b5bc521862f7b0ec0200f7a7a7e3">CurrentTrack</a>; <span class="comment">//if version 1, distribute channel notes based on track-number</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a>[<a class="code" href="_s_w_mconvert_8c.html#a2379b5bc521862f7b0ec0200f7a7a7e3">CurrentTrack</a>]+=MIDIdelta; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  }</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="keywordflow">if</span>(Event==0xFF) <span class="comment">//check if Meta-event</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  {</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   MetaEvent=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); MetaDataLength=<a class="code" href="_s_w_mconvert_8c.html#ae77bd7aceb642db9e7d94ac748130a87">ReadVarLenNum</a>();</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   <span class="keywordflow">switch</span> (MetaEvent)</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="keywordflow">case</span> 0x01 : <span class="comment">//text event</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nText: &quot;</span>);</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;     <span class="keywordflow">for</span>(j=0;j&lt;MetaDataLength;j++) <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>,<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>));</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    }</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keywordflow">case</span> 0x02 : <span class="comment">//copyright note</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    {</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nCopyright text: &quot;</span>);</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;     <span class="keywordflow">for</span>(j=0;j&lt;MetaDataLength;j++) </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;     {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      MIDIdata1=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <span class="keywordflow">if</span> (j&lt;40 &amp;&amp; MIDIdata1!=0)  <a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>[j]=MIDIdata1;</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>,MIDIdata1);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;     }</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    }</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">case</span> 0x03 : <span class="comment">//sequence/track name</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    {</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nTrack-name: &quot;</span>);</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;     <span class="keywordflow">for</span>(j=0;j&lt;MetaDataLength;j++) <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>,<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>));</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    }</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">case</span> 0x2F : <span class="comment">//end of track</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    {</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    }</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">case</span> 0x51 : <span class="comment">//tempo setting</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    {</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nTune-tempo (microseconds per quarter-note): &quot;</span>);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a000ec550efb8715efa0fd920ca2b51d8">MIDItempo</a>=0; <span class="comment">//reset value, 24bit value (3 bytes)</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;     <span class="keywordflow">for</span>(j=0;j&lt;MetaDataLength;j++) <a class="code" href="_s_w_mconvert_8c.html#a000ec550efb8715efa0fd920ca2b51d8">MIDItempo</a>+=pow(256.00,(<span class="keywordtype">float</span>)(2-j))*<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//printf(&quot;%x,&quot;,fgetc(InputFile));</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%d  -&gt; %d quarter-notes/minute \n&quot;</span>,(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)<a class="code" href="_s_w_mconvert_8c.html#a000ec550efb8715efa0fd920ca2b51d8">MIDItempo</a>,60000000/<a class="code" href="_s_w_mconvert_8c.html#a000ec550efb8715efa0fd920ca2b51d8">MIDItempo</a>); </div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    }</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keywordflow">case</span> 0x58 : <span class="comment">//Time signature</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nTime-signature: &quot;</span>);</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;     <span class="keywordflow">for</span>(j=0;j&lt;MetaDataLength;j++) <a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[j]=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//printf(&quot;%x &quot;,fgetc(InputFile));</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Numerator: %d ; Denominator(2:quarter-note,3:eigth,etc.): %d&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[0],<a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[1]);</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;     <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n                MIDI-clocks per metronome-tick: %d \n                Notated 32nd notes in a quarter-note: %d \n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[2],<a class="code" href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a>[3]);</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    }</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    default : </div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    {</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;     <span class="keywordflow">for</span>(j=0;j&lt;MetaDataLength;j++) <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//printf(&quot;%x &quot;,fgetc(InputFile));</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  }</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Event==0xF0) <span class="comment">//check if System Exclusive Event</span></div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)!=0xF7) ; <span class="comment">//simply roll through sysex till its end</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  }</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Event==0xF7) </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;  {</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)!=0xF7) ; <span class="comment">//simply roll through sysex till its end</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  }</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordflow">else</span> <span class="comment">//normal MIDI events</span></div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   <span class="keywordflow">switch</span> (Event&amp;0xF0)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;   {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="keywordflow">case</span> 0x90 : <span class="comment">//Note-On MIDI event</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    { <span class="comment">//put different channels&#39; notes in separate array-tables</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[DestinationTrack][<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[DestinationTrack]]=<a class="code" href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a>[DestinationTrack]; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;     <span class="comment">//printf(&quot;*%x* &quot;,ChannelDelta[DestinationTrack]);</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a>[DestinationTrack]=0;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;     MIDIdata1=MIDInote=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//printf(&quot;$%x*%x-%x-&quot;,(unsigned int)MIDIdelta,Event,MIDInote);</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;     MIDIdata2=MIDIvelo=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//printf(&quot;%x &quot;,MIDIvelo);</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#adb50d199b0acc7cab403bb6ff8a0e7e3">MIDIvelos</a>[DestinationTrack][<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[DestinationTrack]]=MIDIvelo; </div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#af2816d5909253f7f75b35d6beaec7ae6">MIDInotes</a>[DestinationTrack][<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[DestinationTrack]]=MIDInote; <span class="comment">//(MIDIvelo==0) ? GATEOFFX : MIDInote;</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[DestinationTrack]++;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">case</span> 0x80 : <span class="comment">//Note-OFF MIDI event</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    {</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a>[DestinationTrack][<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[DestinationTrack]]=<a class="code" href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a>[DestinationTrack]; <a class="code" href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a>[DestinationTrack]=0;</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;     MIDIdata1=MIDInote=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//printf(&quot;%x-%x-%x-&quot;,Event&amp;0xF,(unsigned int)MIDIdelta,MIDInote);</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#af2816d5909253f7f75b35d6beaec7ae6">MIDInotes</a>[DestinationTrack][<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[DestinationTrack]]=MIDIdata1; <span class="comment">//GATEOFFX;</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;     MIDIdata2=MIDIvelo=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); <span class="comment">//printf(&quot;%x &quot;,MIDIvelo);</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#adb50d199b0acc7cab403bb6ff8a0e7e3">MIDIvelos</a>[DestinationTrack][<a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[DestinationTrack]]=0; <span class="comment">//MIDIvelo;</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;     <a class="code" href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a>[DestinationTrack]++;</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    }</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordflow">case</span> 0xC0 : {MIDIdata1=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);<span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="keywordflow">case</span> 0xD0 : {MIDIdata1=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);<span class="keywordflow">break</span>;}</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    default :</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    {</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;     MIDIdata1=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>); MIDIdata2=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    }</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   }</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;   <span class="comment">//printf(&quot;*%x-%x-%x &quot;,Event,MIDIdata1,MIDIdata2);</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; }</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;}</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="comment">//==========================================================================================</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786"> 1717</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a>() <span class="comment">//---- Export SWM data from the imported XM/MIDI/SNG/etc. data -----------</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;{</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; <span class="comment">/* these global variables/arrays should be loaded with imported music-data:</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment"> //  SWMpatternCount - number of imported patterns</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;<span class="comment"> //  (ChordAmount - number of possibly imported chords)</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<span class="comment"> //  (SequenceAmount - number of sequences - now hardwired to SID_CHNAMOUNT=3 below)</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="comment"> //  InstAmount - amount of imported instruments</span></div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;<span class="comment"> //  AUTHORINFO[] - assembled author-text, first $28 characters will be used for SWM output...</span></div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;<span class="comment"> //  XMsongLength - orderlist-length (in case of Goattracker SNG it should be a 3-element array instead)</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;<span class="comment"> //  XMpattRef[] - </span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;<span class="comment"> //  XMorderlist[] - converts to SEQUENCES[i][j] and SWMseqLength[i] then TUNEDATA[];</span></div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;<span class="comment"> //  XMPATTERNS[i][j+0..4] - pattern-arrays with these columns of j: note,instrument,volume,fx,fxvalue</span></div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="comment"> //  etc...                - converted to PATTERNS[i][SWMpattIndex], PATTERNLENGTHS[],PATTERNSIZES[], then TUNEDATA[]</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<span class="comment"> //  conclusion: NOT SUITABLE TO PRECISELY CONVERT FROM GOATTRACKER .SNG FORMAT. USING CONRAD&#39;S CODE INSTEAD.</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160; </div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j,DataIndex=0,SWMpattIndex=0;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> SWM_Note=0,SWM_Ins=0,SWM_Fx=0,SWM_FxVal=0,PrevInst=0,PrevFx=0,PrevTempo=0,PrevVib=0,NOPcount=0,PattData=0,PrevData=0,PrevSlide=0;</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160; </div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;to SWM (SID-WIZARD v1.0) format. \n&quot;</span>);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;Output file-name will be: %s\n&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>); </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; <span class="comment">//---------- assembling TUNEDATA array before writing to file ---------</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a61fadc6749a3e4de2c4c1fcc8f4accdc">OutputSize</a>=tuneheadersize; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a8471ef1fc2e359bf5138a7517d543f81">TUNEDATA_SIZE_MAX</a>;<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++); <span class="comment">//init</span></div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>=<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>; <span class="comment">//only 3, because only 1 subtune gets generated</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a>=(<a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a>&lt;PATT_MAX) ? <a class="code" href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a> : PATT_MAX;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#ae598de553d4de8402a78d07303ea7c31">ChordAmount</a>=0; <span class="comment">//might be used later</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160; </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160; <span class="comment">//write SWM header</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="_s_w_mconvert_8c.html#aef87eaee7ea37b658fee72fdd151484b">SWM_ID</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#aef87eaee7ea37b658fee72fdd151484b">SWM_ID</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];  <span class="comment">//0-3. SWM-ID</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[FSPEEDPOS]=1;    <span class="comment">//4.preferred framespeed</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[SWM_HILI_POS]=4; <span class="comment">//5.preferred step-highlighting amount - should depend on patternlength</span></div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[SWM_AUTO_POS]=1; <span class="comment">//6.preferred auto-advance amount</span></div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[SWM_CBIT_POS]=1; <span class="comment">//7.track-binding ON  (, other &#39;confbit&#39; newsettings are &#39;OFF&#39;)</span></div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[SWM_MUTE_POS+<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0xFF; <span class="comment">//8-$A.solo all tracks</span></div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[SWM_DEFP_POS]=DEFAULTPTNLEN; <span class="comment">//$B. default pattern-length - should depend on XM patternlengths</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[SEQAMOPOS]=<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>; <span class="comment">//$C. sequence-amount</span></div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[PTAMOUPOS]=<a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a>; <span class="comment">//$D. pattern-amount calculated in pattern-converter</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[INSTAMPOS]=<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>;    <span class="comment">//$E. number of instruments </span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[CHRDLEPOS]=<a class="code" href="_s_w_mconvert_8c.html#ae598de553d4de8402a78d07303ea7c31">ChordAmount</a>;   <span class="comment">//$F. chordtable-length (calculated in converter)</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[TMPLENPOS]=0; <span class="comment">//tempo-programs are not supported in XM/MIDI, leaving it out</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[COLORTHEMEPOS]=0; <span class="comment">//default colour-theme</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[KEYBOARDTYPE_POS]=0; <span class="comment">//default (GOATTRACKER-like) 2-row keyboard mode</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DRIVERTYPE_POS]=0; <span class="comment">//normal music-player/driver routine version</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="comment">//....some bytes not used yet in SWM version 1. (kept for possible upcoming expansion)</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;(tuneheadersize-AUTHORPOS);<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[AUTHORPOS+<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="ctype_8h.html#a9f0ca06396b87ad57a4be1648f4367d7">toupper</a>(<a class="code" href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]); <span class="comment">//$18..$3f - author-info</span></div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; DataIndex=tuneheadersize; <span class="comment">//init pack-target-address</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160; </div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160; <span class="comment">//write SWM sequences XMorderlist[] contains XM-orderlist, XMsongLength is its length</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; <span class="comment">//convert XM-orderlist to SWM-orderlist based on pattern-numbers in XMpattRef[]</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting processed XM Orderlist to 3 SWM sequences&quot;</span>); </div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) </div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160; {</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nSWM Sequence $%x: &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a>;j++)</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;   <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][<a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[j]]) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][<a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[j]]&lt;=PATT_MAX) ) <a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=<a class="code" href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][<a class="code" href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a>[j]]; <span class="comment">//don&#39;t allow illegal patterns</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   <span class="keywordflow">else</span> <a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=1; <span class="comment">//however SEQ-FX-es must be allowed later </span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%2x &quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  }</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=0xFF;j++; <a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]=<a class="code" href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a>; j++; <span class="comment">//put &#39;jump&#39; delimiter and corresponding loop-address (will be harder with transpose)</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#aeaf7e6bae86a2f31c521794796bc10d2">SWMseqLength</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=j;  <span class="comment">//if transpose gets supported, the SWM sequence-lengths will differ</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160; }</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)  <span class="comment">//write orderlist to TUNEDATA-array</span></div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160; {</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#aeaf7e6bae86a2f31c521794796bc10d2">SWMseqLength</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];j++)</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;  {</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=<a class="code" href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]; <span class="comment">//copy SWM sequence to TUNEDATA[]</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   DataIndex++;</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  }</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=<a class="code" href="_s_w_mconvert_8c.html#aeaf7e6bae86a2f31c521794796bc10d2">SWMseqLength</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; DataIndex++; <span class="comment">//write size of sequence into TUNEDATA[]</span></div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; }</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160; <span class="comment">//write SWM patterns - XMPATTERNS[][] filled with needed XM pattern-data ---------------------</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160; <span class="comment">//XMpattref[][] contains which pattern of XMPATTERNS array corresponds which SWM pattern </span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160; <span class="comment">//XMpatternCount holds how much patterns are needed</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160; <span class="comment">//Now, convert XM patterns to SWM equivalents (make packed NOPs too)     // !!! SWM patterns start from 1</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nConverting processed XM patterndata to SWM format:  &quot;</span>); </div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=1;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=<a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">// i counts patterns</span></div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160; {</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  SWMpattIndex=PrevInst=PrevVib=0; <span class="comment">//init non-linear SWM data pointer for SWM target and previous value buffers</span></div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="keywordflow">for</span>(j=0; j&lt;(<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>); j+=<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>) <span class="comment">// j counts pattern-rows</span></div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;   <span class="keywordflow">if</span> (SWMpattIndex&gt;=maxptnlen) { <a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=(j/<a class="code" href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a>); <span class="keywordflow">break</span>; } <span class="comment">//don&#39;t allow bigger than allowed length of patterns</span></div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a> = <a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j+0];</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>  = <a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j+1]; </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>  = <a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j+2];</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>   = <a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j+3]; <span class="comment">// XM-FX 0 (arpeggio) should be converted to something else for SWM chord-support</span></div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>= <a class="code" href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j+4];</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;   <span class="comment">//convert XM Ins., Vol/Fx to SWM ins., small-/big-FX --- mark every NOP as 0! -----------</span></div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   <span class="comment">//CASE1 - if there&#39;s something to put into note-column (note / note-fx / maybe packed NOP)</span></div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   SWM_Note=(<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>!=<a class="code" href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a>) ? (<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a>&gt;=0x60)?0:<a class="code" href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a> : GATEOFFX ;  </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   <span class="keywordflow">if</span>(SWM_Note!=0 &amp;&amp; SWM_Note&lt;0x60) </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   { <span class="comment">//if valid note starts, init Vibrato-signal and slide</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    PrevVib=0; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <span class="keywordflow">if</span> (PrevFx==1 || PrevFx==2) PrevSlide=0;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   }</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   <span class="comment">//CASE2 - if there&#39;s something to put into instrument-column (instrument/legato/inst-FX) </span></div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;   <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a> &lt; INSTR_MAX ) <span class="comment">//check if legal instrument-selection happens in XM-pattern</span></div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   {</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">if</span> ((SWM_Ins=<a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>)) <span class="comment">//check if SWM_ins and XM_ins is nonzero</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    {</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;     <span class="keywordflow">if</span> (SWM_Ins!=PrevInst) { SWM_Ins=<a class="code" href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a>; PrevInst=SWM_Ins; } <span class="comment">//store current instrument to check later if repeated</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;     <span class="keywordflow">else</span> SWM_Ins=0; <span class="comment">//no need to refresh the same instrument in SWM. can be used for FX/legato instead</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    }</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   }</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   <span class="keywordflow">if</span> (SWM_Ins==0) <span class="comment">//if no instrument-selection, maybe effects can come in instrument-column </span></div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   {</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>==<a class="code" href="_s_w_mconvert_8c.html#a30736904d3288886af231d465aa70537">XM_PORTAMENTO_FX</a>) </div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    { </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&gt;=<a class="code" href="_s_w_mconvert_8c.html#ae9a82ecbd8a64c027f205fa46024af1d">XM_LEGATO_MIN_VAL</a>) {SWM_Ins=SWM_LEGATO_INSFX; <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=0; PrevSlide=<a class="code" href="_s_w_mconvert_8c.html#ae2fdf0115609f5959a5551661f2d5954">XM_LEGATO_FXVALUE</a>;} <span class="comment">//legato-FX in case</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SWM_Note!=0 &amp;&amp; <a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>==0 &amp;&amp; PrevSlide&gt;=<a class="code" href="_s_w_mconvert_8c.html#ae9a82ecbd8a64c027f205fa46024af1d">XM_LEGATO_MIN_VAL</a>) { SWM_Ins=SWM_LEGATO_INSFX; <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=0;}</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    }  </div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>==<a class="code" href="_s_w_mconvert_8c.html#ae6fd5b68d0c72a9ae169652bbf15e781">XM_NOTE_VOL_FX</a>) { SWM_Ins=(<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>==0x40)?SWM_VOLUME_SMALLFX+0xF : SWM_VOLUME_SMALLFX+((<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>/4)&amp;0xF); <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=0; } <span class="comment">//volume-setting</span></div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>&gt;0xF) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>&lt;0x50) ) { SWM_Ins=SWM_VOLUME_SMALLFX+(((<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>-0x10)/4)&amp;0xF); <a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>=0; } <span class="comment">//volume-setting</span></div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   }</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <span class="comment">//CASE 3 &amp; 4 - if there&#39;s something to be put into FX-column and FX-value (Small/Big FX)</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;   SWM_Fx=0; <span class="comment">//init, will stay 0 if no transferrable XM_FX is coming</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>&amp;0xF0)==0xA0) SWM_Fx = 0x90 + <a class="code" href="_s_w_mconvert_8c.html#aa12020586c748b15b0f642e011dd4ea8">XMtoSWMvibFreq</a>(<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>&amp;0xF); <span class="comment">//vibrato frequency Small-Fx</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>&amp;0xF0)==0xB0) SWM_Fx = 0x80 + <a class="code" href="_s_w_mconvert_8c.html#aeca477d7ebb0803e9de6bdd86bea207b">XMtoSWMvibAmp</a>(<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>&amp;0xF); <span class="comment">//vibrato amplitude Small-FX</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>&amp;0xF0)==0xF0) { SWM_Fx=3; SWM_FxVal=(<a class="code" href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a>&amp;0xF); } <span class="comment">//portamento Big-FX</span></div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>&lt;=<a class="code" href="_s_w_mconvert_8c.html#a30736904d3288886af231d465aa70537">XM_PORTAMENTO_FX</a>) </div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;   { <span class="comment">//slide/portamento Big-FX</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>) </div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;    { </div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;     SWM_Fx=<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>; SWM_FxVal=<a class="code" href="_s_w_mconvert_8c.html#a51ff3fec354cf2977cb012fd711adda1">XMtoSWMslide</a>(<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>);</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;     PrevSlide=SWM_FxVal; <span class="comment">//memorize slide/portamento speed for the case when a 100/200/300 (XM_FxVal=0) command comes</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;     <span class="keywordflow">if</span> (SWM_Note!=0 &amp;&amp; SWM_Ins==0) {SWM_Fx=<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>; SWM_FxVal=PrevSlide;}</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    }</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   } </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>==<a class="code" href="_s_w_mconvert_8c.html#a4855f56b50a0ced0d12a9159a9715e0a">XM_VIBRATO_FX</a>) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>!=PrevVib) )      <span class="comment">//vibrato Big-FX</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    { PrevVib=<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>; SWM_Fx = SWM_VIBRATO_BIGFX; SWM_FxVal = <a class="code" href="_s_w_mconvert_8c.html#aa12020586c748b15b0f642e011dd4ea8">XMtoSWMvibFreq</a>(<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>/16) + <a class="code" href="_s_w_mconvert_8c.html#aeca477d7ebb0803e9de6bdd86bea207b">XMtoSWMvibAmp</a>(<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&amp;0xF)*16; } </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a> == <a class="code" href="_s_w_mconvert_8c.html#ae6fd5b68d0c72a9ae169652bbf15e781">XM_NOTE_VOL_FX</a>) { SWM_Fx = (<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>==0x40)?SWM_VOLUME_SMALLFX+0xF : SWM_VOLUME_SMALLFX+((<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>/4)&amp;0xF);  }  <span class="comment">//note-volume (sustain level) Small-FX</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a> == 0xE) { <span class="comment">//extra XM-effects </span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&amp;0xF0)==0x50) SWM_Fx=0xD0+(<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&amp;0xF); <span class="comment">//SWM_DETUNE_FX would be Big-Fx; this is Small-FX</span></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&amp;0xF0)==0xD0) { <span class="keywordflow">if</span> ((<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]&amp;0x7F)&gt;3) {SWM_Fx=SWM_NOTEDELAY_FX;SWM_FxVal=(<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&amp;0xF);} } <span class="comment">//delay Big-Fx</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   }</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>==<a class="code" href="_s_w_mconvert_8c.html#abdc9f8a3f0edf40f0cc7fd6276e8c8f4">XM_MAIN_TEMPO_FX</a>) &amp;&amp; (<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>&lt;0x20) &amp;&amp; !(PrevFx==<a class="code" href="_s_w_mconvert_8c.html#abdc9f8a3f0edf40f0cc7fd6276e8c8f4">XM_MAIN_TEMPO_FX</a> &amp;&amp; PrevTempo==<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>) ) { SWM_Fx = 0x10; SWM_FxVal=PrevTempo=<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>; } <span class="comment">//tempo Big-Fx</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a> == <a class="code" href="_s_w_mconvert_8c.html#a85264ba3423d8123833745f7a9816314">XM_MAIN_VOL_FX</a>) { SWM_Fx = (<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>==0x40)?SWM_MAIN_VOLUME_SMALLFX+0xF : SWM_MAIN_VOLUME_SMALLFX+((<a class="code" href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a>/4)&amp;0xF); } <span class="comment">//main-volume Small-Fx </span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   <span class="keywordflow">if</span> (SWM_Fx==0 &amp;&amp; (PrevFx==0x1 || PrevFx==0<a class="code" href="cubase64__1analyze_pitch_8m.html#aab2463cd078f7c5368f6eb80f5a549b8">x2</a>) &amp;&amp; SWM_Note==0 &amp;&amp; PrevSlide!=0) {SWM_Fx=PrevFx; SWM_FxVal=0; PrevFx=0;} <span class="comment">//suppress previous slide</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>) PrevFx=<a class="code" href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a>; <span class="comment">//used to prevent XM funktempo from taking whole pattern</span></div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;   <span class="comment">//set bit7 in columns if necessary (following columns exist as nonzero) ----------</span></div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <span class="keywordflow">if</span> (SWM_Fx) SWM_Ins|=0x80; <span class="comment">//switch bit7 on</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keywordflow">if</span> (SWM_Ins) SWM_Note|=0x80; <span class="comment">//switch bit7 on</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   <span class="comment">//write out note/inst. columns</span></div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWMpattIndex]=SWM_Note; SWMpattIndex++; <span class="comment">//note column always exists</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;   <span class="keywordflow">if</span> (SWM_Ins) { <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWMpattIndex]=SWM_Ins; SWMpattIndex++; }</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   <span class="keywordflow">if</span> (SWM_Fx)  </div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   { </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWMpattIndex]=SWM_Fx; SWMpattIndex++; </div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">if</span> (SWM_Fx&lt;0x20) { <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWMpattIndex]=SWM_FxVal; SWMpattIndex++; }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   }</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  }</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWMpattIndex]=0xFF; SWMpattIndex++; <span class="comment">//put $FF pattern-delimiter - will be overwritten by size-indicator</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a604e1aa9b57a04a3c0bcbe31c4ddcf37">PATTERNSIZES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=SWMpattIndex;</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160; } </div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; <span class="comment">//maybe we should look for transposed patterns (where note-differences and effects are the same)</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; <span class="comment">//(Adjust &#39;PatternAmount&#39; if less pattern was used by further optimizations)</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=1;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=<a class="code" href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//pack patterns into TUNEDATA[] array</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; {</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <span class="keywordflow">for</span> (j=PrevData=0;j&lt;<a class="code" href="_s_w_mconvert_8c.html#a604e1aa9b57a04a3c0bcbe31c4ddcf37">PATTERNSIZES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];j++) </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  {</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;   PattData=<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j];</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   <span class="comment">//pack NOPs if enough found------------------------- (mimic the packdepack.inc assembly pattern-packer algorithm)</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;   <span class="keywordflow">if</span> ( (PattData!=0) || (j==0) ) <span class="keywordflow">goto</span> wrcmptr;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j-1]) <span class="keywordflow">goto</span> wrcmptr;</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;   NOPcount=PACKEDMIN-1; <span class="comment">//init</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;   packloop: <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j+1]!=0) <span class="keywordflow">goto</span> putprst; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   NOPcount++; j++; </div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;   <span class="keywordflow">if</span> ( NOPcount &lt; PACKEDMAX ) <span class="keywordflow">goto</span> packloop; </div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   putprst: <span class="keywordflow">if</span> ((PattData=NOPcount)==(PACKEDMIN-1)) PattData=0;  <span class="comment">//simple NOP in case of only 2 consequent zeroes</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <span class="comment">//write Patterndata to target-----------------------</span></div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   wrcmptr: <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=PrevData=PattData; DataIndex++; </div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  }</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  <span class="comment">//printf(&quot;\n&quot;);</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;  pattern$%X(length:$%2X,size:$%2X),  &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a604e1aa9b57a04a3c0bcbe31c4ddcf37">PATTERNSIZES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;  DataIndex--; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=<a class="code" href="_s_w_mconvert_8c.html#a604e1aa9b57a04a3c0bcbe31c4ddcf37">PATTERNSIZES</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; DataIndex++; <span class="comment">//write out size of pattern to TUNEDATA - in place of 0xFF delimiter</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=<a class="code" href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]; DataIndex++; <span class="comment">//write length of pattern to TUNEDATA after size</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160; } </div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160; </div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; <span class="comment">//write default SWM instruments to get some sound at least, some parameters get transferred</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; {</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=(<a class="code" href="_s_w_mconvert_8c.html#ab0162de92e566fd007cceb5009bd4df3">XMinsVibAmp</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]&lt;4)?0x0a:0x1a; DataIndex++; <span class="comment">//0 CONTROL REGISTER (HR TIMER,HRTYPE ,VIBRATO-TYPE,TIED PW/CTF)</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0x0F;DataIndex++; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=((<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]&amp;0x3F)/4)*16+0;DataIndex++; <span class="comment">//1..2 HR-ADSR</span></div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=<a class="code" href="_s_w_mconvert_8c.html#acf987664642f1c7e519380858085bcd3">ATTACKtoSWMtime</a>(<a class="code" href="_s_w_mconvert_8c.html#a97ab0f6a3b5d22c449b6b1cdbe922bbb">XMinsAttack</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>])*16+<a class="code" href="_s_w_mconvert_8c.html#a558813ed43d7430a63bbb702afdf0487">DECAYtoSWMtime</a>(<a class="code" href="_s_w_mconvert_8c.html#ac9db4d2a92c8d00f99e2bbb919e6b2f5">XMinsDecay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]); DataIndex++; <span class="comment">//3 Attack/Decay ON NOTESTART (GATE-ON)</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=((<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]&amp;0x3F)/4)*16+<a class="code" href="_s_w_mconvert_8c.html#a7e85c91cc42aa9f6574bfc286b420a1f">RELEASEtoSWMtime</a>(<a class="code" href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],<a class="code" href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);DataIndex++; <span class="comment">//3 Sustain/Release ON NOTESTART (GATE-ON)</span></div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=<a class="code" href="_s_w_mconvert_8c.html#ab0162de92e566fd007cceb5009bd4df3">XMinsVibAmp</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*16+(<a class="code" href="_s_w_mconvert_8c.html#a4e2e9fe44d37b8797ad46c85330314b7">XMinsVibFreq</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]/8); DataIndex++; <span class="comment">//5 VIBRATO (CALCULATED) FREQ+AMP (amplitude:high nibble)</span></div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=(<a class="code" href="_s_w_mconvert_8c.html#ab0162de92e566fd007cceb5009bd4df3">XMinsVibAmp</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]&lt;4) ? (0x100-<a class="code" href="_s_w_mconvert_8c.html#adb5cb6efa4cf51d6320d717fb248aa14">XMinsVibDelay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>])&amp;0x0F : <a class="code" href="_s_w_mconvert_8c.html#adb5cb6efa4cf51d6320d717fb248aa14">XMinsVibDelay</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] ; DataIndex++; <span class="comment">//6 VIBRATO DELAY OR AMPLITUDE-INCREMENT SPEED</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0; DataIndex++; <span class="comment">//7 ARPEGGIO AND CHORD-SPEED (0=1X)</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=1; DataIndex++; <span class="comment">//8 DEFAULT CHORD FOR INSTRUMENT</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0; DataIndex++; <span class="comment">//round(XMinsTransp[i]/12)*12-12; DataIndex++; //9 OCTAVE SHIFT (2&#39;s complement) - it&#39;s transpose essentially but in 12 steps by editor</span></div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0x14; DataIndex++; <span class="comment">//A PW-TABLE POINTER RELATIVE TO INSTRUMENT-ADDRESS</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0x15; DataIndex++; <span class="comment">//B FILTER-TABLE POINTER RELATIVE TO INSTRUMENT-ADDRESS</span></div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0; DataIndex++; <span class="comment">//C GATEOFF POINTER FOR WFARP-TABLE RELATIVE TO WF-TABLE POSITION</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0; DataIndex++; <span class="comment">//D GATEOFF POINTER FOR PW-TABLE RELATIVE TO PW-TABLE POSITION</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0; DataIndex++; <span class="comment">//E GATEOFF POINTER FOR FILTER-TABLE RELATIVE TO FILTER-TABLE POS.</span></div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=9; DataIndex++; <span class="comment">//F - used as 1st-frame waveform if its switch enabled in control-byte - in SW1.x tracker 00 value gets converted to $09 default</span></div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0x21; DataIndex++;<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0; DataIndex++;<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0; DataIndex++;<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0xFF; DataIndex++; <span class="comment">//WFtable</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0xFF; DataIndex++; <span class="comment">//PulseWidth-table</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0x15; DataIndex++; <span class="comment">// !!!! would be Filter-table 0xFF delimiter, but turns into size-info for SWM module decompression</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\nSWM instrument $%X, name: &quot;</span>,<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;instnamelength;j++) { <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=(<a class="code" href="_s_w_mconvert_8c.html#a51b43419a8b2d074202d6022ffc396c4">XMinstName</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]) ? <a class="code" href="ctype_8h.html#a9f0ca06396b87ad57a4be1648f4367d7">toupper</a>(<a class="code" href="_s_w_mconvert_8c.html#a51b43419a8b2d074202d6022ffc396c4">XMinstName</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][j]) : 0x20; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;%c&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]); DataIndex++; }</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; }</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160; </div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; <span class="comment">//write SWM chordtable - in case there&#39;s chord-support in the converter ;]</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160; <span class="comment">//not writing tempo-table yet.</span></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160; </div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; <span class="comment">//writing SWM subtune-funktempo (only one subtune)</span></div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=<a class="code" href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a>[0][0]|0x80; DataIndex++; <span class="comment">//funktempo-program not supported in XM this simple way</span></div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>[DataIndex]=0x84; DataIndex++; <span class="comment">//won&#39;t be used anyway</span></div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a61fadc6749a3e4de2c4c1fcc8f4accdc">OutputSize</a>=DataIndex;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160; <span class="comment">//write out array TUNEDATA to disk</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160; <span class="keywordflow">if</span> ( !<a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.swm&quot;</span>) ) <a class="code" href="string_8h.html#ac53e1d2254540a39fafd7f5920821d52">strcat</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.prg&quot;</span>); <span class="comment">//if only .swm given, append .prg</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); <span class="comment">// !!!important &quot;wb&quot; is for binary (not to check text-control characters)</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0x3333); <span class="comment">//-2. load-address of PRG format</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160; <a class="code" href="stdio_8h.html#a10d9535043595582d26bf02c2a75f820">fwrite</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>,<a class="code" href="_s_w_mconvert_8c.html#a61fadc6749a3e4de2c4c1fcc8f4accdc">OutputSize</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>),<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); </div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n\n**** Conversion is complete. **** \nSWM file &#39;%s&#39; generated... :)&quot;</span>,<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160; <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160; </div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; <span class="comment">//write VICE P00 too, easily loadable from VICE</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;.P00&quot;</span>); </div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a> = <a class="code" href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>,<span class="stringliteral">&quot;wb&quot;</span>); <span class="comment">// !!!important &quot;wb&quot; is for binary (not to check text-control characters)</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a4050eb1e64b874341e34c89c17847548">WriteP00header</a>(); <span class="comment">//write &#39;C64File&#39; header to file</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(0x3333); <span class="comment">//-2. load-address of PRG format</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160; <a class="code" href="stdio_8h.html#a10d9535043595582d26bf02c2a75f820">fwrite</a>(<a class="code" href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a>,<a class="code" href="_s_w_mconvert_8c.html#a61fadc6749a3e4de2c4c1fcc8f4accdc">OutputSize</a>,<span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>),<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); </div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; <a class="code" href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); <span class="comment">//printf(&quot;\n(And &#39;%s.P00&#39; as well for easy work.)&quot;,OutputFileName);</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160; </div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160; <a class="code" href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a>(<span class="stringliteral">&quot;\n-----------------------------------------------------\n&quot;</span>);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;}</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160; </div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment">//==========================================================================================</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="comment">//------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a40849854c215922d69679bda489fecd6"> 1956</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a40849854c215922d69679bda489fecd6">SetChordInstr</a>()  <span class="comment">//check for chord-instruments (will be expanded to tracks 4..8 in XM, generate polyphonic track in MIDI) </span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;{</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,j;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=1;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=<a class="code" href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160; {</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  <span class="keywordflow">for</span>(j=0;j&lt;32;j++) <span class="comment">//examine WF/Arp table</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;  {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][WFTABLEPOS+j*3]==0xFF) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][WFTABLEPOS+j*3+1]==0x7F) <a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=<a class="code" href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][SWI_DEFCHORD_POS]; <span class="comment">//check if arp-column data is chord-jumping</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   <span class="keywordflow">else</span> <a class="code" href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=0;</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;  }</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160; }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[0]=0; <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[1]=1; j=1; <span class="comment">//j counts chords</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=1;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=<a class="code" href="_s_w_mconvert_8c.html#ae598de553d4de8402a78d07303ea7c31">ChordAmount</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <span class="comment">//examine chord-lengths</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160; {</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]==0x7E) || (<a class="code" href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]==0x7F) ) <span class="comment">//check chord-endsignal</span></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  {</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <a class="code" href="_s_w_mconvert_8c.html#a1baadd52d31bcab127954eeeccff46bb">ChordLen</a>[j]=<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-<a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[j]; j++; <a class="code" href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a>[j]=<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+1;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  }</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="comment">//printf(&quot;\n%d,%d %d-%d &quot;,i,CHORDS[i],ChordIndex[j-1],ChordLen[j-1]);</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; }</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;}</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160; </div>
<div class="line"><a name="l01979"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a88fd95a9901ba7482a05b7ca455b92da"> 1979</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a88fd95a9901ba7482a05b7ca455b92da">SWMtoXMslide</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> SWMslide)</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;{</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160; <span class="keywordtype">double</span> XMslide=exp2(SWMslide/32);</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) XMslide;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;}</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160; </div>
<div class="line"><a name="l01985"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a51ff3fec354cf2977cb012fd711adda1"> 1985</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a51ff3fec354cf2977cb012fd711adda1">XMtoSWMslide</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMslide)</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;{</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; <span class="keywordtype">double</span> SWMslide;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160; <span class="keywordflow">if</span> (XMslide==1) SWMslide=1.0; <span class="comment">//workaround for log2()</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; <span class="keywordflow">else</span> SWMslide=log2(XMslide)*32;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160; <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) SWMslide;</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;}</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160; </div>
<div class="line"><a name="l01993"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a69d78552435a794730f9f0f9f2d8532f"> 1993</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a69d78552435a794730f9f0f9f2d8532f">ATTACKtoXMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> AttackNibble)</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;{</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160; <span class="keywordflow">return</span> <a class="code" href="_s_w_mconvert_8c.html#afb4f7320f0d72850c3d079d337176515">ATTACK_times</a>[AttackNibble]/<a class="code" href="_s_w_mconvert_8c.html#a0d6231f0d43776715da0a11a7af38842">ADSR_time_ScaleRate</a>;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;}</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#acf987664642f1c7e519380858085bcd3"> 1998</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#acf987664642f1c7e519380858085bcd3">ATTACKtoSWMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> XMattack)</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;{</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;0xF;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160; {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <span class="keywordflow">if</span> ( (<a class="code" href="_s_w_mconvert_8c.html#afb4f7320f0d72850c3d079d337176515">ATTACK_times</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]/<a class="code" href="_s_w_mconvert_8c.html#a0d6231f0d43776715da0a11a7af38842">ADSR_time_ScaleRate</a>) &gt;= XMattack ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160; }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; <span class="keywordflow">return</span> ((<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)?<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-1:<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;}</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160; </div>
<div class="line"><a name="l02008"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7796645a162efd545d6f1bddd74681d4"> 2008</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a7796645a162efd545d6f1bddd74681d4">DECAYtoXMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DecayNibble, <span class="keywordtype">float</span> SustainNibble)</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;{</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160; <span class="keywordflow">return</span> (<a class="code" href="_s_w_mconvert_8c.html#aaa2f4b5d69c129bca71cff7e5fd67ee6">DECAY_RELEASE_MaxTimes</a>[DecayNibble]/<a class="code" href="_s_w_mconvert_8c.html#a0d6231f0d43776715da0a11a7af38842">ADSR_time_ScaleRate</a>) * ((0xF-SustainNibble)/16);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;}</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160; </div>
<div class="line"><a name="l02013"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a558813ed43d7430a63bbb702afdf0487"> 2013</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a558813ed43d7430a63bbb702afdf0487">DECAYtoSWMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> XMdecay, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMsustain)</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;{</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160; <span class="keywordtype">float</span> SustainNibble=XMsustain/4; <span class="comment">//convert range 0..3F to 0..F</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;0xF;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160; {</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="keywordflow">if</span> ( ((<a class="code" href="_s_w_mconvert_8c.html#aaa2f4b5d69c129bca71cff7e5fd67ee6">DECAY_RELEASE_MaxTimes</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]/<a class="code" href="_s_w_mconvert_8c.html#a0d6231f0d43776715da0a11a7af38842">ADSR_time_ScaleRate</a>) * ((0xF-SustainNibble)/16)) &gt;= XMdecay ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160; }</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160; <span class="keywordflow">return</span> ((<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)?<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-1:<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;}</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160; </div>
<div class="line"><a name="l02024"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a50fa8ec29e4dda97353ec07676dad3f0"> 2024</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a50fa8ec29e4dda97353ec07676dad3f0">RELEASEtoXMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ReleaseNibble, <span class="keywordtype">float</span> SustainNibble)</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;{</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160; <span class="keywordflow">return</span> (<a class="code" href="_s_w_mconvert_8c.html#aaa2f4b5d69c129bca71cff7e5fd67ee6">DECAY_RELEASE_MaxTimes</a>[ReleaseNibble]/<a class="code" href="_s_w_mconvert_8c.html#a0d6231f0d43776715da0a11a7af38842">ADSR_time_ScaleRate</a>) * (SustainNibble/16);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;}</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a7e85c91cc42aa9f6574bfc286b420a1f"> 2029</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a7e85c91cc42aa9f6574bfc286b420a1f">RELEASEtoSWMtime</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> XMrelease, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> XMsustain)</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;{</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; <span class="keywordtype">float</span> SustainNibble=XMsustain/4; <span class="comment">//convert range 0..3F to 0..F</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;0xF;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; {</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="keywordflow">if</span> ( ((<a class="code" href="_s_w_mconvert_8c.html#aaa2f4b5d69c129bca71cff7e5fd67ee6">DECAY_RELEASE_MaxTimes</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]/<a class="code" href="_s_w_mconvert_8c.html#a0d6231f0d43776715da0a11a7af38842">ADSR_time_ScaleRate</a>) * (SustainNibble/16)) &gt;= XMrelease ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160; }</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; <span class="keywordflow">return</span> ((<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)?<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-1:<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;}</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160; </div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="comment">//=================== Common Functions ==============================================</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160; </div>
<div class="line"><a name="l02042"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b"> 2042</a></span>&#160;<span class="keywordtype">char</span>* <a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<span class="keywordtype">char</span> *filename) <span class="comment">//get pointer of file-extension from filename string</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;{  <span class="comment">//if no &#39;.&#39; found, point to end of the string</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160; <span class="keywordtype">char</span>* LastDotPos = <a class="code" href="string_8h.html#a125388aaab8d0424f386e908ae14e97a">strrchr</a>(filename,<span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; <span class="keywordflow">if</span> (LastDotPos == <a class="code" href="gconst_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span> (filename+<a class="code" href="string_8h.html#a2a16e376fdf760ab48963ace1fbd8231">strlen</a>(filename)); <span class="comment">//make strcmp not to find match, otherwise it would be segmentation fault</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160; <span class="keywordflow">return</span> LastDotPos;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;}</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230"> 2049</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a>(<span class="keywordtype">char</span> *filename,<span class="keywordtype">char</span> *newExt) <span class="comment">//change the extension of the file </span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;{</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a48c89e7348314ae53287bef6d6edf473">CutExt</a>(filename); <span class="comment">//omit original extension with 0 string-delimiter</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160; <a class="code" href="string_8h.html#ac53e1d2254540a39fafd7f5920821d52">strcat</a>(filename,newExt); <span class="comment">//expand with new extension</span></div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;}</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a48c89e7348314ae53287bef6d6edf473"> 2055</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a48c89e7348314ae53287bef6d6edf473">CutExt</a>(<span class="keywordtype">char</span> *filename) <span class="comment">//cut the extension of the filename by putting 0 at position of &#39;.&#39;</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;{</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160; *<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(filename)=0; <span class="comment">//omit original extension with 0 string-delimiter</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;}</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a4050eb1e64b874341e34c89c17847548"> 2060</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a4050eb1e64b874341e34c89c17847548">WriteP00header</a>() <span class="comment">//write &#39;C64File&#39; header to file</span></div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;{</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160; <span class="keywordtype">char</span>* P00ID=<span class="stringliteral">&quot;C64File&quot;</span>;</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; <span class="keywordtype">char</span>* SWMextension=<span class="stringliteral">&quot;.SWM&quot;</span>;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; <a class="code" href="stdio_8h.html#a73b65b19805a89f134ac0ee9a4656cc8">fputs</a>(P00ID,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);<a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(0,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160; <a class="code" href="_s_w_mconvert_8c.html#a48c89e7348314ae53287bef6d6edf473">CutExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>); <span class="comment">//remove prg/xm extension , but if .SWM extension is present, it will stay</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; <span class="keywordtype">char</span> * onlyname=<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>; <span class="comment">//init - will contain filename without the folders</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=<a class="code" href="string_8h.html#a2a16e376fdf760ab48963ace1fbd8231">strlen</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>);<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&gt;0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>--) { <span class="keywordflow">if</span>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]==<span class="charliteral">&#39;/&#39;</span> || <a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]==<span class="charliteral">&#39;\\&#39;</span>) {<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++;onlyname=&amp;<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];<span class="keywordflow">break</span>;} } <span class="comment">//skip file-path</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160; <span class="comment">//printf(&quot;\n%s - %s&quot;,OutputFileName,onlyname);</span></div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#a9acad272399839ea9901389ea2eba52b">C64_FILENAME_LENGTH_MAX</a>)&amp;&amp;(onlyname[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="ctype_8h.html#a9f0ca06396b87ad57a4be1648f4367d7">toupper</a>(onlyname[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]),<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; <span class="keywordflow">if</span> ( <a class="code" href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a>(<a class="code" href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a>(<a class="code" href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a>),<span class="stringliteral">&quot;.swm&quot;</span>) || <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>==<a class="code" href="_s_w_mconvert_8c.html#a9acad272399839ea9901389ea2eba52b">C64_FILENAME_LENGTH_MAX</a> )  <span class="comment">//if too long filename, ensure .SWM extension in .P00 file</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  {<a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>,<a class="code" href="string_8h.html#a2a16e376fdf760ab48963ace1fbd8231">strlen</a>(P00ID)+1+12,0); <a class="code" href="stdio_8h.html#a73b65b19805a89f134ac0ee9a4656cc8">fputs</a>(SWMextension,<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); }</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160; <a class="code" href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a>(<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>,<a class="code" href="_s_w_mconvert_8c.html#aeaf69d8f8b3ebfd510b7a5f43ab0c2ee">VICE_P00_OFFSET</a>,0); <span class="comment">//go right after end of .P00 &#39;C64File&#39; header</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;}</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160; </div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;<span class="comment">//----------------------------------------------------------------------</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257"> 2077</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a>()</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;{</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160; <span class="comment">//printf(&quot;\nPress ENTER key...\n\n&quot;);</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; <span class="comment">//getchar();</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;}</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160; </div>
<div class="line"><a name="l02083"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae0fe51430e9cfac621d3d62060dd8f4e"> 2083</a></span>&#160;<span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#ae0fe51430e9cfac621d3d62060dd8f4e">LowByte</a>(<span class="keywordtype">int</span> num) <span class="comment">//returns low-byte of integer</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;{</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160; <span class="keywordflow">return</span> num-(num/256)*256; <span class="comment">//integer division - no need for &#39;floor&#39; function</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;}</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a3d04ecd0ce48798116cec8c952b750d8"> 2088</a></span>&#160;<span class="keywordtype">char</span> <a class="code" href="_s_w_mconvert_8c.html#a3d04ecd0ce48798116cec8c952b750d8">HiByte</a>(<span class="keywordtype">int</span> num) <span class="comment">//returns hi-byte of integer</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;{</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160; <span class="keywordflow">return</span> (num/256); <span class="comment">//integer division - no need for &#39;floor&#39; function</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;}</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160; </div>
<div class="line"><a name="l02093"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861"> 2093</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DataToWrite) <span class="comment">//put word in little-endian to output-file</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;{</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#ae0fe51430e9cfac621d3d62060dd8f4e">LowByte</a>(DataToWrite),<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); </div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; <span class="keywordflow">return</span> <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a3d04ecd0ce48798116cec8c952b750d8">HiByte</a>(DataToWrite),<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>); </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;}</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2"> 2099</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DataToWrite) <span class="comment">//put word in big-endian to output-file</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;{</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160; <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#a3d04ecd0ce48798116cec8c952b750d8">HiByte</a>(DataToWrite),<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);  </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160; <span class="keywordflow">return</span> <a class="code" href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a>(<a class="code" href="_s_w_mconvert_8c.html#ae0fe51430e9cfac621d3d62060dd8f4e">LowByte</a>(DataToWrite),<a class="code" href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a>);</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;}</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4"> 2105</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a>() <span class="comment">//read a little-endian word from input-file</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;{</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160; <span class="keywordflow">return</span> ( <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>) + (<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)*256) );</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;}</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f"> 2110</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a>() <span class="comment">//read a big-endian word from input-file</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;{</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160; <span class="keywordflow">return</span> ( (<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>)*256) + <a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>) );</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;}</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160; </div>
<div class="line"><a name="l02115"></a><span class="lineno"><a class="line" href="_s_w_mconvert_8c.html#ae77bd7aceb642db9e7d94ac748130a87"> 2115</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="_s_w_mconvert_8c.html#ae77bd7aceb642db9e7d94ac748130a87">ReadVarLenNum</a>() <span class="comment">//read variable-length encoded number from the file</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;{</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160; <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> SevenBits, NumberOfDigits; <span class="comment">//hopefully no more than 8 digits exist</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> VarLenNum=0;</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="_s_w_mconvert_8c.html#ace57b458c1b00668b74dae3a5933fe13">MIDI_VLV_LEN_MAX</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) </div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; {</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  SevenBits=<a class="code" href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a>(<a class="code" href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a>);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <a class="code" href="_s_w_mconvert_8c.html#a3c70de86e241b099679ce2782db96d67">Digits</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]=SevenBits&amp;0x7F;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordflow">if</span> ((SevenBits&amp;0x80)==0) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160; }</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; NumberOfDigits=<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160; <span class="keywordflow">for</span>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;=NumberOfDigits; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160; {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  VarLenNum+=((int)pow(128.00,(<span class="keywordtype">float</span>)(NumberOfDigits-<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)) * <a class="code" href="_s_w_mconvert_8c.html#a3c70de86e241b099679ce2782db96d67">Digits</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <span class="comment">//printf(&quot; *%x-%x-%x&quot;,i,Digits[i],(int)pow(128.00,(float)(NumberOfDigits-i)));</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160; }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; <span class="comment">//printf(&quot; %x*&quot;,VarLenNum);</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160; <span class="keywordflow">return</span> VarLenNum;</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;}</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160; </div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="comment">//==============================================================================</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="a_s_w_mconvert_8c_html_a3397d25188f3dd62490958e5a7f86464"><div class="ttname"><a href="_s_w_mconvert_8c.html#a3397d25188f3dd62490958e5a7f86464">XM_INSNAME_SIZE</a></div><div class="ttdeci">#define XM_INSNAME_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00096">SWMconvert.c:96</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a642b99c161076c2e518da025eef0064f"><div class="ttname"><a href="_s_w_mconvert_8c.html#a642b99c161076c2e518da025eef0064f">InputFile</a></div><div class="ttdeci">FILE * InputFile</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00149">SWMconvert.c:149</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a64b112cd45d1a920f2bb617bb0fbd139"><div class="ttname"><a href="_s_w_mconvert_8c.html#a64b112cd45d1a920f2bb617bb0fbd139">XMpatternCount</a></div><div class="ttdeci">unsigned int XMpatternCount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00056">SWMconvert.c:56</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a2379b5bc521862f7b0ec0200f7a7a7e3"><div class="ttname"><a href="_s_w_mconvert_8c.html#a2379b5bc521862f7b0ec0200f7a7a7e3">CurrentTrack</a></div><div class="ttdeci">unsigned char CurrentTrack</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00202">SWMconvert.c:202</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ace9f16ecc6b8bdf14fe8161076832603"><div class="ttname"><a href="_s_w_mconvert_8c.html#ace9f16ecc6b8bdf14fe8161076832603">XM_PATTERNS_MAX</a></div><div class="ttdeci">#define XM_PATTERNS_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00018">SWMconvert.c:18</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad176b83628ff95c278db87fbbdec6135"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad176b83628ff95c278db87fbbdec6135">SWM_bigFX_Oneshot</a></div><div class="ttdeci">unsigned char SWM_bigFX_Oneshot[0x20]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00090">SWMconvert.c:90</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad4c44ea97054d28ea251df647bf6a657"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad4c44ea97054d28ea251df647bf6a657">XM_CHNAMOUNT</a></div><div class="ttdeci">unsigned int XM_CHNAMOUNT</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00024">SWMconvert.c:24</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_aab2463cd078f7c5368f6eb80f5a549b8"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#aab2463cd078f7c5368f6eb80f5a549b8">x2</a></div><div class="ttdeci">x2</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00675">cubase64_1analyzePitch.m:675</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a174bb573c98cb7291511ed53bb562bd0"><div class="ttname"><a href="_s_w_mconvert_8c.html#a174bb573c98cb7291511ed53bb562bd0">XM_Ins</a></div><div class="ttdeci">unsigned char XM_Ins</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00193">SWMconvert.c:193</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a0c66234fe19213461d19aa4d77bdb8ca"><div class="ttname"><a href="_s_w_mconvert_8c.html#a0c66234fe19213461d19aa4d77bdb8ca">XM_FREQTYPE</a></div><div class="ttdeci">unsigned int XM_FREQTYPE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00059">SWMconvert.c:59</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_adc4e477a4e849e60575b4352d19a5471"><div class="ttname"><a href="_s_w_mconvert_8c.html#adc4e477a4e849e60575b4352d19a5471">GerenateSWS</a></div><div class="ttdeci">void GerenateSWS()</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aeca477d7ebb0803e9de6bdd86bea207b"><div class="ttname"><a href="_s_w_mconvert_8c.html#aeca477d7ebb0803e9de6bdd86bea207b">XMtoSWMvibAmp</a></div><div class="ttdeci">unsigned char XMtoSWMvibAmp(unsigned char XMamp)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00205">SWMconvert.c:205</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a453648b4e5c9a92a9166db8107a9b549"><div class="ttname"><a href="_s_w_mconvert_8c.html#a453648b4e5c9a92a9166db8107a9b549">MIDI_TRACK_OFFSET</a></div><div class="ttdeci">unsigned long MIDI_TRACK_OFFSET[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00129">SWMconvert.c:129</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a81a1a8307bdfee429ddfd4bc39e00568"><div class="ttname"><a href="_s_w_mconvert_8c.html#a81a1a8307bdfee429ddfd4bc39e00568">XM_PTNSIZE_OFFSET</a></div><div class="ttdeci">#define XM_PTNSIZE_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00071">SWMconvert.c:71</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a4a6a30f2c83d39671166809b6a5a444e"><div class="ttname"><a href="_s_w_mconvert_8c.html#a4a6a30f2c83d39671166809b6a5a444e">ActNote</a></div><div class="ttdeci">unsigned char ActNote[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00192">SWMconvert.c:192</a></div></div>
<div class="ttc" id="astring_8h_html_a125388aaab8d0424f386e908ae14e97a"><div class="ttname"><a href="string_8h.html#a125388aaab8d0424f386e908ae14e97a">strrchr</a></div><div class="ttdeci">char *__fastcall__ strrchr(const char *s, int c)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a45ddf6fb4bb9aaa8246b61f52c1fb970"><div class="ttname"><a href="_s_w_mconvert_8c.html#a45ddf6fb4bb9aaa8246b61f52c1fb970">XMPATTERNS</a></div><div class="ttdeci">unsigned char XMPATTERNS[XM_PATTERNS_MAX][256 *XM_COL_PER_TRK]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00177">SWMconvert.c:177</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ac2ca7efd41d2925e2bd8db3c74ac854a"><div class="ttname"><a href="_s_w_mconvert_8c.html#ac2ca7efd41d2925e2bd8db3c74ac854a">WFchar</a></div><div class="ttdeci">unsigned char WFchar[16]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00194">SWMconvert.c:194</a></div></div>
<div class="ttc" id="astdio_8h_html_ad2a2e6c114780c3071efd24f16c7f7d8"><div class="ttname"><a href="stdio_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a></div><div class="ttdeci">#define SEEK_END</div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00063">stdio.h:63</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a61fadc6749a3e4de2c4c1fcc8f4accdc"><div class="ttname"><a href="_s_w_mconvert_8c.html#a61fadc6749a3e4de2c4c1fcc8f4accdc">OutputSize</a></div><div class="ttdeci">unsigned int OutputSize</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00151">SWMconvert.c:151</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a5d5b81208e0f49109a96aed961dc82ab"><div class="ttname"><a href="_s_w_mconvert_8c.html#a5d5b81208e0f49109a96aed961dc82ab">MIDI_TRACK_AMOUNT_OFFSET</a></div><div class="ttdeci">#define MIDI_TRACK_AMOUNT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00119">SWMconvert.c:119</a></div></div>
<div class="ttc" id="astring_8h_html_ab208b9c243f0a136d9ad86cd58caeaf7"><div class="ttname"><a href="string_8h.html#ab208b9c243f0a136d9ad86cd58caeaf7">strcpy</a></div><div class="ttdeci">char *__fastcall__ strcpy(char *dest, const char *src)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a39de276f1705512a971ac89ef46494d1"><div class="ttname"><a href="_s_w_mconvert_8c.html#a39de276f1705512a971ac89ef46494d1">SWM_bigFX_NoteResets</a></div><div class="ttdeci">unsigned char SWM_bigFX_NoteResets[0x20]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00091">SWMconvert.c:91</a></div></div>
<div class="ttc" id="actype_8h_html_a9f0ca06396b87ad57a4be1648f4367d7"><div class="ttname"><a href="ctype_8h.html#a9f0ca06396b87ad57a4be1648f4367d7">toupper</a></div><div class="ttdeci">int __fastcall__ toupper(int c)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a9f3aba376a1587c4136b11c3e86ea2a9"><div class="ttname"><a href="_s_w_mconvert_8c.html#a9f3aba376a1587c4136b11c3e86ea2a9">TUNEDATA</a></div><div class="ttdeci">unsigned char TUNEDATA[TUNEDATA_SIZE_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00150">SWMconvert.c:150</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ae9a82ecbd8a64c027f205fa46024af1d"><div class="ttname"><a href="_s_w_mconvert_8c.html#ae9a82ecbd8a64c027f205fa46024af1d">XM_LEGATO_MIN_VAL</a></div><div class="ttdeci">#define XM_LEGATO_MIN_VAL</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00087">SWMconvert.c:87</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a1baadd52d31bcab127954eeeccff46bb"><div class="ttname"><a href="_s_w_mconvert_8c.html#a1baadd52d31bcab127954eeeccff46bb">ChordLen</a></div><div class="ttdeci">unsigned char ChordLen[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00189">SWMconvert.c:189</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a85fa066baaa13af3d17346ea91d5ea7d"><div class="ttname"><a href="_s_w_mconvert_8c.html#a85fa066baaa13af3d17346ea91d5ea7d">XM_PTNAMOUNT_OFFSET</a></div><div class="ttdeci">#define XM_PTNAMOUNT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00055">SWMconvert.c:55</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ab2b7ec9c93bf4d6d90678f689b0f9e45"><div class="ttname"><a href="_s_w_mconvert_8c.html#ab2b7ec9c93bf4d6d90678f689b0f9e45">MIDI_TRACK_ID</a></div><div class="ttdeci">char * MIDI_TRACK_ID</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00126">SWMconvert.c:126</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aec653097046ff24c296d7ea72c3ffecd"><div class="ttname"><a href="_s_w_mconvert_8c.html#aec653097046ff24c296d7ea72c3ffecd">GenerateXM</a></div><div class="ttdeci">void GenerateXM()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00800">SWMconvert.c:800</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a938f4ef45af65ae45439ce34afdc5f0c"><div class="ttname"><a href="_s_w_mconvert_8c.html#a938f4ef45af65ae45439ce34afdc5f0c">TYPE_ID_LENGTH_MAX</a></div><div class="ttdeci">#define TYPE_ID_LENGTH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00017">SWMconvert.c:17</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a30736904d3288886af231d465aa70537"><div class="ttname"><a href="_s_w_mconvert_8c.html#a30736904d3288886af231d465aa70537">XM_PORTAMENTO_FX</a></div><div class="ttdeci">#define XM_PORTAMENTO_FX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00081">SWMconvert.c:81</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad7f5b941aba1d0894088465b84635e4c"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad7f5b941aba1d0894088465b84635e4c">MIDI_DIVISION</a></div><div class="ttdeci">signed int MIDI_DIVISION</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00122">SWMconvert.c:122</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a78cffc27914756c2dca5e953f3719c23"><div class="ttname"><a href="_s_w_mconvert_8c.html#a78cffc27914756c2dca5e953f3719c23">XM_VERSION</a></div><div class="ttdeci">unsigned int XM_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00047">SWMconvert.c:47</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7a043b0c9447024b12a51a0435ff7433"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7a043b0c9447024b12a51a0435ff7433">AUTHORINFO</a></div><div class="ttdeci">char AUTHORINFO[256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00157">SWMconvert.c:157</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a912afc5e254350520950829159d2bc71"><div class="ttname"><a href="_s_w_mconvert_8c.html#a912afc5e254350520950829159d2bc71">XM_PACKTYPE</a></div><div class="ttdeci">#define XM_PACKTYPE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00069">SWMconvert.c:69</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a9acad272399839ea9901389ea2eba52b"><div class="ttname"><a href="_s_w_mconvert_8c.html#a9acad272399839ea9901389ea2eba52b">C64_FILENAME_LENGTH_MAX</a></div><div class="ttdeci">#define C64_FILENAME_LENGTH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00014">SWMconvert.c:14</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a98d8cc2a1ce7509b02901e94e65a5c22"><div class="ttname"><a href="_s_w_mconvert_8c.html#a98d8cc2a1ce7509b02901e94e65a5c22">XM_NOTE_PACKSIGN</a></div><div class="ttdeci">#define XM_NOTE_PACKSIGN</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00075">SWMconvert.c:75</a></div></div>
<div class="ttc" id="astring_8h_html"><div class="ttname"><a href="string_8h.html">string.h</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7cf74bef6a3633682b6adc585f00ba05"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7cf74bef6a3633682b6adc585f00ba05">SampleLoopPos</a></div><div class="ttdeci">unsigned long int SampleLoopPos</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00156">SWMconvert.c:156</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_adb50d199b0acc7cab403bb6ff8a0e7e3"><div class="ttname"><a href="_s_w_mconvert_8c.html#adb50d199b0acc7cab403bb6ff8a0e7e3">MIDIvelos</a></div><div class="ttdeci">unsigned char MIDIvelos[MIDI_CHANNELS_MAX][MIDI_TRACKLEN_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00199">SWMconvert.c:199</a></div></div>
<div class="ttc" id="astdio_8h_html_a1a375a59f46135df8271bb90ff0e9df5"><div class="ttname"><a href="stdio_8h.html#a1a375a59f46135df8271bb90ff0e9df5">fputc</a></div><div class="ttdeci">int __fastcall__ fputc(int c, FILE *f)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a5482e2ebdcbbc3e6c920b4850af9bf64"><div class="ttname"><a href="_s_w_mconvert_8c.html#a5482e2ebdcbbc3e6c920b4850af9bf64">PATTERNLENGTHS</a></div><div class="ttdeci">unsigned char PATTERNLENGTHS[256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00165">SWMconvert.c:165</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a20b4ab4046f4bdeb8a4304158efdd1c0"><div class="ttname"><a href="_s_w_mconvert_8c.html#a20b4ab4046f4bdeb8a4304158efdd1c0">XMrestartPos</a></div><div class="ttdeci">unsigned int XMrestartPos</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00053">SWMconvert.c:53</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a84806d1606a62ee4fc4e7f34dcdb537a"><div class="ttname"><a href="_s_w_mconvert_8c.html#a84806d1606a62ee4fc4e7f34dcdb537a">OutputFile</a></div><div class="ttdeci">FILE * OutputFile</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00149">SWMconvert.c:149</a></div></div>
<div class="ttc" id="astring_8h_html_ae8347fc7f4dfdebcebe5d11c5b4e4d69"><div class="ttname"><a href="string_8h.html#ae8347fc7f4dfdebcebe5d11c5b4e4d69">strcmp</a></div><div class="ttdeci">int __fastcall__ strcmp(const char *s1, const char *s2)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a1e95cfaa4d03cafbe95c0215cf55eb9c"><div class="ttname"><a href="_s_w_mconvert_8c.html#a1e95cfaa4d03cafbe95c0215cf55eb9c">ProcessMIDI</a></div><div class="ttdeci">void ProcessMIDI()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01394">SWMconvert.c:1394</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aaa2f4b5d69c129bca71cff7e5fd67ee6"><div class="ttname"><a href="_s_w_mconvert_8c.html#aaa2f4b5d69c129bca71cff7e5fd67ee6">DECAY_RELEASE_MaxTimes</a></div><div class="ttdeci">unsigned int DECAY_RELEASE_MaxTimes[16]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00107">SWMconvert.c:107</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a61338dadbc9cf7a4216e40106eb6e640"><div class="ttname"><a href="_s_w_mconvert_8c.html#a61338dadbc9cf7a4216e40106eb6e640">XM_Fx</a></div><div class="ttdeci">unsigned char XM_Fx</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00193">SWMconvert.c:193</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a0bda1eaf737f1a78d5b861ec41b186b9"><div class="ttname"><a href="_s_w_mconvert_8c.html#a0bda1eaf737f1a78d5b861ec41b186b9">ProcessXM</a></div><div class="ttdeci">void ProcessXM()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01176">SWMconvert.c:1176</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a37490d39a196005c60af61f6ecfa2fe3"><div class="ttname"><a href="_s_w_mconvert_8c.html#a37490d39a196005c60af61f6ecfa2fe3">OutputFileName</a></div><div class="ttdeci">char OutputFileName[FILENAME_LENGTH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00148">SWMconvert.c:148</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a48c89e7348314ae53287bef6d6edf473"><div class="ttname"><a href="_s_w_mconvert_8c.html#a48c89e7348314ae53287bef6d6edf473">CutExt</a></div><div class="ttdeci">void CutExt(char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02055">SWMconvert.c:2055</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a69a754ca12a45bb3156b1ef9e5f45aab"><div class="ttname"><a href="_s_w_mconvert_8c.html#a69a754ca12a45bb3156b1ef9e5f45aab">ActInsFx</a></div><div class="ttdeci">unsigned char ActInsFx[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00192">SWMconvert.c:192</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad01567796372a36966286ebb5f531e5e"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad01567796372a36966286ebb5f531e5e">InstAmount</a></div><div class="ttdeci">unsigned int InstAmount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00154">SWMconvert.c:154</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ae749e9d9edadd4f67b5df214c88a6c2f"><div class="ttname"><a href="_s_w_mconvert_8c.html#ae749e9d9edadd4f67b5df214c88a6c2f">BEwordFromFile</a></div><div class="ttdeci">unsigned int BEwordFromFile()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02110">SWMconvert.c:2110</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_af25b0aaf8fe479fc931984be72d15e27"><div class="ttname"><a href="_s_w_mconvert_8c.html#af25b0aaf8fe479fc931984be72d15e27">ADSRpoint</a></div><div class="ttdeci">unsigned int ADSRpoint</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00191">SWMconvert.c:191</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aca1d7ace35bd89dd40c860b3d4b88ffe"><div class="ttname"><a href="_s_w_mconvert_8c.html#aca1d7ace35bd89dd40c860b3d4b88ffe">XM_RESTARTPOS_OFFSET</a></div><div class="ttdeci">#define XM_RESTARTPOS_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00052">SWMconvert.c:52</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad0e58bd8ca20811c1b9ad7230577b28b"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad0e58bd8ca20811c1b9ad7230577b28b">TYPE_ID_LENGTH</a></div><div class="ttdeci">unsigned int TYPE_ID_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00152">SWMconvert.c:152</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa646a10ff302610e2f6401f063099b96"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa646a10ff302610e2f6401f063099b96">XM_ID_OFFSET</a></div><div class="ttdeci">#define XM_ID_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00037">SWMconvert.c:37</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a8471ef1fc2e359bf5138a7517d543f81"><div class="ttname"><a href="_s_w_mconvert_8c.html#a8471ef1fc2e359bf5138a7517d543f81">TUNEDATA_SIZE_MAX</a></div><div class="ttdeci">#define TUNEDATA_SIZE_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00015">SWMconvert.c:15</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a3d04ecd0ce48798116cec8c952b750d8"><div class="ttname"><a href="_s_w_mconvert_8c.html#a3d04ecd0ce48798116cec8c952b750d8">HiByte</a></div><div class="ttdeci">char HiByte(int num)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02088">SWMconvert.c:2088</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a52a384d562ca04e397ba8a2f5c7f3ba4"><div class="ttname"><a href="_s_w_mconvert_8c.html#a52a384d562ca04e397ba8a2f5c7f3ba4">InputTypeID</a></div><div class="ttdeci">char InputTypeID[TYPE_ID_LENGTH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00147">SWMconvert.c:147</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a327b44943d537204b35d9730f0714e99"><div class="ttname"><a href="_s_w_mconvert_8c.html#a327b44943d537204b35d9730f0714e99">XM_CHNAMOUNT_OFFSET</a></div><div class="ttdeci">#define XM_CHNAMOUNT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00054">SWMconvert.c:54</a></div></div>
<div class="ttc" id="astdio_8h_html_aef2371f3bdebc43f05c4fe8e892dde1c"><div class="ttname"><a href="stdio_8h.html#aef2371f3bdebc43f05c4fe8e892dde1c">fread</a></div><div class="ttdeci">size_t __fastcall__ fread(void *buf, size_t size, size_t count, FILE *f)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a087734d96733877941d1e3ae24244aa0"><div class="ttname"><a href="_s_w_mconvert_8c.html#a087734d96733877941d1e3ae24244aa0">XM_COL_PER_TRK</a></div><div class="ttdeci">#define XM_COL_PER_TRK</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00025">SWMconvert.c:25</a></div></div>
<div class="ttc" id="acubase64__4encode_waveforms_8m_html_a2077ef4250727e426b5a8123517ed352"><div class="ttname"><a href="cubase64__4encode_waveforms_8m.html#a2077ef4250727e426b5a8123517ed352">else</a></div><div class="ttdeci">This is too bad Should do something else</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__4encode_waveforms_8m_source.html#l00265">cubase64_4encodeWaveforms.m:265</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa9cb0dc94254b49a296fc8daa58b0cc3"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa9cb0dc94254b49a296fc8daa58b0cc3">XMpattTranspose</a></div><div class="ttdeci">unsigned char XMpattTranspose[SID_CHNAMOUNT][256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00174">SWMconvert.c:174</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa837ec173854101cd8d5fb0a0be16e76"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa837ec173854101cd8d5fb0a0be16e76">SWMpattPointer</a></div><div class="ttdeci">unsigned char SWMpattPointer[SID_CHNAMOUNT]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00183">SWMconvert.c:183</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7796645a162efd545d6f1bddd74681d4"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7796645a162efd545d6f1bddd74681d4">DECAYtoXMtime</a></div><div class="ttdeci">unsigned int DECAYtoXMtime(unsigned int DecayNibble, float SustainNibble)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02008">SWMconvert.c:2008</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a84b9490602cf43ce50b57c08fdf9c693"><div class="ttname"><a href="_s_w_mconvert_8c.html#a84b9490602cf43ce50b57c08fdf9c693">ActFxVal</a></div><div class="ttdeci">unsigned char ActFxVal[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00192">SWMconvert.c:192</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a0643471d94d14e02058a9c69b918e1a5"><div class="ttname"><a href="_s_w_mconvert_8c.html#a0643471d94d14e02058a9c69b918e1a5">XM_TRACKERNAME_SIZE</a></div><div class="ttdeci">#define XM_TRACKERNAME_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00045">SWMconvert.c:45</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a14e5bcd30612b6a5379805f296623bc5"><div class="ttname"><a href="_s_w_mconvert_8c.html#a14e5bcd30612b6a5379805f296623bc5">PatternAmount</a></div><div class="ttdeci">unsigned int PatternAmount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00154">SWMconvert.c:154</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a5699d8f6565bc21ef40fbe8b3cc577a5"><div class="ttname"><a href="_s_w_mconvert_8c.html#a5699d8f6565bc21ef40fbe8b3cc577a5">XM_ID_SIZE</a></div><div class="ttdeci">#define XM_ID_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00039">SWMconvert.c:39</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a087c8ae400dd7d3bb08b573ecded83c4"><div class="ttname"><a href="_s_w_mconvert_8c.html#a087c8ae400dd7d3bb08b573ecded83c4">DisplayInputInfo</a></div><div class="ttdeci">void DisplayInputInfo()</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ab0162de92e566fd007cceb5009bd4df3"><div class="ttname"><a href="_s_w_mconvert_8c.html#ab0162de92e566fd007cceb5009bd4df3">XMinsVibAmp</a></div><div class="ttdeci">unsigned char XMinsVibAmp[XM_INSTRUMENTS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00179">SWMconvert.c:179</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a80cdd42f08bb09b588d6712776c15742"><div class="ttname"><a href="_s_w_mconvert_8c.html#a80cdd42f08bb09b588d6712776c15742">SequenceAmount</a></div><div class="ttdeci">unsigned int SequenceAmount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00154">SWMconvert.c:154</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aca8507ed60262241ee552272343526c7"><div class="ttname"><a href="_s_w_mconvert_8c.html#aca8507ed60262241ee552272343526c7">CHORDS</a></div><div class="ttdeci">unsigned char CHORDS[256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00188">SWMconvert.c:188</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a8992a840970af64a8ea04118358aa040"><div class="ttname"><a href="_s_w_mconvert_8c.html#a8992a840970af64a8ea04118358aa040">MIDI_HEADERSIZE</a></div><div class="ttdeci">unsigned char MIDI_HEADERSIZE[4]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00116">SWMconvert.c:116</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_abdc9f8a3f0edf40f0cc7fd6276e8c8f4"><div class="ttname"><a href="_s_w_mconvert_8c.html#abdc9f8a3f0edf40f0cc7fd6276e8c8f4">XM_MAIN_TEMPO_FX</a></div><div class="ttdeci">#define XM_MAIN_TEMPO_FX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00084">SWMconvert.c:84</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a424cb638a6de2a13a222893dd3fffff9"><div class="ttname"><a href="_s_w_mconvert_8c.html#a424cb638a6de2a13a222893dd3fffff9">TYPE_ID_OFFSET</a></div><div class="ttdeci">unsigned int TYPE_ID_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00152">SWMconvert.c:152</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa66341f074527c0dafbfb6fe472a3068"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa66341f074527c0dafbfb6fe472a3068">XM_DEFTEMPO_OFFSET</a></div><div class="ttdeci">#define XM_DEFTEMPO_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00060">SWMconvert.c:60</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a8403de6934dc4f7d7a12f701a2b4ba12"><div class="ttname"><a href="_s_w_mconvert_8c.html#a8403de6934dc4f7d7a12f701a2b4ba12">XM_HEADERSIZE</a></div><div class="ttdeci">unsigned char XM_HEADERSIZE[4]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00049">SWMconvert.c:49</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad991549b595f24c3f6d0d2014ddfb3a3"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad991549b595f24c3f6d0d2014ddfb3a3">XMpatternLen</a></div><div class="ttdeci">unsigned int XMpatternLen[XM_PATTERNS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00168">SWMconvert.c:168</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ab6de30d2ae653b5aaabaee15396ac8b0"><div class="ttname"><a href="_s_w_mconvert_8c.html#ab6de30d2ae653b5aaabaee15396ac8b0">INSTNAMES</a></div><div class="ttdeci">unsigned char INSTNAMES[64][32]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00187">SWMconvert.c:187</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a85264ba3423d8123833745f7a9816314"><div class="ttname"><a href="_s_w_mconvert_8c.html#a85264ba3423d8123833745f7a9816314">XM_MAIN_VOL_FX</a></div><div class="ttdeci">#define XM_MAIN_VOL_FX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00085">SWMconvert.c:85</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ac9db4d2a92c8d00f99e2bbb919e6b2f5"><div class="ttname"><a href="_s_w_mconvert_8c.html#ac9db4d2a92c8d00f99e2bbb919e6b2f5">XMinsDecay</a></div><div class="ttdeci">unsigned int XMinsDecay[XM_INSTRUMENTS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00181">SWMconvert.c:181</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a4050eb1e64b874341e34c89c17847548"><div class="ttname"><a href="_s_w_mconvert_8c.html#a4050eb1e64b874341e34c89c17847548">WriteP00header</a></div><div class="ttdeci">void WriteP00header()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02060">SWMconvert.c:2060</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aef87eaee7ea37b658fee72fdd151484b"><div class="ttname"><a href="_s_w_mconvert_8c.html#aef87eaee7ea37b658fee72fdd151484b">SWM_ID</a></div><div class="ttdeci">char * SWM_ID</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00033">SWMconvert.c:33</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a428b13cc3490177eefdec7664dcded6e"><div class="ttname"><a href="_s_w_mconvert_8c.html#a428b13cc3490177eefdec7664dcded6e">XM_FxVal</a></div><div class="ttdeci">unsigned char XM_FxVal</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00193">SWMconvert.c:193</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a51ff3fec354cf2977cb012fd711adda1"><div class="ttname"><a href="_s_w_mconvert_8c.html#a51ff3fec354cf2977cb012fd711adda1">XMtoSWMslide</a></div><div class="ttdeci">unsigned char XMtoSWMslide(unsigned char XMslide)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01985">SWMconvert.c:1985</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a3c70de86e241b099679ce2782db96d67"><div class="ttname"><a href="_s_w_mconvert_8c.html#a3c70de86e241b099679ce2782db96d67">Digits</a></div><div class="ttdeci">unsigned char Digits[MIDI_VLV_LEN_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00201">SWMconvert.c:201</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a424f1eb6ce3cfd7defa70dbd5be299e0"><div class="ttname"><a href="_s_w_mconvert_8c.html#a424f1eb6ce3cfd7defa70dbd5be299e0">SWMtoXMvibFreq</a></div><div class="ttdeci">unsigned char SWMtoXMvibFreq[16]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00204">SWMconvert.c:204</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a25f94dfcc2b30a42aec1cff899cfb7c3"><div class="ttname"><a href="_s_w_mconvert_8c.html#a25f94dfcc2b30a42aec1cff899cfb7c3">XM_DEFAUBPM</a></div><div class="ttdeci">unsigned int XM_DEFAUBPM</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00062">SWMconvert.c:62</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a08d399b22d86a0ff5a9350140eaa2934"><div class="ttname"><a href="_s_w_mconvert_8c.html#a08d399b22d86a0ff5a9350140eaa2934">XMinstAmount</a></div><div class="ttdeci">unsigned int XMinstAmount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00155">SWMconvert.c:155</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a5ca70a2c9de78651a100422b35bb18d8"><div class="ttname"><a href="_s_w_mconvert_8c.html#a5ca70a2c9de78651a100422b35bb18d8">SWM_SEQ_TOP</a></div><div class="ttdeci">unsigned int SWM_SEQ_TOP</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00160">SWMconvert.c:160</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa12020586c748b15b0f642e011dd4ea8"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa12020586c748b15b0f642e011dd4ea8">XMtoSWMvibFreq</a></div><div class="ttdeci">unsigned char XMtoSWMvibFreq(unsigned char XMvib)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00211">SWMconvert.c:211</a></div></div>
<div class="ttc" id="actype_8h_html"><div class="ttname"><a href="ctype_8h.html">ctype.h</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a181cd98f6dfc42bf4944a66066a61f30"><div class="ttname"><a href="_s_w_mconvert_8c.html#a181cd98f6dfc42bf4944a66066a61f30">LoopLength</a></div><div class="ttdeci">unsigned long int LoopLength</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00156">SWMconvert.c:156</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a8c481f6c4a5917d2e2f20be7ba51c677"><div class="ttname"><a href="_s_w_mconvert_8c.html#a8c481f6c4a5917d2e2f20be7ba51c677">ChordIns</a></div><div class="ttdeci">unsigned char ChordIns[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00186">SWMconvert.c:186</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a98538e8253233a0a20ab6ccc15aa88c6"><div class="ttname"><a href="_s_w_mconvert_8c.html#a98538e8253233a0a20ab6ccc15aa88c6">ActIns</a></div><div class="ttdeci">unsigned char ActIns[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00192">SWMconvert.c:192</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a72df2e6479658f76c0401c0e24de7b99"><div class="ttname"><a href="_s_w_mconvert_8c.html#a72df2e6479658f76c0401c0e24de7b99">XM_HEADERSIZE_OFFSET</a></div><div class="ttdeci">#define XM_HEADERSIZE_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00048">SWMconvert.c:48</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a1fa27a13162c097fe17bf3baeb003230"><div class="ttname"><a href="_s_w_mconvert_8c.html#a1fa27a13162c097fe17bf3baeb003230">ChangeExt</a></div><div class="ttdeci">void ChangeExt(char *filename, char *newExt)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02049">SWMconvert.c:2049</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7a7241774dc160d2ddd1d65f858a0802"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7a7241774dc160d2ddd1d65f858a0802">XMseqPos</a></div><div class="ttdeci">unsigned char XMseqPos[256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00172">SWMconvert.c:172</a></div></div>
<div class="ttc" id="astring_8h_html_a8ae2a657b19c6f41114182c286a59661"><div class="ttname"><a href="string_8h.html#a8ae2a657b19c6f41114182c286a59661">strncpy</a></div><div class="ttdeci">char *__fastcall__ strncpy(char *dest, const char *src, size_t count)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a9fc2f922fb82ebfb3fa9d15a0244c903"><div class="ttname"><a href="_s_w_mconvert_8c.html#a9fc2f922fb82ebfb3fa9d15a0244c903">SmallFxConvTable</a></div><div class="ttdeci">unsigned char SmallFxConvTable[0x10]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00089">SWMconvert.c:89</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ada5f18da7af755dd8992ffee7d41dd84"><div class="ttname"><a href="_s_w_mconvert_8c.html#ada5f18da7af755dd8992ffee7d41dd84">CHORD_SILENCER_RATIO</a></div><div class="ttdeci">#define CHORD_SILENCER_RATIO</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00030">SWMconvert.c:30</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aaa5828f4c5641f663a53b171eca36033"><div class="ttname"><a href="_s_w_mconvert_8c.html#aaa5828f4c5641f663a53b171eca36033">XM_VERSION_OFFSET</a></div><div class="ttdeci">#define XM_VERSION_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00046">SWMconvert.c:46</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a6deea02a3a06869ccdeb1fdc3adee0c0"><div class="ttname"><a href="_s_w_mconvert_8c.html#a6deea02a3a06869ccdeb1fdc3adee0c0">ProcessSWMver1</a></div><div class="ttdeci">void ProcessSWMver1()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00537">SWMconvert.c:537</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a8469db01dfcd321748eb386dc3913632"><div class="ttname"><a href="_s_w_mconvert_8c.html#a8469db01dfcd321748eb386dc3913632">BigFxConvTable</a></div><div class="ttdeci">unsigned char BigFxConvTable[0x20]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00088">SWMconvert.c:88</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a313a2a228e7c8de38d4d3acfb9cbd84b"><div class="ttname"><a href="_s_w_mconvert_8c.html#a313a2a228e7c8de38d4d3acfb9cbd84b">MIDI_TRACKLEN_MAX</a></div><div class="ttdeci">#define MIDI_TRACKLEN_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00021">SWMconvert.c:21</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aeaf7e6bae86a2f31c521794796bc10d2"><div class="ttname"><a href="_s_w_mconvert_8c.html#aeaf7e6bae86a2f31c521794796bc10d2">SWMseqLength</a></div><div class="ttdeci">unsigned int SWMseqLength[SID_CHNAMOUNT]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00191">SWMconvert.c:191</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a9cb1e5e8080b662dd8a81b1354f383ea"><div class="ttname"><a href="_s_w_mconvert_8c.html#a9cb1e5e8080b662dd8a81b1354f383ea">SEQUENCES</a></div><div class="ttdeci">unsigned char SEQUENCES[32 *SID_CHNAMOUNT][256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00158">SWMconvert.c:158</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="_s_w_mconvert_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00240">SWMconvert.c:240</a></div></div>
<div class="ttc" id="astdio_8h_html_a175abb747ea3b78aa8da87355dcec473"><div class="ttname"><a href="stdio_8h.html#a175abb747ea3b78aa8da87355dcec473">FILE</a></div><div class="ttdeci">struct _FILE FILE</div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00047">stdio.h:47</a></div></div>
<div class="ttc" id="astdio_8h_html_a0d112bae8fd35be772185b6ec6bcbe64"><div class="ttname"><a href="stdio_8h.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a></div><div class="ttdeci">#define SEEK_SET</div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00064">stdio.h:64</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa51291520cdb9b37ed150ff812d9b835"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa51291520cdb9b37ed150ff812d9b835">PATTERNS</a></div><div class="ttdeci">unsigned char PATTERNS[256][256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00162">SWMconvert.c:162</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad93ada6ef92ad83185cb30797d3c0581"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad93ada6ef92ad83185cb30797d3c0581">XMsongLength</a></div><div class="ttdeci">unsigned int XMsongLength</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00051">SWMconvert.c:51</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_afcc61954cc04271afc7cd8a498c69207"><div class="ttname"><a href="_s_w_mconvert_8c.html#afcc61954cc04271afc7cd8a498c69207">SWMpatternCount</a></div><div class="ttdeci">unsigned int SWMpatternCount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00191">SWMconvert.c:191</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad806a9cf90d874a6e0ed78b95bb552f0"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad806a9cf90d874a6e0ed78b95bb552f0">ConvertTune</a></div><div class="ttdeci">void ConvertTune()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00387">SWMconvert.c:387</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a9974191ef2cd9d843a1b43bf38059624"><div class="ttname"><a href="_s_w_mconvert_8c.html#a9974191ef2cd9d843a1b43bf38059624">XMpatternOffset</a></div><div class="ttdeci">unsigned long XMpatternOffset[XM_PATTERNS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00167">SWMconvert.c:167</a></div></div>
<div class="ttc" id="astdio_8h_html_a73b65b19805a89f134ac0ee9a4656cc8"><div class="ttname"><a href="stdio_8h.html#a73b65b19805a89f134ac0ee9a4656cc8">fputs</a></div><div class="ttdeci">int __fastcall__ fputs(const char *s, FILE *f)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a3592734038adbd15e3dce890bccdccea"><div class="ttname"><a href="_s_w_mconvert_8c.html#a3592734038adbd15e3dce890bccdccea">OKtrk</a></div><div class="ttdeci">unsigned int OKtrk[MIDI_CHANNELS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00200">SWMconvert.c:200</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_af9b3b07a58c48af946c349d974c266c0"><div class="ttname"><a href="_s_w_mconvert_8c.html#af9b3b07a58c48af946c349d974c266c0">MIDI_VERSION_OFFSET</a></div><div class="ttdeci">#define MIDI_VERSION_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00117">SWMconvert.c:117</a></div></div>
<div class="ttc" id="astdlib_8h_html_acaa8b197cd921cecb79810434243beab"><div class="ttname"><a href="stdlib_8h.html#acaa8b197cd921cecb79810434243beab">exit</a></div><div class="ttdeci">void __fastcall__ exit(int ret) __attribute__((noreturn))</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a4175e20e436f98b28da338ae5114c911"><div class="ttname"><a href="_s_w_mconvert_8c.html#a4175e20e436f98b28da338ae5114c911">XM_ID</a></div><div class="ttdeci">char * XM_ID</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00038">SWMconvert.c:38</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a8deb684bb9ad43e3b8051232d07cafa2"><div class="ttname"><a href="_s_w_mconvert_8c.html#a8deb684bb9ad43e3b8051232d07cafa2">BEwordToFile</a></div><div class="ttdeci">int BEwordToFile(unsigned int DataToWrite)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02099">SWMconvert.c:2099</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a1d5564f744c81832b17112728fc399ad"><div class="ttname"><a href="_s_w_mconvert_8c.html#a1d5564f744c81832b17112728fc399ad">XM_PTNROWS_OFFSET</a></div><div class="ttdeci">#define XM_PTNROWS_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00070">SWMconvert.c:70</a></div></div>
<div class="ttc" id="actype_8h_html_a6c87523fdad41bc18c94f4f0296718ac"><div class="ttname"><a href="ctype_8h.html#a6c87523fdad41bc18c94f4f0296718ac">tolower</a></div><div class="ttdeci">int __fastcall__ tolower(int c)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_af3e0593d50d9093b9b7ad05a8db6dd53"><div class="ttname"><a href="_s_w_mconvert_8c.html#af3e0593d50d9093b9b7ad05a8db6dd53">MIDItrkIndex</a></div><div class="ttdeci">unsigned int MIDItrkIndex[MIDI_CHANNELS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00200">SWMconvert.c:200</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a2bd069bb70f23e6e4686228250486861"><div class="ttname"><a href="_s_w_mconvert_8c.html#a2bd069bb70f23e6e4686228250486861">LEwordToFile</a></div><div class="ttdeci">int LEwordToFile(unsigned int DataToWrite)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02093">SWMconvert.c:2093</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ae2fdf0115609f5959a5551661f2d5954"><div class="ttname"><a href="_s_w_mconvert_8c.html#ae2fdf0115609f5959a5551661f2d5954">XM_LEGATO_FXVALUE</a></div><div class="ttdeci">#define XM_LEGATO_FXVALUE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00086">SWMconvert.c:86</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a74694d91412b77b195d6221239507cd4"><div class="ttname"><a href="_s_w_mconvert_8c.html#a74694d91412b77b195d6221239507cd4">MIDI_CHANNELS_MAX</a></div><div class="ttdeci">#define MIDI_CHANNELS_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00020">SWMconvert.c:20</a></div></div>
<div class="ttc" id="astring_8h_html_ac53e1d2254540a39fafd7f5920821d52"><div class="ttname"><a href="string_8h.html#ac53e1d2254540a39fafd7f5920821d52">strcat</a></div><div class="ttdeci">char *__fastcall__ strcat(char *dest, const char *src)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ae0fe51430e9cfac621d3d62060dd8f4e"><div class="ttname"><a href="_s_w_mconvert_8c.html#ae0fe51430e9cfac621d3d62060dd8f4e">LowByte</a></div><div class="ttdeci">char LowByte(int num)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02083">SWMconvert.c:2083</a></div></div>
<div class="ttc" id="agconst_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="gconst_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="gconst_8h_source.html#l00012">gconst.h:12</a></div></div>
<div class="ttc" id="astdio_8h_html"><div class="ttname"><a href="stdio_8h.html">stdio.h</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a27259a00e908a00c48b0c7a488bc16c6"><div class="ttname"><a href="_s_w_mconvert_8c.html#a27259a00e908a00c48b0c7a488bc16c6">ColumnCount</a></div><div class="ttdeci">unsigned int ColumnCount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00191">SWMconvert.c:191</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ab36e44357aaae329cf284dd55502238b"><div class="ttname"><a href="_s_w_mconvert_8c.html#ab36e44357aaae329cf284dd55502238b">XM_SONGLENGTH_OFFSET</a></div><div class="ttdeci">#define XM_SONGLENGTH_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00050">SWMconvert.c:50</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a6c271f897933949b788a85db12f161dd"><div class="ttname"><a href="_s_w_mconvert_8c.html#a6c271f897933949b788a85db12f161dd">XMinsRelease</a></div><div class="ttdeci">unsigned int XMinsRelease[XM_INSTRUMENTS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00181">SWMconvert.c:181</a></div></div>
<div class="ttc" id="astdio_8h_html_a4c8d0b76b470ba65a43ca46a88320f39"><div class="ttname"><a href="stdio_8h.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a></div><div class="ttdeci">#define SEEK_CUR</div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00062">stdio.h:62</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_abe701e33917c61bfffabe0c84f389113"><div class="ttname"><a href="_s_w_mconvert_8c.html#abe701e33917c61bfffabe0c84f389113">ProcessInput</a></div><div class="ttdeci">void ProcessInput()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00290">SWMconvert.c:290</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a604e1aa9b57a04a3c0bcbe31c4ddcf37"><div class="ttname"><a href="_s_w_mconvert_8c.html#a604e1aa9b57a04a3c0bcbe31c4ddcf37">PATTERNSIZES</a></div><div class="ttdeci">unsigned char PATTERNSIZES[256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00163">SWMconvert.c:163</a></div></div>
<div class="ttc" id="astdio_8h_html_a59adc4c82490d23754cd39c2fb99b0da"><div class="ttname"><a href="stdio_8h.html#a59adc4c82490d23754cd39c2fb99b0da">EOF</a></div><div class="ttdeci">#define EOF</div><div class="ttdef"><b>Definition:</b> <a href="stdio_8h_source.html#l00060">stdio.h:60</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ac79ae9da647a56348bbafd411f023250"><div class="ttname"><a href="_s_w_mconvert_8c.html#ac79ae9da647a56348bbafd411f023250">SWM_SEQ_SIZE</a></div><div class="ttdeci">unsigned char SWM_SEQ_SIZE[256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00159">SWMconvert.c:159</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aae708432d21a3fdcee92bb310bafbd12"><div class="ttname"><a href="_s_w_mconvert_8c.html#aae708432d21a3fdcee92bb310bafbd12">XM_1X_PERIOD</a></div><div class="ttdeci">#define XM_1X_PERIOD</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00104">SWMconvert.c:104</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a558813ed43d7430a63bbb702afdf0487"><div class="ttname"><a href="_s_w_mconvert_8c.html#a558813ed43d7430a63bbb702afdf0487">DECAYtoSWMtime</a></div><div class="ttdeci">unsigned char DECAYtoSWMtime(unsigned int XMdecay, unsigned char XMsustain)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02013">SWMconvert.c:2013</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a90ca67c924bf42426503c50f2153e786"><div class="ttname"><a href="_s_w_mconvert_8c.html#a90ca67c924bf42426503c50f2153e786">GenerateSWM</a></div><div class="ttdeci">void GenerateSWM()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01717">SWMconvert.c:1717</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ac519cbf1b6d8a80cebf83516045c607b"><div class="ttname"><a href="_s_w_mconvert_8c.html#ac519cbf1b6d8a80cebf83516045c607b">FilExt</a></div><div class="ttdeci">char * FilExt(char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02042">SWMconvert.c:2042</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa6af7d8e3cec1e9ac5d4e9f8e87b4ff5">XM_GATEOFF_VALUE</a></div><div class="ttdeci">#define XM_GATEOFF_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00080">SWMconvert.c:80</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a57356a6758396b1dceb0b0d082a3d026"><div class="ttname"><a href="_s_w_mconvert_8c.html#a57356a6758396b1dceb0b0d082a3d026">GenerateSWS</a></div><div class="ttdeci">void GenerateSWS()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00329">SWMconvert.c:329</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa0b6d00d8d0c2fe0e299c7f5dfef863c"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa0b6d00d8d0c2fe0e299c7f5dfef863c">SWM_C5_NOTE_VALUE</a></div><div class="ttdeci">#define SWM_C5_NOTE_VALUE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00103">SWMconvert.c:103</a></div></div>
<div class="ttc" id="astdio_8h_html_adc8d25c6cde0cc64f81f0faef22fb7ba"><div class="ttname"><a href="stdio_8h.html#adc8d25c6cde0cc64f81f0faef22fb7ba">fopen</a></div><div class="ttdeci">FILE *__fastcall__ fopen(const char *name, const char *mode)</div></div>
<div class="ttc" id="astdio_8h_html_a3e29caa20f7cffe18f410f01278905a8"><div class="ttname"><a href="stdio_8h.html#a3e29caa20f7cffe18f410f01278905a8">getchar</a></div><div class="ttdeci">int getchar(void)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a1168facedca4805a2bcc17870ecf82f4"><div class="ttname"><a href="_s_w_mconvert_8c.html#a1168facedca4805a2bcc17870ecf82f4">XM_C4_NOTE_PERIOD</a></div><div class="ttdeci">#define XM_C4_NOTE_PERIOD</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00102">SWMconvert.c:102</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a000ec550efb8715efa0fd920ca2b51d8"><div class="ttname"><a href="_s_w_mconvert_8c.html#a000ec550efb8715efa0fd920ca2b51d8">MIDItempo</a></div><div class="ttdeci">unsigned int MIDItempo</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00200">SWMconvert.c:200</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a3a780c23caed8c11c27d32938b966209"><div class="ttname"><a href="_s_w_mconvert_8c.html#a3a780c23caed8c11c27d32938b966209">XMinsTransp</a></div><div class="ttdeci">signed char XMinsTransp[XM_INSTRUMENTS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00182">SWMconvert.c:182</a></div></div>
<div class="ttc" id="astdio_8h_html_ab80c528a844501e0400dee07e44d5cfd"><div class="ttname"><a href="stdio_8h.html#ab80c528a844501e0400dee07e44d5cfd">fgets</a></div><div class="ttdeci">char *__fastcall__ fgets(char *buf, size_t size, FILE *f)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad74fdefadf177f019307c59e38ed1ce6"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad74fdefadf177f019307c59e38ed1ce6">ChordIndex</a></div><div class="ttdeci">unsigned char ChordIndex[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00190">SWMconvert.c:190</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa35211353e34ab42661c1a8a9b7b05a1"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa35211353e34ab42661c1a8a9b7b05a1">XM_TITLE_SIZE</a></div><div class="ttdeci">#define XM_TITLE_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00041">SWMconvert.c:41</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a6295c7f73818553f16e576a771efa716"><div class="ttname"><a href="_s_w_mconvert_8c.html#a6295c7f73818553f16e576a771efa716">XM_ORDERLIST_SIZE</a></div><div class="ttdeci">#define XM_ORDERLIST_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00064">SWMconvert.c:64</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a433dec215e4d466080eaa0b4afba5d40"><div class="ttname"><a href="_s_w_mconvert_8c.html#a433dec215e4d466080eaa0b4afba5d40">XM_SAMPLE_HEADER_SIZE</a></div><div class="ttdeci">#define XM_SAMPLE_HEADER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00100">SWMconvert.c:100</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7358d0df9d4fdb976d837517a3434cbb"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7358d0df9d4fdb976d837517a3434cbb">SampleLength</a></div><div class="ttdeci">unsigned long int SampleLength</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00156">SWMconvert.c:156</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a10cc467511ea79df2236a0323a3661d4"><div class="ttname"><a href="_s_w_mconvert_8c.html#a10cc467511ea79df2236a0323a3661d4">XMpatternSize</a></div><div class="ttdeci">unsigned int XMpatternSize[XM_PATTERNS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00169">SWMconvert.c:169</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a42c8edb9dd33e03a282db61c8920ed15"><div class="ttname"><a href="_s_w_mconvert_8c.html#a42c8edb9dd33e03a282db61c8920ed15">XM_FXVAL_PACKSIGN</a></div><div class="ttdeci">#define XM_FXVAL_PACKSIGN</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00079">SWMconvert.c:79</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a4e2e9fe44d37b8797ad46c85330314b7"><div class="ttname"><a href="_s_w_mconvert_8c.html#a4e2e9fe44d37b8797ad46c85330314b7">XMinsVibFreq</a></div><div class="ttdeci">unsigned char XMinsVibFreq[XM_INSTRUMENTS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00179">SWMconvert.c:179</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ae77bd7aceb642db9e7d94ac748130a87"><div class="ttname"><a href="_s_w_mconvert_8c.html#ae77bd7aceb642db9e7d94ac748130a87">ReadVarLenNum</a></div><div class="ttdeci">unsigned long ReadVarLenNum()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02115">SWMconvert.c:2115</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_afdacbe1ae87e8cc595ee19aa0e2973a9"><div class="ttname"><a href="_s_w_mconvert_8c.html#afdacbe1ae87e8cc595ee19aa0e2973a9">TimeSignature</a></div><div class="ttdeci">unsigned char TimeSignature[8]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00197">SWMconvert.c:197</a></div></div>
<div class="ttc" id="astdio_8h_html_ab17363cc40df849a9061a8b44feed758"><div class="ttname"><a href="stdio_8h.html#ab17363cc40df849a9061a8b44feed758">fclose</a></div><div class="ttdeci">int __fastcall__ fclose(FILE *f)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7b74e6ed50dd0174f347b623c3d240af"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7b74e6ed50dd0174f347b623c3d240af">XMpattTemp</a></div><div class="ttdeci">unsigned char XMpattTemp[SID_CHNAMOUNT][256 *XM_COL_PER_TRK]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00176">SWMconvert.c:176</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a2bc90a4d171b833f8bb06de67ca17cc3"><div class="ttname"><a href="_s_w_mconvert_8c.html#a2bc90a4d171b833f8bb06de67ca17cc3">ResetFx</a></div><div class="ttdeci">unsigned char ResetFx[SID_CHNAMOUNT]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00184">SWMconvert.c:184</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a6f0448fecb5cb596998caee0339eb066"><div class="ttname"><a href="_s_w_mconvert_8c.html#a6f0448fecb5cb596998caee0339eb066">MIDI_DIVISION_OFFSET</a></div><div class="ttdeci">#define MIDI_DIVISION_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00121">SWMconvert.c:121</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7654a3b74a922d73890bff0a49a336a2"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7654a3b74a922d73890bff0a49a336a2">XM_INSTRUMENTS_MAX</a></div><div class="ttdeci">#define XM_INSTRUMENTS_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00019">SWMconvert.c:19</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ab9a9c1090be0d2ce915e770291946136"><div class="ttname"><a href="_s_w_mconvert_8c.html#ab9a9c1090be0d2ce915e770291946136">InputFileName</a></div><div class="ttdeci">char InputFileName[FILENAME_LENGTH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00146">SWMconvert.c:146</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a15e835f73f30e34548c856abc199eb3d"><div class="ttname"><a href="_s_w_mconvert_8c.html#a15e835f73f30e34548c856abc199eb3d">XMpattPos</a></div><div class="ttdeci">unsigned int XMpattPos</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00191">SWMconvert.c:191</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a647aa00ef66abca7caa363e49cea0c1c"><div class="ttname"><a href="_s_w_mconvert_8c.html#a647aa00ef66abca7caa363e49cea0c1c">TUNETEMPO</a></div><div class="ttdeci">unsigned char TUNETEMPO[32][2]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00161">SWMconvert.c:161</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a3c392d63db218c66bdeff7af3f4514d8"><div class="ttname"><a href="_s_w_mconvert_8c.html#a3c392d63db218c66bdeff7af3f4514d8">ActChord</a></div><div class="ttdeci">unsigned char ActChord[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00192">SWMconvert.c:192</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_af0d88d1e9f5ebda92dd9595f20d3f6f3"><div class="ttname"><a href="_s_w_mconvert_8c.html#af0d88d1e9f5ebda92dd9595f20d3f6f3">OctavePeriod</a></div><div class="ttdeci">unsigned char OctavePeriod[16]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00195">SWMconvert.c:195</a></div></div>
<div class="ttc" id="astdio_8h_html_a570e25f3722e4588c145f87cc14d2b47"><div class="ttname"><a href="stdio_8h.html#a570e25f3722e4588c145f87cc14d2b47">fgetc</a></div><div class="ttdeci">int __fastcall__ fgetc(FILE *f)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_adb5cb6efa4cf51d6320d717fb248aa14"><div class="ttname"><a href="_s_w_mconvert_8c.html#adb5cb6efa4cf51d6320d717fb248aa14">XMinsVibDelay</a></div><div class="ttdeci">unsigned char XMinsVibDelay[XM_INSTRUMENTS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00179">SWMconvert.c:179</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a2e54a7e472577fd07d329355d567e31a"><div class="ttname"><a href="_s_w_mconvert_8c.html#a2e54a7e472577fd07d329355d567e31a">SubtuneAmount</a></div><div class="ttdeci">unsigned int SubtuneAmount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00154">SWMconvert.c:154</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a5a2dc819424e64f296b4f13071ccd955"><div class="ttname"><a href="_s_w_mconvert_8c.html#a5a2dc819424e64f296b4f13071ccd955">XMpattRef</a></div><div class="ttdeci">unsigned char XMpattRef[SID_CHNAMOUNT][256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00173">SWMconvert.c:173</a></div></div>
<div class="ttc" id="astdio_8h_html_a1f156ee5589f7710a7a003cb593a0182"><div class="ttname"><a href="stdio_8h.html#a1f156ee5589f7710a7a003cb593a0182">fseek</a></div><div class="ttdeci">int __fastcall__ fseek(FILE *f, long offset, int whence)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aeaf69d8f8b3ebfd510b7a5f43ab0c2ee"><div class="ttname"><a href="_s_w_mconvert_8c.html#aeaf69d8f8b3ebfd510b7a5f43ab0c2ee">VICE_P00_OFFSET</a></div><div class="ttdeci">#define VICE_P00_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00031">SWMconvert.c:31</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ace57b458c1b00668b74dae3a5933fe13"><div class="ttname"><a href="_s_w_mconvert_8c.html#ace57b458c1b00668b74dae3a5933fe13">MIDI_VLV_LEN_MAX</a></div><div class="ttdeci">#define MIDI_VLV_LEN_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00022">SWMconvert.c:22</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a9650b2a36085f69a95db8d42674fa2b5"><div class="ttname"><a href="_s_w_mconvert_8c.html#a9650b2a36085f69a95db8d42674fa2b5">ActFx</a></div><div class="ttdeci">unsigned char ActFx[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00192">SWMconvert.c:192</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ac8f1507a5d0533800536c161817ceb64"><div class="ttname"><a href="_s_w_mconvert_8c.html#ac8f1507a5d0533800536c161817ceb64">MIDI_ID</a></div><div class="ttdeci">char * MIDI_ID</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00113">SWMconvert.c:113</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a647c9e53ce7e67aae4b1d2bacdcbb1a6"><div class="ttname"><a href="_s_w_mconvert_8c.html#a647c9e53ce7e67aae4b1d2bacdcbb1a6">ProcessXM204</a></div><div class="ttdeci">void ProcessXM204()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01202">SWMconvert.c:1202</a></div></div>
<div class="ttc" id="astdlib_8h_html_ae23144bcbb8e3742b00eb687c36654d1"><div class="ttname"><a href="stdlib_8h.html#ae23144bcbb8e3742b00eb687c36654d1">rand</a></div><div class="ttdeci">int rand(void)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a0d6231f0d43776715da0a11a7af38842"><div class="ttname"><a href="_s_w_mconvert_8c.html#a0d6231f0d43776715da0a11a7af38842">ADSR_time_ScaleRate</a></div><div class="ttdeci">#define ADSR_time_ScaleRate</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00108">SWMconvert.c:108</a></div></div>
<div class="ttc" id="astdio_8h_html_a046e408cf01687b77dec5ba6f93d2dd3"><div class="ttname"><a href="stdio_8h.html#a046e408cf01687b77dec5ba6f93d2dd3">ftell</a></div><div class="ttdeci">long __fastcall__ ftell(FILE *f)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ade4b1e0caa5a6df557beffba891b16a9"><div class="ttname"><a href="_s_w_mconvert_8c.html#ade4b1e0caa5a6df557beffba891b16a9">InputMIDIver</a></div><div class="ttdeci">unsigned int InputMIDIver</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00118">SWMconvert.c:118</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_af2816d5909253f7f75b35d6beaec7ae6"><div class="ttname"><a href="_s_w_mconvert_8c.html#af2816d5909253f7f75b35d6beaec7ae6">MIDInotes</a></div><div class="ttdeci">unsigned char MIDInotes[MIDI_CHANNELS_MAX][MIDI_TRACKLEN_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00198">SWMconvert.c:198</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a526bb19abd2bdb711c3c84514444e16f"><div class="ttname"><a href="_s_w_mconvert_8c.html#a526bb19abd2bdb711c3c84514444e16f">XMseqTemp</a></div><div class="ttdeci">unsigned char XMseqTemp[SID_CHNAMOUNT][256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00170">SWMconvert.c:170</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a50fa8ec29e4dda97353ec07676dad3f0"><div class="ttname"><a href="_s_w_mconvert_8c.html#a50fa8ec29e4dda97353ec07676dad3f0">RELEASEtoXMtime</a></div><div class="ttdeci">unsigned int RELEASEtoXMtime(unsigned int ReleaseNibble, float SustainNibble)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02024">SWMconvert.c:2024</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a067b6495f7fa9829daf99dfe8ab80cd4"><div class="ttname"><a href="_s_w_mconvert_8c.html#a067b6495f7fa9829daf99dfe8ab80cd4">LEwordFromFile</a></div><div class="ttdeci">unsigned int LEwordFromFile()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02105">SWMconvert.c:2105</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7c02c02b0995b6866b31c7d243578164"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7c02c02b0995b6866b31c7d243578164">ChannelDelta</a></div><div class="ttdeci">unsigned long ChannelDelta[MIDI_CHANNELS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00196">SWMconvert.c:196</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ae598de553d4de8402a78d07303ea7c31"><div class="ttname"><a href="_s_w_mconvert_8c.html#ae598de553d4de8402a78d07303ea7c31">ChordAmount</a></div><div class="ttdeci">unsigned int ChordAmount</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00154">SWMconvert.c:154</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a6595ec138038a344a0a2d14855bc6aaf"><div class="ttname"><a href="_s_w_mconvert_8c.html#a6595ec138038a344a0a2d14855bc6aaf">SWMtoXMvibAmp</a></div><div class="ttdeci">unsigned char SWMtoXMvibAmp[16]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00203">SWMconvert.c:203</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a26df6b1aa8372dca048b05d9e978beda"><div class="ttname"><a href="_s_w_mconvert_8c.html#a26df6b1aa8372dca048b05d9e978beda">XMinsSustain</a></div><div class="ttdeci">unsigned char XMinsSustain[XM_INSTRUMENTS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00180">SWMconvert.c:180</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_afdb811e2d2c73aabbd9db0e5f9370cd7"><div class="ttname"><a href="_s_w_mconvert_8c.html#afdb811e2d2c73aabbd9db0e5f9370cd7">MIDI_ID_OFFSET</a></div><div class="ttdeci">#define MIDI_ID_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00112">SWMconvert.c:112</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ae6fd5b68d0c72a9ae169652bbf15e781"><div class="ttname"><a href="_s_w_mconvert_8c.html#ae6fd5b68d0c72a9ae169652bbf15e781">XM_NOTE_VOL_FX</a></div><div class="ttdeci">#define XM_NOTE_VOL_FX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00083">SWMconvert.c:83</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a1727419bf2495fe575251ebc29afbe28"><div class="ttname"><a href="_s_w_mconvert_8c.html#a1727419bf2495fe575251ebc29afbe28">XM_INST_PACKSIGN</a></div><div class="ttdeci">#define XM_INST_PACKSIGN</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00076">SWMconvert.c:76</a></div></div>
<div class="ttc" id="astring_8h_html_a2a16e376fdf760ab48963ace1fbd8231"><div class="ttname"><a href="string_8h.html#a2a16e376fdf760ab48963ace1fbd8231">strlen</a></div><div class="ttdeci">size_t __fastcall__ strlen(const char *s)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_af6c831f2601e8659ac5d9c71e457e208"><div class="ttname"><a href="_s_w_mconvert_8c.html#af6c831f2601e8659ac5d9c71e457e208">MIDI_TRACKS_OFFSET</a></div><div class="ttdeci">#define MIDI_TRACKS_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00123">SWMconvert.c:123</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ab41a6e59f79396f4a7d586ed61e47721"><div class="ttname"><a href="_s_w_mconvert_8c.html#ab41a6e59f79396f4a7d586ed61e47721">XM_Note</a></div><div class="ttdeci">unsigned char XM_Note</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00193">SWMconvert.c:193</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a88fd95a9901ba7482a05b7ca455b92da"><div class="ttname"><a href="_s_w_mconvert_8c.html#a88fd95a9901ba7482a05b7ca455b92da">SWMtoXMslide</a></div><div class="ttdeci">unsigned char SWMtoXMslide(unsigned char SWMslide)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01979">SWMconvert.c:1979</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a0a16c7e2031da58967ee3a5c545d67d7"><div class="ttname"><a href="_s_w_mconvert_8c.html#a0a16c7e2031da58967ee3a5c545d67d7">MIDIdeltas</a></div><div class="ttdeci">unsigned long MIDIdeltas[MIDI_CHANNELS_MAX][MIDI_TRACKLEN_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00196">SWMconvert.c:196</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a8a668e7a8a3eb98cb6a57761fc4970ee"><div class="ttname"><a href="_s_w_mconvert_8c.html#a8a668e7a8a3eb98cb6a57761fc4970ee">ProcessSWM</a></div><div class="ttdeci">void ProcessSWM()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00510">SWMconvert.c:510</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a4855f56b50a0ced0d12a9159a9715e0a"><div class="ttname"><a href="_s_w_mconvert_8c.html#a4855f56b50a0ced0d12a9159a9715e0a">XM_VIBRATO_FX</a></div><div class="ttdeci">#define XM_VIBRATO_FX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00082">SWMconvert.c:82</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a50683681223cb2978b1a021cbab8adac"><div class="ttname"><a href="_s_w_mconvert_8c.html#a50683681223cb2978b1a021cbab8adac">XM_ORDERLIST_OFFSET</a></div><div class="ttdeci">#define XM_ORDERLIST_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00063">SWMconvert.c:63</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a866257b75936a2dfe8c3fc00021442fd"><div class="ttname"><a href="_s_w_mconvert_8c.html#a866257b75936a2dfe8c3fc00021442fd">MIDI_TRACK_SIZE</a></div><div class="ttdeci">unsigned long MIDI_TRACK_SIZE[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00128">SWMconvert.c:128</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a4fed4b2469eb2fa4a03616fd7731a9bf"><div class="ttname"><a href="_s_w_mconvert_8c.html#a4fed4b2469eb2fa4a03616fd7731a9bf">XM_PERIOD_PER_FRAME</a></div><div class="ttdeci">unsigned int XM_PERIOD_PER_FRAME</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00105">SWMconvert.c:105</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa40617d652aaf2a55939a5143b42ce22"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa40617d652aaf2a55939a5143b42ce22">MIDI_TRACK_AMOUNT</a></div><div class="ttdeci">unsigned int MIDI_TRACK_AMOUNT</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00120">SWMconvert.c:120</a></div></div>
<div class="ttc" id="astdlib_8h_html"><div class="ttname"><a href="stdlib_8h.html">stdlib.h</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ab09efdeaf27be43a19d884280baf1f25"><div class="ttname"><a href="_s_w_mconvert_8c.html#ab09efdeaf27be43a19d884280baf1f25">XM_TITLE_OFFSET</a></div><div class="ttdeci">#define XM_TITLE_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00040">SWMconvert.c:40</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_afed83846bce42b8514a138da8cb6ab8e"><div class="ttname"><a href="_s_w_mconvert_8c.html#afed83846bce42b8514a138da8cb6ab8e">VICE_P00_FILENAME_OFFSET</a></div><div class="ttdeci">#define VICE_P00_FILENAME_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00032">SWMconvert.c:32</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a40849854c215922d69679bda489fecd6"><div class="ttname"><a href="_s_w_mconvert_8c.html#a40849854c215922d69679bda489fecd6">SetChordInstr</a></div><div class="ttdeci">void SetChordInstr()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01956">SWMconvert.c:1956</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aaf49a378fbe4115c6c763daf074a5a99"><div class="ttname"><a href="_s_w_mconvert_8c.html#aaf49a378fbe4115c6c763daf074a5a99">MIDI_ID_SIZE</a></div><div class="ttdeci">#define MIDI_ID_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00114">SWMconvert.c:114</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa136ecc2cf348a0e1e5e45d481857bc1"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa136ecc2cf348a0e1e5e45d481857bc1">FrameSampleLength</a></div><div class="ttdeci">unsigned long int FrameSampleLength</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00156">SWMconvert.c:156</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_acf987664642f1c7e519380858085bcd3"><div class="ttname"><a href="_s_w_mconvert_8c.html#acf987664642f1c7e519380858085bcd3">ATTACKtoSWMtime</a></div><div class="ttdeci">unsigned char ATTACKtoSWMtime(unsigned int XMattack)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01998">SWMconvert.c:1998</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a97ab0f6a3b5d22c449b6b1cdbe922bbb"><div class="ttname"><a href="_s_w_mconvert_8c.html#a97ab0f6a3b5d22c449b6b1cdbe922bbb">XMinsAttack</a></div><div class="ttdeci">unsigned int XMinsAttack[XM_INSTRUMENTS_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00181">SWMconvert.c:181</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_af1c49230c45ce1c9a4653bd1eeed56e0"><div class="ttname"><a href="_s_w_mconvert_8c.html#af1c49230c45ce1c9a4653bd1eeed56e0">SWS_ID</a></div><div class="ttdeci">char * SWS_ID</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00034">SWMconvert.c:34</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a5516acceb3f84d84ad55051a8cf51378"><div class="ttname"><a href="_s_w_mconvert_8c.html#a5516acceb3f84d84ad55051a8cf51378">XMorderlist</a></div><div class="ttdeci">unsigned char XMorderlist[256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00166">SWMconvert.c:166</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a9270786cd17661a34e70ad4915b34677"><div class="ttname"><a href="_s_w_mconvert_8c.html#a9270786cd17661a34e70ad4915b34677">ActSWMptn</a></div><div class="ttdeci">unsigned int ActSWMptn</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00191">SWMconvert.c:191</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aff510bcbc09b1cad08681d74c953edae"><div class="ttname"><a href="_s_w_mconvert_8c.html#aff510bcbc09b1cad08681d74c953edae">XMpattData</a></div><div class="ttdeci">unsigned char XMpattData[256 *32]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00175">SWMconvert.c:175</a></div></div>
<div class="ttc" id="astdio_8h_html_a10d9535043595582d26bf02c2a75f820"><div class="ttname"><a href="stdio_8h.html#a10d9535043595582d26bf02c2a75f820">fwrite</a></div><div class="ttdeci">size_t __fastcall__ fwrite(const void *buf, size_t size, size_t count, FILE *f)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a177084439e1b59bcf04fcf8de509168f"><div class="ttname"><a href="_s_w_mconvert_8c.html#a177084439e1b59bcf04fcf8de509168f">PackSignPos</a></div><div class="ttdeci">unsigned int PackSignPos</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00191">SWMconvert.c:191</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a367ba81f78d6fb6a2f0269fa891459ed"><div class="ttname"><a href="_s_w_mconvert_8c.html#a367ba81f78d6fb6a2f0269fa891459ed">FILENAME_LENGTH_MAX</a></div><div class="ttdeci">#define FILENAME_LENGTH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00013">SWMconvert.c:13</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aa9de0598c0a83cf144ba247501aec0f4"><div class="ttname"><a href="_s_w_mconvert_8c.html#aa9de0598c0a83cf144ba247501aec0f4">GenerateMIDI</a></div><div class="ttdeci">void GenerateMIDI()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00657">SWMconvert.c:657</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a8ebded4bd8478acdfd751bbdbf737257"><div class="ttname"><a href="_s_w_mconvert_8c.html#a8ebded4bd8478acdfd751bbdbf737257">WaitKeyPress</a></div><div class="ttdeci">void WaitKeyPress()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02077">SWMconvert.c:2077</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_aadfffe55d58661007d79e9e23cce875c"><div class="ttname"><a href="_s_w_mconvert_8c.html#aadfffe55d58661007d79e9e23cce875c">InputSize</a></div><div class="ttdeci">unsigned int InputSize</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00151">SWMconvert.c:151</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a205e98defd45247b25a9a12f08d0d8ac"><div class="ttname"><a href="_s_w_mconvert_8c.html#a205e98defd45247b25a9a12f08d0d8ac">ProcessMIDItrack</a></div><div class="ttdeci">void ProcessMIDItrack()</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01587">SWMconvert.c:1587</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a041cb5b98f14a048edf870f283ec532d"><div class="ttname"><a href="_s_w_mconvert_8c.html#a041cb5b98f14a048edf870f283ec532d">INSTRUMENTS</a></div><div class="ttdeci">unsigned char INSTRUMENTS[64][256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00185">SWMconvert.c:185</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_affce279f1a12abc9060fc5b6de34182e"><div class="ttname"><a href="_s_w_mconvert_8c.html#affce279f1a12abc9060fc5b6de34182e">SID_CHNAMOUNT</a></div><div class="ttdeci">#define SID_CHNAMOUNT</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00023">SWMconvert.c:23</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a00eb068b5fb87045ee96f4d5f9c51302"><div class="ttname"><a href="_s_w_mconvert_8c.html#a00eb068b5fb87045ee96f4d5f9c51302">ActVol</a></div><div class="ttdeci">unsigned char ActVol[64]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00192">SWMconvert.c:192</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a407575f0c8057573a7b2b3dc326a431c"><div class="ttname"><a href="_s_w_mconvert_8c.html#a407575f0c8057573a7b2b3dc326a431c">TuneBPM</a></div><div class="ttdeci">unsigned int TuneBPM</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00200">SWMconvert.c:200</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a78a0ae1b38495cfbf4b0a3e2a9351524"><div class="ttname"><a href="_s_w_mconvert_8c.html#a78a0ae1b38495cfbf4b0a3e2a9351524">XM_INSAMOUNT_OFFSET</a></div><div class="ttdeci">#define XM_INSAMOUNT_OFFSET</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00057">SWMconvert.c:57</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a51b43419a8b2d074202d6022ffc396c4"><div class="ttname"><a href="_s_w_mconvert_8c.html#a51b43419a8b2d074202d6022ffc396c4">XMinstName</a></div><div class="ttdeci">unsigned char XMinstName[XM_INSTRUMENTS_MAX][XM_INSNAME_SIZE]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00178">SWMconvert.c:178</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00246">cubase64_1analyzePitch.m:246</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a83b26b762d0aa9a2b2ad653a1c38a8d9"><div class="ttname"><a href="_s_w_mconvert_8c.html#a83b26b762d0aa9a2b2ad653a1c38a8d9">XM_INSTYPE</a></div><div class="ttdeci">#define XM_INSTYPE</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00098">SWMconvert.c:98</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ad7f726652eae34beefe5443c8e57ae78"><div class="ttname"><a href="_s_w_mconvert_8c.html#ad7f726652eae34beefe5443c8e57ae78">XM_PATTERN_HEADER_SIZE</a></div><div class="ttdeci">unsigned char XM_PATTERN_HEADER_SIZE[4]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00067">SWMconvert.c:67</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_afef64a928911e6a64dcec85d178efb7e"><div class="ttname"><a href="_s_w_mconvert_8c.html#afef64a928911e6a64dcec85d178efb7e">XM_TRACKERNAME</a></div><div class="ttdeci">char * XM_TRACKERNAME</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00044">SWMconvert.c:44</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a5913bb175d4eae67446f2844b7e06845"><div class="ttname"><a href="_s_w_mconvert_8c.html#a5913bb175d4eae67446f2844b7e06845">XM_NOP_PACKSIGN</a></div><div class="ttdeci">#define XM_NOP_PACKSIGN</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00074">SWMconvert.c:74</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_afb4f7320f0d72850c3d079d337176515"><div class="ttname"><a href="_s_w_mconvert_8c.html#afb4f7320f0d72850c3d079d337176515">ATTACK_times</a></div><div class="ttdeci">unsigned int ATTACK_times[16]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00106">SWMconvert.c:106</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a69d78552435a794730f9f0f9f2d8532f"><div class="ttname"><a href="_s_w_mconvert_8c.html#a69d78552435a794730f9f0f9f2d8532f">ATTACKtoXMtime</a></div><div class="ttdeci">unsigned int ATTACKtoXMtime(unsigned int AttackNibble)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l01993">SWMconvert.c:1993</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ae5833f5f157c71f3217a999a176b0231"><div class="ttname"><a href="_s_w_mconvert_8c.html#ae5833f5f157c71f3217a999a176b0231">XM_INST_HEADER_SIZE</a></div><div class="ttdeci">unsigned char XM_INST_HEADER_SIZE[4]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00094">SWMconvert.c:94</a></div></div>
<div class="ttc" id="astdio_8h_html_a98631211a4a8aee62f572375d5b637be"><div class="ttname"><a href="stdio_8h.html#a98631211a4a8aee62f572375d5b637be">printf</a></div><div class="ttdeci">int printf(const char *format,...)</div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a5c4d04d1c7d6420bef6c6f5775f177ca"><div class="ttname"><a href="_s_w_mconvert_8c.html#a5c4d04d1c7d6420bef6c6f5775f177ca">XM_VOL_PACKSIGN</a></div><div class="ttdeci">#define XM_VOL_PACKSIGN</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00077">SWMconvert.c:77</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_ac672d89827a1137f2b20e32c530cd95e"><div class="ttname"><a href="_s_w_mconvert_8c.html#ac672d89827a1137f2b20e32c530cd95e">XM_FX_PACKSIGN</a></div><div class="ttdeci">#define XM_FX_PACKSIGN</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00078">SWMconvert.c:78</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a23f22b1364bc2c95202f75d25ae02a4e"><div class="ttname"><a href="_s_w_mconvert_8c.html#a23f22b1364bc2c95202f75d25ae02a4e">XM_Vol</a></div><div class="ttdeci">unsigned char XM_Vol</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00193">SWMconvert.c:193</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7e85c91cc42aa9f6574bfc286b420a1f"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7e85c91cc42aa9f6574bfc286b420a1f">RELEASEtoSWMtime</a></div><div class="ttdeci">unsigned char RELEASEtoSWMtime(unsigned int XMrelease, unsigned char XMsustain)</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l02029">SWMconvert.c:2029</a></div></div>
<div class="ttc" id="a_s_w_mconvert_8c_html_a7028dff28ae8d96b3cfe3e9f4d3961ce"><div class="ttname"><a href="_s_w_mconvert_8c.html#a7028dff28ae8d96b3cfe3e9f4d3961ce">XMseqTranspose</a></div><div class="ttdeci">unsigned char XMseqTranspose[SID_CHNAMOUNT][256]</div><div class="ttdef"><b>Definition:</b> <a href="_s_w_mconvert_8c_source.html#l00171">SWMconvert.c:171</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1438cc8c1a18e5b5e27392fc9c1a8795.html">musictools</a></li><li class="navelem"><a class="el" href="dir_e17d8d5547131be9739c897144cfdc90.html">SID-Wizard-1.7</a></li><li class="navelem"><a class="el" href="dir_ea3f5845fb57a1ff07a2c1f8a9afdf4d.html">sources</a></li><li class="navelem"><a class="el" href="_s_w_mconvert_8c.html">SWMconvert.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
