<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIC SID Project: musictools/libsidplayfp-2.0.1/src/builders/resid-builder/resid/filter.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIC SID Project
   &#160;<span id="projectnumber">prototype</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('filter_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">filter.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="filter_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//  ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  This file is part of reSID, a MOS6581 SID emulator engine.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  Copyright (C) 2010  Dag Lem &lt;resid@nimrod.no&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//  it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//  the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//  (at your option) any later version.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//  This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//  GNU General Public License for more details.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//  You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//  along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//  ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="filter_8cc.html#a355a34978ff888eea1c870ef51d5ac7c">   20</a></span>&#160;<span class="preprocessor">#define RESID_FILTER_CC</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#ifdef _M_ARM</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#undef _ARM_WINAPI_PARTITION_DESKTOP_SDK_AVAILABLE</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#define _ARM_WINAPI_PARTITION_DESKTOP_SDK_AVAILABLE 1</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h.html">filter.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="resid-builder_2resid_2dac_8h.html">dac.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2spline_8h.html">spline.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacere_s_i_d.html">reSID</a></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;{</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// This is the SID 6581 op-amp voltage transfer function, measured on</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// CAP1B/CAP1A on a chip marked MOS 6581R4AR 0687 14.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// All measured chips have op-amps with output voltages (and thus input</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// voltages) within the range of 0.81V - 10.31V.</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">static</span> double_point opamp_voltage_6581[] = {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    {  0.81, 10.31 },  <span class="comment">// Approximate start of actual range</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    {  0.81, 10.31 },  <span class="comment">// Repeated point</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    {  2.40, 10.31 },</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    {  2.60, 10.30 },</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    {  2.70, 10.29 },</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    {  2.80, 10.26 },</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    {  2.90, 10.17 },</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    {  3.00, 10.04 },</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    {  3.10,  9.83 },</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    {  3.20,  9.58 },</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    {  3.30,  9.32 },</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    {  3.50,  8.69 },</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    {  3.70,  8.00 },</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    {  4.00,  6.89 },</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    {  4.40,  5.21 },</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    {  4.54,  4.54 },  <span class="comment">// Working point (vi = vo)</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    {  4.60,  4.19 },</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    {  4.80,  3.00 },</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    {  4.90,  2.30 },  <span class="comment">// Change of curvature</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    {  4.95,  2.03 },</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    {  5.00,  1.88 },</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    {  5.05,  1.77 },</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    {  5.10,  1.69 },</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    {  5.20,  1.58 },</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    {  5.40,  1.44 },</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {  5.60,  1.33 },</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    {  5.80,  1.26 },</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    {  6.00,  1.21 },</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    {  6.40,  1.12 },</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    {  7.00,  1.02 },</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    {  7.50,  0.97 },</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    {  8.50,  0.89 },</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    { 10.00,  0.81 },</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    { 10.31,  0.81 },  <span class="comment">// Approximate end of actual range</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    { 10.31,  0.81 }   <span class="comment">// Repeated end point</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;};</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">// This is the SID 8580 op-amp voltage transfer function, measured on</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">// CAP1B/CAP1A on a chip marked CSG 8580R5 1690 25.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">static</span> double_point opamp_voltage_8580[] = {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    {  1.30,  8.91 },  <span class="comment">// Approximate start of actual range</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    {  1.30,  8.91 },  <span class="comment">// Repeated end point</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    {  4.76,  8.91 },</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    {  4.77,  8.90 },</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    {  4.78,  8.88 },</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    {  4.785, 8.86 },</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    {  4.79,  8.80 },</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    {  4.795, 8.60 },</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    {  4.80,  8.25 },</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    {  4.805, 7.50 },</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    {  4.81,  6.10 },</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    {  4.815, 4.05 },  <span class="comment">// Change of curvature</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    {  4.82,  2.27 },</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    {  4.825, 1.65 },</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    {  4.83,  1.55 },</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    {  4.84,  1.47 },</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {  4.85,  1.43 },</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    {  4.87,  1.37 },</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    {  4.90,  1.34 },</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    {  5.00,  1.30 },</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    {  5.10,  1.30 },</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    {  8.91,  1.30 },  <span class="comment">// Approximate end of actual range</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    {  8.91,  1.30 }   <span class="comment">// Repeated end point</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;};</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html">  107</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// Op-amp transfer function.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">  109</a></span>&#160;    double_point* <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">  110</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// Voice output characteristics.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#a43928085f1378a596266afc8fae086a3">  112</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a43928085f1378a596266afc8fae086a3">voice_voltage_range</a>;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#aa5c072658b971ecc8e4c7b4a2ddab9b2">  113</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#aa5c072658b971ecc8e4c7b4a2ddab9b2">voice_DC_voltage</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// Capacitor value.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#a8987032f6f7d7cfaa0ff4e2a62ae08fe">  115</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a8987032f6f7d7cfaa0ff4e2a62ae08fe">C</a>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// Transistor parameters.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#a16e957e84b4c64aecb2fdef600d55af7">  117</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a16e957e84b4c64aecb2fdef600d55af7">Vdd</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#a7ca815f7f3a2044ce598d07040247e1e">  118</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a7ca815f7f3a2044ce598d07040247e1e">Vth</a>;        <span class="comment">// Threshold voltage</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#a456fddf8fd69637dc58ec00271128171">  119</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a456fddf8fd69637dc58ec00271128171">Ut</a>;         <span class="comment">// Thermal voltage: Ut = k*T/q = 8.61734315e-5*T ~ 26mV</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#ac8a270bda1a0784095b5ec578129c28a">  120</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac8a270bda1a0784095b5ec578129c28a">k</a>;          <span class="comment">// Gate coupling coefficient: K = Cox/(Cox+Cdep) ~ 0.7</span></div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#aea1c52896556c87a1a651fd8263090b8">  121</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#aea1c52896556c87a1a651fd8263090b8">uCox</a>;       <span class="comment">// u*Cox</span></div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#a4ec6c73cabd8c608829a4c61d75c38e1">  122</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a4ec6c73cabd8c608829a4c61d75c38e1">WL_vcr</a>;     <span class="comment">// W/L for VCR</span></div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#acf0ccfb5bf266a44cedc22a69b7f055c">  123</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#acf0ccfb5bf266a44cedc22a69b7f055c">WL_snake</a>;   <span class="comment">// W/L for &quot;snake&quot;</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// DAC parameters.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#add2b1017d6feb98e792502b0d282c98a">  125</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#add2b1017d6feb98e792502b0d282c98a">dac_zero</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#af4b69204ea5cf3b12a11963a4ece93ce">  126</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#af4b69204ea5cf3b12a11963a4ece93ce">dac_scale</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#a52681c0ec84b38ad1548269684765061">  127</a></span>&#160;    <span class="keywordtype">double</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a52681c0ec84b38ad1548269684765061">dac_2R_div_R</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="structre_s_i_d_1_1model__filter__init__t.html#ac2efe7feebe29c850a7aea90c12fb97f">  128</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac2efe7feebe29c850a7aea90c12fb97f">dac_term</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;} <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html">model_filter_init_t</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keyword">static</span> <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html">model_filter_init_t</a> model_filter_init[2] = {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        opamp_voltage_6581,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keyword">sizeof</span>(opamp_voltage_6581)/<span class="keyword">sizeof</span>(*opamp_voltage_6581),</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="comment">// The dynamic analog range of one voice is approximately 1.5V,</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="comment">// riding at a DC level of approximately 5.0V.</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        1.5,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        5.0,</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment">// Capacitor value.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        470<a class="code" href="cubase64__5analyze_noise_8m.html#a30d3b8e44898693b3b5b95b32743e82b">e</a>-12,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="comment">// Transistor parameters.</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        12.18,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        1.31,</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        26.0e-3,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        1.0,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        20<a class="code" href="cubase64__5analyze_noise_8m.html#a30d3b8e44898693b3b5b95b32743e82b">e</a>-6,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        9.0/1,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        1.0/115,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">// DAC parameters.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        6.65,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        2.63,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        2.20,</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keyword">false</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    },</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        opamp_voltage_8580,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keyword">sizeof</span>(opamp_voltage_8580)/<span class="keyword">sizeof</span>(*opamp_voltage_8580),</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// FIXME: Measure for the 8580.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        1.0,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">// 4.75,</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        1.30,  <span class="comment">// FIXME: For now we pretend that the working point is 0V.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        22<a class="code" href="cubase64__5analyze_noise_8m.html#a30d3b8e44898693b3b5b95b32743e82b">e</a>-9,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        9.09,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        0.80,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        26.0e-3,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        1.0,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        10<a class="code" href="cubase64__5analyze_noise_8m.html#a30d3b8e44898693b3b5b95b32743e82b">e</a>-6,</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="comment">// FIXME: 6581 only</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        0,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        0,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        0,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        0,</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        2.00,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="keyword">true</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;};</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classre_s_i_d_1_1_filter.html#afabdfd22dcbe780f7ae7d760f01aa7e4">Filter::vcr_kVg</a>[1 &lt;&lt; 16];</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="classre_s_i_d_1_1_filter.html#aba23246b98d24e2dd14dc89d352943cf">Filter::vcr_n_Ids_term</a>[1 &lt;&lt; 16];</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">#if defined(__amiga__) &amp;&amp; defined(__mc68000__)</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#undef HAS_LOG1P</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#ifndef HAS_LOG1P</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keyword">static</span> <span class="keywordtype">double</span> log1p(<span class="keywordtype">double</span> <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a>)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;{</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="multidemo_8c.html#a45c862cc0ba3a2a26c325256e953d227">log</a>(1 + <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a>) - (((1 + <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a>) - 1) - <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a>) / (1 + <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;Filter::model_filter_t <a class="code" href="classre_s_i_d_1_1_filter.html#a36e0ef60e80455bdabe223aa2d73db6c">Filter::model_filter</a>[2];</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// Constructor.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#ad724ba04cbde6118ceddbd6635e96eaa">  198</a></span>&#160;<a class="code" href="classre_s_i_d_1_1_filter.html#ad724ba04cbde6118ceddbd6635e96eaa">Filter::Filter</a>()</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;{</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> class_init;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (!class_init) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="comment">// Temporary table for op-amp transfer function.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>* voltages = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>[1 &lt;&lt; 16];</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html">opamp_t</a>* opamp = <span class="keyword">new</span> <a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html">opamp_t</a>[1 &lt;&lt; 16];</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = 0; m &lt; 2; m++) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html">model_filter_init_t</a>&amp; fi = model_filter_init[m];</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html">model_filter_t</a>&amp; mf = <a class="code" href="classre_s_i_d_1_1_filter.html#a36e0ef60e80455bdabe223aa2d73db6c">model_filter</a>[m];</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            <span class="comment">// Convert op-amp voltage transfer to 16 bit values.</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordtype">double</span> vmin = fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[0][0];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordtype">double</span> opamp_max = fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[0][1];</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordtype">double</span> kVddt = fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac8a270bda1a0784095b5ec578129c28a">k</a>*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a16e957e84b4c64aecb2fdef600d55af7">Vdd</a> - fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a7ca815f7f3a2044ce598d07040247e1e">Vth</a>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordtype">double</span> vmax = kVddt &lt; opamp_max ? opamp_max : kVddt;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordtype">double</span> denorm = vmax - vmin;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keywordtype">double</span> <a class="code" href="_tube_distortion_8m.html#a00d8dd5a0d95d6f61f3a71ffc043a41b">norm</a> = 1.0/denorm;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            <span class="comment">// Scaling and translation constants.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordtype">double</span> N16 = <a class="code" href="_tube_distortion_8m.html#a00d8dd5a0d95d6f61f3a71ffc043a41b">norm</a>*((1u &lt;&lt; 16) - 1);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordtype">double</span> N30 = <a class="code" href="_tube_distortion_8m.html#a00d8dd5a0d95d6f61f3a71ffc043a41b">norm</a>*((1u &lt;&lt; 30) - 1);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordtype">double</span> N31 = <a class="code" href="_tube_distortion_8m.html#a00d8dd5a0d95d6f61f3a71ffc043a41b">norm</a>*((1u &lt;&lt; 31) - 1);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a41cd70a615711ffd41d24aa2574cb6f7">vo_N16</a> = (int)(N16);  <span class="comment">// FIXME: Remove?</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="comment">// The &quot;zero&quot; output level of the voices.</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            <span class="comment">// The digital range of one voice is 20 bits; create a scaling term</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="comment">// for multiplication which fits in 11 bits.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordtype">double</span> N14 = <a class="code" href="_tube_distortion_8m.html#a00d8dd5a0d95d6f61f3a71ffc043a41b">norm</a>*(1u &lt;&lt; 14);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#af05689183f5f340a733a01be5273cc8d">voice_scale_s14</a> = (int)(N14*fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a43928085f1378a596266afc8fae086a3">voice_voltage_range</a>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a6ed4b536d5979309e98b1a196c14c508">voice_DC</a> = (int)(N16*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#aa5c072658b971ecc8e4c7b4a2ddab9b2">voice_DC_voltage</a> - vmin));</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="comment">// Vdd - Vth, normalized so that translated values can be subtracted:</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="comment">// k*Vddt - x = (k*Vddt - t) - (x - t)</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#ab51ffd62bbb2c213535a294bc05f75b4">kVddt</a> = (int)(N16*(kVddt - vmin) + 0.5);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="comment">// Normalized snake current factor, 1 cycle at 1MHz.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            <span class="comment">// Fit in 5 bits.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a7267083e355b27cab2c3cc8f41efab6b">n_snake</a> = (int)(denorm*(1 &lt;&lt; 13)*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#aea1c52896556c87a1a651fd8263090b8">uCox</a>/(2*fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac8a270bda1a0784095b5ec578129c28a">k</a>)*fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#acf0ccfb5bf266a44cedc22a69b7f055c">WL_snake</a>*1.0e-6/fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a8987032f6f7d7cfaa0ff4e2a62ae08fe">C</a>) + 0.5);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="comment">// Create lookup table mapping op-amp voltage across output and input</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            <span class="comment">// to input voltage: vo - vx -&gt; vx</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            <span class="comment">// FIXME: No variable length arrays in ISO C++, hardcoding to max 50</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="comment">// points.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="comment">// double_point scaled_voltage[fi.opamp_voltage_size];</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            double_point scaled_voltage[50];</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="comment">// The target output range is 16 bits, in order to fit in an unsigned</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="comment">// short.</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="comment">// The y axis is temporarily scaled to 31 bits for maximum accuracy in</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="comment">// the calculated derivative.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                <span class="comment">// Values are normalized using</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                <span class="comment">//   x_n = m*2^N*(x - xmin)</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="comment">// and are translated back later (for fixed point math) using</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="comment">//   m*2^N*x = x_n - m*2^N*xmin</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                scaled_voltage[fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 1 - <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][0] = int(N16*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][1] - fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][0] + denorm)/2 + 0.5);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                scaled_voltage[fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 1 - <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][1] = N31*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>][0] - vmin);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="comment">// Clamp x to 16 bits (rounding may cause overflow).</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="keywordflow">if</span> (scaled_voltage[fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 1][0] &gt;= (1 &lt;&lt; 16)) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                <span class="comment">// The last point is repeated.</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                scaled_voltage[fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 1][0] =</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                scaled_voltage[fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 2][0] = (1 &lt;&lt; 16) - 1;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            }</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <a class="code" href="namespacere_s_i_d.html#a7ec5eff34739318306c207d943e9a64d">interpolate</a>(scaled_voltage, scaled_voltage + fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 1,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <a class="code" href="classre_s_i_d_1_1_point_plotter.html">PointPlotter&lt;unsigned int&gt;</a>(voltages), 1.0);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="comment">// Store both fn and dfn in the same table.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a60c5d2bfcca7dd69339afe9ea248d854">ak</a> = (int)scaled_voltage[0][0];</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a6b1b43578a8b4e475b84cc203461868b">bk</a> = (int)scaled_voltage[fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 1][0];</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordtype">int</span> j;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <a class="code" href="cubase64__3simple_playback_8m.html#ada3ed9e62ea0d1ae79903083ccfe54c6">for</a> (j = 0; j &lt; mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a60c5d2bfcca7dd69339afe9ea248d854">ak</a>; j++) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                opamp[j].<a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html#af8e7ee68d0e038b27ce2938a9ee72f32">vx</a> = 0;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                opamp[j].<a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html#a8b29836bc575c8eba38d2660f4f08651">dvx</a> = 0;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> = voltages[j];</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">for</span> (; j &lt;= mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a6b1b43578a8b4e475b84cc203461868b">bk</a>; j++) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> fp = <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> = voltages[j];  <span class="comment">// Scaled by m*2^31</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="comment">// m*2^31*dy/1 = (m*2^31*dy)/(m*2^16*dx) = 2^15*dy/dx</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                <span class="keywordtype">int</span> df = <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> - fp;  <span class="comment">// Scaled by 2^15</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <span class="comment">// 16 bits unsigned: m*2^16*(fn - xmin)</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                opamp[j].<a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html#af8e7ee68d0e038b27ce2938a9ee72f32">vx</a> = <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> &gt; (0xffff &lt;&lt; 15) ? 0xffff : <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> &gt;&gt; 15;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="comment">// 16 bits (15 bits + sign bit): 2^11*dfn</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                opamp[j].<a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html#a8b29836bc575c8eba38d2660f4f08651">dvx</a> = df &gt;&gt; (15 - 11);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            <span class="keywordflow">for</span> (; j &lt; (1 &lt;&lt; 16); j++) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                opamp[j].<a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html#af8e7ee68d0e038b27ce2938a9ee72f32">vx</a> = 0;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                opamp[j].<a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html#a8b29836bc575c8eba38d2660f4f08651">dvx</a> = 0;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="comment">// Create lookup tables for gains / summers.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="comment">// 4 bit &quot;resistor&quot; ladders in the bandpass resonance gain and the audio</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="comment">// output gain necessitate 16 gain tables.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="comment">// From die photographs of the bandpass and volume &quot;resistor&quot; ladders</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="comment">// it follows that gain ~ vol/8 and 1/Q ~ ~res/8 (assuming ideal</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="comment">// op-amps and ideal &quot;resistors&quot;).</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n8 = 0; n8 &lt; 16; n8++) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> = n8 &lt;&lt; 4;  <span class="comment">// Scaled by 2^7</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a> = mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a60c5d2bfcca7dd69339afe9ea248d854">ak</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> vi = 0; vi &lt; (1 &lt;&lt; 16); vi++) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#ae615b8fc3a0f473634f471e6d1f2b686">gain</a>[n8][vi] = <a class="code" href="classre_s_i_d_1_1_filter.html#a10201e11c1e41c091e201208a8dca736">solve_gain</a>(opamp, <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, vi, <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a>, mf);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="comment">// The filter summer operates at n ~ 1, and has 5 fundamentally different</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="comment">// input configurations (2 - 6 input &quot;resistors&quot;).</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="comment">// Note that all &quot;on&quot; transistors are modeled as one. This is not</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;            <span class="comment">// entirely accurate, since the input for each transistor is different,</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="comment">// and transistors are not linear components. However modeling all</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="comment">// transistors separately would be extremely costly.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a> = 0;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; 5; k++) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keywordtype">int</span> idiv = 2 + k;        <span class="comment">// 2 - 6 input &quot;resistors&quot;.</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordtype">int</span> n_idiv = idiv &lt;&lt; 7;  <span class="comment">// n*idiv, scaled by 2^7</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                <a class="code" href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a> = idiv &lt;&lt; 16;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a> = mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a60c5d2bfcca7dd69339afe9ea248d854">ak</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> vi = 0; vi &lt; <a class="code" href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a>; vi++) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a163b4b44b439f2068c710fef651d7ccb">summer</a>[<a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a> + vi] = <a class="code" href="classre_s_i_d_1_1_filter.html#a10201e11c1e41c091e201208a8dca736">solve_gain</a>(opamp, n_idiv, vi/idiv, <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a>, mf);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                <a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a> += <a class="code" href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="comment">// The audio mixer operates at n ~ 8/6, and has 8 fundamentally different</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            <span class="comment">// input configurations (0 - 7 input &quot;resistors&quot;).</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="comment">// All &quot;on&quot;, transistors are modeled as one - see comments above for</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="comment">// the filter summer.</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a> = 0;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <a class="code" href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a> = 1;  <span class="comment">// Only one lookup element for 0 input &quot;resistors&quot;.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> l = 0; l &lt; 8; l++) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <span class="keywordtype">int</span> idiv = l;                 <span class="comment">// 0 - 7 input &quot;resistors&quot;.</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordtype">int</span> n_idiv = (idiv &lt;&lt; 7)*8/6; <span class="comment">// n*idiv, scaled by 2^7</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="keywordflow">if</span> (idiv == 0) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    <span class="comment">// Avoid division by zero; the result will be correct since</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    <span class="comment">// n_idiv = 0.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                    idiv = 1;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a> = mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a60c5d2bfcca7dd69339afe9ea248d854">ak</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> vi = 0; vi &lt; <a class="code" href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a>; vi++) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#af7e4ce2490c2ea2ae03bc05198646779">mixer</a>[<a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a> + vi] = <a class="code" href="classre_s_i_d_1_1_filter.html#a10201e11c1e41c091e201208a8dca736">solve_gain</a>(opamp, n_idiv, vi/idiv, <a class="code" href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">x</a>, mf);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                <a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a> += <a class="code" href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                <a class="code" href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a> = (l + 1) &lt;&lt; 16;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="comment">// Create lookup table mapping capacitor voltage to op-amp input voltage:</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="comment">// vc -&gt; vx</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = 0; m &lt; (1 &lt;&lt; 16); m++) {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#afbc1b4b1fb32db385749b0999091b4a7">opamp_rev</a>[m] = opamp[m].<a class="code" href="structre_s_i_d_1_1_filter_1_1opamp__t.html#af8e7ee68d0e038b27ce2938a9ee72f32">vx</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            }</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#aa35ca8ba763f4149cc0fd2a5d254791d">vc_max</a> = (int)(N30*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[0][1] - fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[0][0]));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a84ddb173d0fe491d44d3803de2f06a21">vc_min</a> = (int)(N30*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 1][1] - fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">opamp_voltage_size</a> - 1][0]));</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="comment">// DAC table.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a4768c84e70f55a2e17ad2e5c9613881a">bits</a> = 11;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <a class="code" href="namespacere_s_i_d.html#a6278ce21d164ffe2667c04fd2b02ced6">build_dac_table</a>(mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a0c28f7eaed89bff398a7a919e3250051">f0_dac</a>, <a class="code" href="cubase64__1analyze_pitch_8m.html#a4768c84e70f55a2e17ad2e5c9613881a">bits</a>, fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a52681c0ec84b38ad1548269684765061">dac_2R_div_R</a>, fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac2efe7feebe29c850a7aea90c12fb97f">dac_term</a>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> = 0; <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> &lt; (1 &lt;&lt; <a class="code" href="cubase64__1analyze_pitch_8m.html#a4768c84e70f55a2e17ad2e5c9613881a">bits</a>); <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>++) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a0c28f7eaed89bff398a7a919e3250051">f0_dac</a>[<a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>] = (<span class="keywordtype">unsigned</span> <a class="code" href="readme__resid_8txt.html#a1cbedcc33990b77eae61c0e6ee8eaa7d">short</a>)(N16*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#add2b1017d6feb98e792502b0d282c98a">dac_zero</a> + mf.<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a0c28f7eaed89bff398a7a919e3250051">f0_dac</a>[<a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>]*fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#af4b69204ea5cf3b12a11963a4ece93ce">dac_scale</a>/(1 &lt;&lt; <a class="code" href="cubase64__1analyze_pitch_8m.html#a4768c84e70f55a2e17ad2e5c9613881a">bits</a>) - vmin) + 0.5);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="comment">// Free temporary tables.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="keyword">delete</span>[] voltages;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keyword">delete</span>[] opamp;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="comment">// VCR - 6581 only.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <a class="code" href="structre_s_i_d_1_1model__filter__init__t.html">model_filter_init_t</a>&amp; fi = model_filter_init[0];</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordtype">double</span> N16 = <a class="code" href="classre_s_i_d_1_1_filter.html#a36e0ef60e80455bdabe223aa2d73db6c">model_filter</a>[0].<a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a41cd70a615711ffd41d24aa2574cb6f7">vo_N16</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordtype">double</span> vmin = N16*fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">opamp_voltage</a>[0][0];</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordtype">double</span> k = fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac8a270bda1a0784095b5ec578129c28a">k</a>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordtype">double</span> kVddt = N16*(k*(fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a16e957e84b4c64aecb2fdef600d55af7">Vdd</a> - fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a7ca815f7f3a2044ce598d07040247e1e">Vth</a>));</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; (1 &lt;&lt; 16); <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="comment">// The table index is right-shifted 16 times in order to fit in</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="comment">// 16 bits; the argument to sqrt is thus multiplied by (1 &lt;&lt; 16).</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="comment">// The returned value must be corrected for translation. Vg always</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="comment">// takes part in a subtraction as follows:</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="comment">//   k*Vg - Vx = (k*Vg - t) - (Vx - t)</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            <span class="comment">// I.e. k*Vg - t must be returned.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            <span class="keywordtype">double</span> Vg = kVddt - sqrt((<span class="keywordtype">double</span>)<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>*(1 &lt;&lt; 16));</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            <a class="code" href="classre_s_i_d_1_1_filter.html#afabdfd22dcbe780f7ae7d760f01aa7e4">vcr_kVg</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<span class="keywordtype">unsigned</span> <a class="code" href="readme__resid_8txt.html#a1cbedcc33990b77eae61c0e6ee8eaa7d">short</a>)(k*Vg - vmin + 0.5);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">        EKV model:</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">        Ids = Is*(if - ir)</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">        Is = 2*u*Cox*Ut^2/k*W/L</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">        if = ln^2(1 + e^((k*(Vg - Vt) - Vs)/(2*Ut))</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">        ir = ln^2(1 + e^((k*(Vg - Vt) - Vd)/(2*Ut))</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">        */</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordtype">double</span> kVt = fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac8a270bda1a0784095b5ec578129c28a">k</a>*fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a7ca815f7f3a2044ce598d07040247e1e">Vth</a>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        <span class="keywordtype">double</span> Ut = fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a456fddf8fd69637dc58ec00271128171">Ut</a>;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordtype">double</span> Is = 2*fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#aea1c52896556c87a1a651fd8263090b8">uCox</a>*Ut*Ut/fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#ac8a270bda1a0784095b5ec578129c28a">k</a>*fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a4ec6c73cabd8c608829a4c61d75c38e1">WL_vcr</a>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="comment">// Normalized current factor for 1 cycle at 1MHz.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordtype">double</span> N15 = N16/2;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordtype">double</span> n_Is = N15*1.0e-6/fi.<a class="code" href="structre_s_i_d_1_1model__filter__init__t.html#a8987032f6f7d7cfaa0ff4e2a62ae08fe">C</a>*Is;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="comment">// kVg_Vx = k*Vg - Vx</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="comment">// I.e. if k != 1.0, Vg must be scaled accordingly.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> kVg_Vx = 0; kVg_Vx &lt; (1 &lt;&lt; 16); kVg_Vx++) {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <span class="keywordtype">double</span> log_term = log1p(exp((kVg_Vx/N16 - kVt)/(2*Ut)));</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="comment">// Scaled by m*2^15</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            <a class="code" href="classre_s_i_d_1_1_filter.html#aba23246b98d24e2dd14dc89d352943cf">vcr_n_Ids_term</a>[kVg_Vx] = (<span class="keywordtype">unsigned</span> <a class="code" href="readme__resid_8txt.html#a1cbedcc33990b77eae61c0e6ee8eaa7d">short</a>)(n_Is*log_term*log_term);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        }</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        class_init = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a2b8b78e19e6472c88dcbc00f77de34b6">enable_filter</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a7d0cf64e99ba7d320528da9351a7a379">set_chip_model</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcdafc04655d0aa5bb12f49e4c713c28a6d8">MOS6581</a>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a7785722197392fd90368c115407a72f7">set_voice_mask</a>(0x07);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a6f97f59def19eeefc2fb13bf88821b07">input</a>(0);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">// Enable filter.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#a2b8b78e19e6472c88dcbc00f77de34b6">  439</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#a2b8b78e19e6472c88dcbc00f77de34b6">Filter::enable_filter</a>(<span class="keywordtype">bool</span> enable)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a> = enable;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#abb55b6cad8a033f0eeb3327ba722c9cd">set_sum_mix</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">// Adjust the DAC bias parameter of the filter.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">// This gives user variable control of the exact CF -&gt; center frequency</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">// mapping used by the filter.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">// The setting is currently only effective for 6581.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#adbd4c340704245158e6c7d743dbc917b">  452</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#adbd4c340704245158e6c7d743dbc917b">Filter::adjust_filter_bias</a>(<span class="keywordtype">double</span> dac_bias)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;{</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#ad1da6fa2c81983c49d6f2b1acacbb325">Vw_bias</a> = int(dac_bias*<a class="code" href="classre_s_i_d_1_1_filter.html#a36e0ef60e80455bdabe223aa2d73db6c">model_filter</a>[<a class="code" href="classre_s_i_d_1_1_filter.html#a019760df2156c512f2ab5454c5dcc34e">sid_model</a>].vo_N16);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#aa91e08400909a2dc9c195ff4d49ad8ab">set_w0</a>();</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;}</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">// Set chip model.</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#a7d0cf64e99ba7d320528da9351a7a379">  461</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#a7d0cf64e99ba7d320528da9351a7a379">Filter::set_chip_model</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcd">chip_model</a> model)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;{</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a019760df2156c512f2ab5454c5dcc34e">sid_model</a> = model;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">/* We initialize the state variables again just to make sure that</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">    * the earlier model didn&#39;t leave behind some foreign, unrecoverable</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">    * state. Hopefully set_chip_model() only occurs simultaneously with</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">    * reset(). */</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a73886a7d45df7cfb5ce56ba953be6a44">Vhp</a> = 0;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#acd02bd4a0c5d8f65b7024a0f38035194">Vbp</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#a8aacd90356a72f4a8519c14927f8e907">Vbp_x</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#acc7dbc80d27f07af229d80f1b92ce438">Vbp_vc</a> = 0;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#ae98b8a40739abee33e95a694d1d8977b">Vlp</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#adae9b247eb75379d09d68ab5c074abc9">Vlp_x</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#a5ae86f8e9977c0160edcd41e747efa5f">Vlp_vc</a> = 0;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">// Mask for voices routed into the filter / audio output stage.</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">// Used to physically connect/disconnect EXT IN, and for test purposes</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">// (voice muting).</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#a7785722197392fd90368c115407a72f7">  479</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#a7785722197392fd90368c115407a72f7">Filter::set_voice_mask</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a230c5bb9e99122a53cbc3e10c8236aea">reg4</a> mask)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;{</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a38881c818f2f084f9cd67d7004ca67f8">voice_mask</a> = 0xf0 | (mask &amp; 0x0f);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#abb55b6cad8a033f0eeb3327ba722c9cd">set_sum_mix</a>();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;}</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">// SID reset.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00489"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#ad20897c5c8bd47f5d4005989bead0e55">  489</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#ad20897c5c8bd47f5d4005989bead0e55">Filter::reset</a>()</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a> = 0;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="structres.html">res</a> = 0;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a1403960468bd91d6ece759e92d35e904">filt</a> = 0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#ac6bd849ef72a56b6afbe5728bd819e42">mode</a> = 0;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a0984f19c378829eb6e8a75bfb10e27df">vol</a> = 0;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160; </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a73886a7d45df7cfb5ce56ba953be6a44">Vhp</a> = 0;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#acd02bd4a0c5d8f65b7024a0f38035194">Vbp</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#a8aacd90356a72f4a8519c14927f8e907">Vbp_x</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#acc7dbc80d27f07af229d80f1b92ce438">Vbp_vc</a> = 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#ae98b8a40739abee33e95a694d1d8977b">Vlp</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#adae9b247eb75379d09d68ab5c074abc9">Vlp_x</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#a5ae86f8e9977c0160edcd41e747efa5f">Vlp_vc</a> = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#aa91e08400909a2dc9c195ff4d49ad8ab">set_w0</a>();</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a882e590197cdd5007df06a079d8e76b9">set_Q</a>();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#abb55b6cad8a033f0eeb3327ba722c9cd">set_sum_mix</a>();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">// Register functions.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#a3cd4b0322d027edc7817f4148a63afd0">  510</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#a3cd4b0322d027edc7817f4148a63afd0">Filter::writeFC_LO</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> fc_lo)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a> = (<a class="code" href="classre_s_i_d_1_1_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a> &amp; 0x7f8) | (fc_lo &amp; 0x007);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#aa91e08400909a2dc9c195ff4d49ad8ab">set_w0</a>();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;}</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#adc5db42a67714673638b6680e729a1aa">  516</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#adc5db42a67714673638b6680e729a1aa">Filter::writeFC_HI</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> fc_hi)</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a> = ((fc_hi &lt;&lt; 3) &amp; 0x7f8) | (<a class="code" href="classre_s_i_d_1_1_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a> &amp; 0x007);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#aa91e08400909a2dc9c195ff4d49ad8ab">set_w0</a>();</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#a936b207fda074a84f9b990e0e0ddaccd">  522</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#a936b207fda074a84f9b990e0e0ddaccd">Filter::writeRES_FILT</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> res_filt)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;{</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <a class="code" href="structres.html">res</a> = (res_filt &gt;&gt; 4) &amp; 0x0f;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a882e590197cdd5007df06a079d8e76b9">set_Q</a>();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a1403960468bd91d6ece759e92d35e904">filt</a> = res_filt &amp; 0x0f;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#abb55b6cad8a033f0eeb3327ba722c9cd">set_sum_mix</a>();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#a4a7204d2d82c410541ce5a0da9c6bd26">  531</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#a4a7204d2d82c410541ce5a0da9c6bd26">Filter::writeMODE_VOL</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> mode_vol)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;{</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#ac6bd849ef72a56b6afbe5728bd819e42">mode</a> = mode_vol &amp; 0xf0;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#abb55b6cad8a033f0eeb3327ba722c9cd">set_sum_mix</a>();</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a0984f19c378829eb6e8a75bfb10e27df">vol</a> = mode_vol &amp; 0x0f;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">// Set filter cutoff frequency.</span></div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#aa91e08400909a2dc9c195ff4d49ad8ab">  540</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#aa91e08400909a2dc9c195ff4d49ad8ab">Filter::set_w0</a>()</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;{</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <a class="code" href="structre_s_i_d_1_1_filter_1_1model__filter__t.html">model_filter_t</a>&amp; <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> = <a class="code" href="classre_s_i_d_1_1_filter.html#a36e0ef60e80455bdabe223aa2d73db6c">model_filter</a>[<a class="code" href="classre_s_i_d_1_1_filter.html#a019760df2156c512f2ab5454c5dcc34e">sid_model</a>];</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">int</span> Vw = <a class="code" href="classre_s_i_d_1_1_filter.html#ad1da6fa2c81983c49d6f2b1acacbb325">Vw_bias</a> + <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>.f0_dac[<a class="code" href="classre_s_i_d_1_1_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a>];</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#afc68d4e545466d716d919b719942d4cc">Vddt_Vw_2</a> = unsigned(<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>.kVddt - Vw)*unsigned(<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>.kVddt - Vw) &gt;&gt; 1;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">// FIXME: w0 is temporarily used for MOS 8580 emulation.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="comment">// MOS 8580 cutoff: 0 - 12.5kHz.</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// Multiply with 1.048576 to facilitate division by 1 000 000 by right-</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// shifting 20 times (2 ^ 20 = 1048576).</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// 1.048576*2*pi*12500 = 82355</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a4a7ea28f22bf9ae310100fc0b4a7138c">w0</a> = 82355*(<a class="code" href="classre_s_i_d_1_1_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a> + 1) &gt;&gt; 11;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;}</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">Set filter resonance.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">In the MOS 6581, 1/Q is controlled linearly by res. From die photographs</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">of the resonance &quot;resistor&quot; ladder it follows that 1/Q ~ ~res/8</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">(assuming an ideal op-amp and ideal &quot;resistors&quot;). This implies that Q</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">ranges from 0.533 (res = 0) to 8 (res = E). For res = F, Q is actually</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">theoretically unlimited, which is quite unheard of in a filter</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">circuit.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">To obtain Q ~ 1/sqrt(2) = 0.707 for maximally flat frequency response,</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">res should be set to 4: Q = 8/~4 = 8/11 = 0.7272 (again assuming an ideal</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">op-amp and ideal &quot;resistors&quot;).</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">Q as low as 0.707 is not achievable because of low gain op-amps; res = 0</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">should yield the flattest possible frequency response at Q ~ 0.8 - 1.0</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">in the op-amp&#39;s pseudo-linear range (high amplitude signals will be</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">clipped). As resonance is increased, the filter must be clocked more</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">often to keep it stable.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">In the MOS 8580, the resonance &quot;resistor&quot; ladder above the bp feedback</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">op-amp is split in two parts; one ladder for the op-amp input and one</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">ladder for the op-amp feedback.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">input:         feedback:</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">               Rf</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">Ri R4 RC R8    R3</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">               R2</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">               R1</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">The &quot;resistors&quot; are switched in as follows by bits in register $17:</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">feedback:</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">R1: bit4&amp;!bit5</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">R2: !bit4&amp;bit5</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">R3: bit4&amp;bit5</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">Rf: always on</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">input:</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">R4: bit6&amp;!bit7</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">R8: !bit6&amp;bit7</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">RC: bit6&amp;bit7</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">Ri: !(R4|R8|RC) = !(bit6|bit7) = !bit6&amp;!bit7</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">The relative &quot;resistor&quot; values are approximately (using channel length):</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">R1 = 15.3*Ri</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">R2 =  7.3*Ri</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">R3 =  4.7*Ri</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">Rf =  1.4*Ri</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">R4 =  1.4*Ri</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">R8 =  2.0*Ri</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">RC =  2.8*Ri</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">Approximate values for 1/Q can now be found as follows (assuming an</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">ideal op-amp):</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">res  feedback  input  -gain (1/Q)</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">---  --------  -----  ----------</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment"> 0   Rf        Ri     Rf/Ri      = 1/(Ri*(1/Rf))      = 1/0.71</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment"> 1   Rf|R1     Ri     (Rf|R1)/Ri = 1/(Ri*(1/Rf+1/R1)) = 1/0.78</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment"> 2   Rf|R2     Ri     (Rf|R2)/Ri = 1/(Ri*(1/Rf+1/R2)) = 1/0.85</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"> 3   Rf|R3     Ri     (Rf|R3)/Ri = 1/(Ri*(1/Rf+1/R3)) = 1/0.92</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment"> 4   Rf        R4     Rf/R4      = 1/(R4*(1/Rf))      = 1/1.00</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment"> 5   Rf|R1     R4     (Rf|R1)/R4 = 1/(R4*(1/Rf+1/R1)) = 1/1.10</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"> 6   Rf|R2     R4     (Rf|R2)/R4 = 1/(R4*(1/Rf+1/R2)) = 1/1.20</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment"> 7   Rf|R3     R4     (Rf|R3)/R4 = 1/(R4*(1/Rf+1/R3)) = 1/1.30</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment"> 8   Rf        R8     Rf/R8      = 1/(R8*(1/Rf))      = 1/1.43</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment"> 9   Rf|R1     R8     (Rf|R1)/R8 = 1/(R8*(1/Rf+1/R1)) = 1/1.56</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment"> A   Rf|R2     R8     (Rf|R2)/R8 = 1/(R8*(1/Rf+1/R2)) = 1/1.70</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment"> B   Rf|R3     R8     (Rf|R3)/R8 = 1/(R8*(1/Rf+1/R3)) = 1/1.86</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment"> C   Rf        RC     Rf/RC      = 1/(RC*(1/Rf))      = 1/2.00</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment"> D   Rf|R1     RC     (Rf|R1)/RC = 1/(RC*(1/Rf+1/R1)) = 1/2.18</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment"> E   Rf|R2     RC     (Rf|R2)/RC = 1/(RC*(1/Rf+1/R2)) = 1/2.38</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment"> F   Rf|R3     RC     (Rf|R3)/RC = 1/(RC*(1/Rf+1/R3)) = 1/2.60</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">These data indicate that the following function for 1/Q has been</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">modeled in the MOS 8580:</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">  1/Q = 2^(1/2)*2^(-x/8) = 2^(1/2 - x/8) = 2^((4 - x)/8)</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#a882e590197cdd5007df06a079d8e76b9">  641</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#a882e590197cdd5007df06a079d8e76b9">Filter::set_Q</a>()</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;{</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <span class="comment">// Cutoff for MOS 6581.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="comment">// The coefficient 8 is dispensed of later by right-shifting 3 times</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// (2 ^ 3 = 8).</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#af01b7d6ec260ae2b222060133540ee98">_8_div_Q</a> = ~<a class="code" href="structres.html">res</a> &amp; 0x0f;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// FIXME: Temporary cutoff code for MOS 8580.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="comment">// 1024*1/Q = 1024*2^((4 - res)/8)</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="comment">// The coefficient 1024 is dispensed of later by right-shifting 10 times</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="comment">// (2 ^ 10 = 1024).</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> _1024_div_Q_table[] = {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            1448,</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            1328,</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            1218,</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            1117,</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            1024,</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            939,</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            861,</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            790,</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            724,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            664,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            609,</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            558,</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            512,</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            470,</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            431,</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            395</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    };</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a6e1525b3e3c71a7f5c52c3578a5d20ee">_1024_div_Q</a> = _1024_div_Q_table[<a class="code" href="classre_s_i_d_1_1_filter.html#a8a4a24fe2316961996ebd0d5d6fe7590">res</a>];</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">// Set input routing bits.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno"><a class="line" href="classre_s_i_d_1_1_filter.html#abb55b6cad8a033f0eeb3327ba722c9cd">  675</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classre_s_i_d_1_1_filter.html#abb55b6cad8a033f0eeb3327ba722c9cd">Filter::set_sum_mix</a>()</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;{</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">// NB! voice3off (mode bit 7) only affects voice 3 if it is routed directly</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="comment">// to the mixer.</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a5745811f1def3b6ab93b8a1b07ff5863">sum</a> = (<a class="code" href="classre_s_i_d_1_1_filter.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a> ? <a class="code" href="classre_s_i_d_1_1_filter.html#a1403960468bd91d6ece759e92d35e904">filt</a> : 0x00) &amp; <a class="code" href="classre_s_i_d_1_1_filter.html#a38881c818f2f084f9cd67d7004ca67f8">voice_mask</a>;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="classre_s_i_d_1_1_filter.html#a245c1a3bcdc27ff055522b31c90048ff">mix</a> =</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        (<a class="code" href="classre_s_i_d_1_1_filter.html#a8740ba80e30dd75e71d09fa1dcf04f3d">enabled</a> ? (<a class="code" href="classre_s_i_d_1_1_filter.html#ac6bd849ef72a56b6afbe5728bd819e42">mode</a> &amp; 0x70) | ((~(<a class="code" href="classre_s_i_d_1_1_filter.html#a1403960468bd91d6ece759e92d35e904">filt</a> | (<a class="code" href="classre_s_i_d_1_1_filter.html#ac6bd849ef72a56b6afbe5728bd819e42">mode</a> &amp; 0x80) &gt;&gt; 5)) &amp; 0x0f) : 0x0f)</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        &amp; <a class="code" href="classre_s_i_d_1_1_filter.html#a38881c818f2f084f9cd67d7004ca67f8">voice_mask</a>;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;}</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160; </div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;} <span class="comment">// namespace reSID</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_a60c5d2bfcca7dd69339afe9ea248d854"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a60c5d2bfcca7dd69339afe9ea248d854">reSID::Filter::model_filter_t::ak</a></div><div class="ttdeci">int ak</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00436">filter.h:436</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a1403960468bd91d6ece759e92d35e904"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a1403960468bd91d6ece759e92d35e904">reSID::Filter::filt</a></div><div class="ttdeci">reg8 filt</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00387">filter.h:387</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_afc68d4e545466d716d919b719942d4cc"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#afc68d4e545466d716d919b719942d4cc">reSID::Filter::Vddt_Vw_2</a></div><div class="ttdeci">int Vddt_Vw_2</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00417">filter.h:417</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a4a7ea28f22bf9ae310100fc0b4a7138c"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a4a7ea28f22bf9ae310100fc0b4a7138c">reSID::Filter::w0</a></div><div class="ttdeci">int w0</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00420">filter.h:420</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_a84ddb173d0fe491d44d3803de2f06a21"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a84ddb173d0fe491d44d3803de2f06a21">reSID::Filter::model_filter_t::vc_min</a></div><div class="ttdeci">int vc_min</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00438">filter.h:438</a></div></div>
<div class="ttc" id="aresid-builder_2resid_2dac_8h_html"><div class="ttname"><a href="resid-builder_2resid_2dac_8h.html">dac.h</a></div></div>
<div class="ttc" id="anamespacere_s_i_d_html"><div class="ttname"><a href="namespacere_s_i_d.html">reSID</a></div><div class="ttdef"><b>Definition:</b> <a href="dac_8cc_source.html#l00045">dac.cc:45</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_point_plotter_html"><div class="ttname"><a href="classre_s_i_d_1_1_point_plotter.html">reSID::PointPlotter</a></div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2spline_8h_source.html#l00253">spline.h:253</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_ab51ffd62bbb2c213535a294bc05f75b4"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#ab51ffd62bbb2c213535a294bc05f75b4">reSID::Filter::model_filter_t::kVddt</a></div><div class="ttdeci">int kVddt</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00432">filter.h:432</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_ad1da6fa2c81983c49d6f2b1acacbb325"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#ad1da6fa2c81983c49d6f2b1acacbb325">reSID::Filter::Vw_bias</a></div><div class="ttdeci">int Vw_bias</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00417">filter.h:417</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a5745811f1def3b6ab93b8a1b07ff5863"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a5745811f1def3b6ab93b8a1b07ff5863">reSID::Filter::sum</a></div><div class="ttdeci">reg8 sum</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00401">filter.h:401</a></div></div>
<div class="ttc" id="alibsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2spline_8h_html"><div class="ttname"><a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2spline_8h.html">spline.h</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_aff03d94064cbb87157a8edd210ee4a75"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#aff03d94064cbb87157a8edd210ee4a75">reSID::Filter::fc</a></div><div class="ttdeci">reg12 fc</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00381">filter.h:381</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_adae9b247eb75379d09d68ab5c074abc9"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#adae9b247eb75379d09d68ab5c074abc9">reSID::Filter::Vlp_x</a></div><div class="ttdeci">int Vlp_x</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00409">filter.h:409</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_aba23246b98d24e2dd14dc89d352943cf"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#aba23246b98d24e2dd14dc89d352943cf">reSID::Filter::vcr_n_Ids_term</a></div><div class="ttdeci">static unsigned short vcr_n_Ids_term[1&lt;&lt; 16]</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00456">filter.h:456</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_aa35ca8ba763f4149cc0fd2a5d254791d"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#aa35ca8ba763f4149cc0fd2a5d254791d">reSID::Filter::model_filter_t::vc_max</a></div><div class="ttdeci">int vc_max</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00439">filter.h:439</a></div></div>
<div class="ttc" id="acubase64__3simple_playback_8m_html_ada3ed9e62ea0d1ae79903083ccfe54c6"><div class="ttname"><a href="cubase64__3simple_playback_8m.html#ada3ed9e62ea0d1ae79903083ccfe54c6">for</a></div><div class="ttdeci">for(i=1:sliceLength) % render the whole slice audio(audioIndex)</div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_a456fddf8fd69637dc58ec00271128171"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#a456fddf8fd69637dc58ec00271128171">reSID::model_filter_init_t::Ut</a></div><div class="ttdeci">double Ut</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00119">filter.cc:119</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_adbd4c340704245158e6c7d743dbc917b"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#adbd4c340704245158e6c7d743dbc917b">reSID::Filter::adjust_filter_bias</a></div><div class="ttdeci">void adjust_filter_bias(double dac_bias)</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00452">filter.cc:452</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_a641da66ada5e4e37782926aa7c77dc15"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#a641da66ada5e4e37782926aa7c77dc15">reSID::model_filter_init_t::opamp_voltage</a></div><div class="ttdeci">double_point * opamp_voltage</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00109">filter.cc:109</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_acc7dbc80d27f07af229d80f1b92ce438"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#acc7dbc80d27f07af229d80f1b92ce438">reSID::Filter::Vbp_vc</a></div><div class="ttdeci">int Vbp_vc</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00407">filter.h:407</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_af01b7d6ec260ae2b222060133540ee98"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#af01b7d6ec260ae2b222060133540ee98">reSID::Filter::_8_div_Q</a></div><div class="ttdeci">int _8_div_Q</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00418">filter.h:418</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a91e6b5172145ebb86e17b21e72e2715c"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a></div><div class="ttdeci">unsigned int reg8</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00040">siddefs.h:40</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_abb55b6cad8a033f0eeb3327ba722c9cd"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#abb55b6cad8a033f0eeb3327ba722c9cd">reSID::Filter::set_sum_mix</a></div><div class="ttdeci">void set_sum_mix()</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00675">filter.cc:675</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a8a4a24fe2316961996ebd0d5d6fe7590"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a8a4a24fe2316961996ebd0d5d6fe7590">reSID::Filter::res</a></div><div class="ttdeci">reg8 res</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00384">filter.h:384</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a0984f19c378829eb6e8a75bfb10e27df"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a0984f19c378829eb6e8a75bfb10e27df">reSID::Filter::vol</a></div><div class="ttdeci">reg4 vol</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00393">filter.h:393</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_ae98b8a40739abee33e95a694d1d8977b"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#ae98b8a40739abee33e95a694d1d8977b">reSID::Filter::Vlp</a></div><div class="ttdeci">int Vlp</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00408">filter.h:408</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a019760df2156c512f2ab5454c5dcc34e"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a019760df2156c512f2ab5454c5dcc34e">reSID::Filter::sid_model</a></div><div class="ttdeci">chip_model sid_model</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00423">filter.h:423</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_a52681c0ec84b38ad1548269684765061"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#a52681c0ec84b38ad1548269684765061">reSID::model_filter_init_t::dac_2R_div_R</a></div><div class="ttdeci">double dac_2R_div_R</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00127">filter.cc:127</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1opamp__t_html_af8e7ee68d0e038b27ce2938a9ee72f32"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1opamp__t.html#af8e7ee68d0e038b27ce2938a9ee72f32">reSID::Filter::opamp_t::vx</a></div><div class="ttdeci">unsigned short vx</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00426">filter.h:426</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_a6ed4b536d5979309e98b1a196c14c508"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a6ed4b536d5979309e98b1a196c14c508">reSID::Filter::model_filter_t::voice_DC</a></div><div class="ttdeci">int voice_DC</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00435">filter.h:435</a></div></div>
<div class="ttc" id="acubase64__5analyze_noise_8m_html_a30d3b8e44898693b3b5b95b32743e82b"><div class="ttname"><a href="cubase64__5analyze_noise_8m.html#a30d3b8e44898693b3b5b95b32743e82b">e</a></div><div class="ttdeci">All above of max level will be max e</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__5analyze_noise_8m_source.html#l00201">cubase64_5analyzeNoise.m:201</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a38881c818f2f084f9cd67d7004ca67f8"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a38881c818f2f084f9cd67d7004ca67f8">reSID::Filter::voice_mask</a></div><div class="ttdeci">reg8 voice_mask</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00397">filter.h:397</a></div></div>
<div class="ttc" id="a_tube_distortion_8m_html_a00d8dd5a0d95d6f61f3a71ffc043a41b"><div class="ttname"><a href="_tube_distortion_8m.html#a00d8dd5a0d95d6f61f3a71ffc043a41b">norm</a></div><div class="ttdeci">norm</div><div class="ttdef"><b>Definition:</b> <a href="_tube_distortion_8m_source.html#l00021">TubeDistortion.m:21</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_a7ca815f7f3a2044ce598d07040247e1e"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#a7ca815f7f3a2044ce598d07040247e1e">reSID::model_filter_init_t::Vth</a></div><div class="ttdeci">double Vth</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00118">filter.cc:118</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_ae615b8fc3a0f473634f471e6d1f2b686"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#ae615b8fc3a0f473634f471e6d1f2b686">reSID::Filter::model_filter_t::gain</a></div><div class="ttdeci">unsigned short gain[16][1&lt;&lt; 16]</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00445">filter.h:445</a></div></div>
<div class="ttc" id="anamespacere_s_i_d_html_a0ebfbb56836febacddd7b7ce73022de7"><div class="ttname"><a href="namespacere_s_i_d.html#a0ebfbb56836febacddd7b7ce73022de7">reSID::x</a></div><div class="ttdeci">double x(PointIter p)</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2spline_8h_source.html#l00188">spline.h:188</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a8b37770414e868331d3cc265d4c08bcd"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcd">chip_model</a></div><div class="ttdeci">chip_model</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00050">siddefs.h:50</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_aa5c072658b971ecc8e4c7b4a2ddab9b2"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#aa5c072658b971ecc8e4c7b4a2ddab9b2">reSID::model_filter_init_t::voice_DC_voltage</a></div><div class="ttdeci">double voice_DC_voltage</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00113">filter.cc:113</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a4768c84e70f55a2e17ad2e5c9613881a"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a4768c84e70f55a2e17ad2e5c9613881a">bits</a></div><div class="ttdeci">bits</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00043">cubase64_1analyzePitch.m:43</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_a16e957e84b4c64aecb2fdef600d55af7"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#a16e957e84b4c64aecb2fdef600d55af7">reSID::model_filter_init_t::Vdd</a></div><div class="ttdeci">double Vdd</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00117">filter.cc:117</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_a41cd70a615711ffd41d24aa2574cb6f7"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a41cd70a615711ffd41d24aa2574cb6f7">reSID::Filter::model_filter_t::vo_N16</a></div><div class="ttdeci">int vo_N16</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00431">filter.h:431</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a5ae86f8e9977c0160edcd41e747efa5f"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a5ae86f8e9977c0160edcd41e747efa5f">reSID::Filter::Vlp_vc</a></div><div class="ttdeci">int Vlp_vc</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00409">filter.h:409</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_aa91e08400909a2dc9c195ff4d49ad8ab"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#aa91e08400909a2dc9c195ff4d49ad8ab">reSID::Filter::set_w0</a></div><div class="ttdeci">void set_w0()</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00540">filter.cc:540</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1opamp__t_html_a8b29836bc575c8eba38d2660f4f08651"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1opamp__t.html#a8b29836bc575c8eba38d2660f4f08651">reSID::Filter::opamp_t::dvx</a></div><div class="ttdeci">short dvx</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00427">filter.h:427</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_afbc1b4b1fb32db385749b0999091b4a7"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#afbc1b4b1fb32db385749b0999091b4a7">reSID::Filter::model_filter_t::opamp_rev</a></div><div class="ttdeci">unsigned short opamp_rev[1&lt;&lt; 16]</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00442">filter.h:442</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a10201e11c1e41c091e201208a8dca736"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a10201e11c1e41c091e201208a8dca736">reSID::Filter::solve_gain</a></div><div class="ttdeci">int solve_gain(opamp_t *opamp, int n, int vi_t, int &amp;x, model_filter_t &amp;mf)</div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a936b207fda074a84f9b990e0e0ddaccd"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a936b207fda074a84f9b990e0e0ddaccd">reSID::Filter::writeRES_FILT</a></div><div class="ttdeci">void writeRES_FILT(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00522">filter.cc:522</a></div></div>
<div class="ttc" id="astructres_html"><div class="ttname"><a href="structres.html">res</a></div><div class="ttdef"><b>Definition:</b> <a href="parse_8h_source.html#l00053">parse.h:53</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_afabdfd22dcbe780f7ae7d760f01aa7e4"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#afabdfd22dcbe780f7ae7d760f01aa7e4">reSID::Filter::vcr_kVg</a></div><div class="ttdeci">static unsigned short vcr_kVg[1&lt;&lt; 16]</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00455">filter.h:455</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_a43928085f1378a596266afc8fae086a3"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#a43928085f1378a596266afc8fae086a3">reSID::model_filter_init_t::voice_voltage_range</a></div><div class="ttdeci">double voice_voltage_range</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00112">filter.cc:112</a></div></div>
<div class="ttc" id="areadme__resid_8txt_html_a1cbedcc33990b77eae61c0e6ee8eaa7d"><div class="ttname"><a href="readme__resid_8txt.html#a1cbedcc33990b77eae61c0e6ee8eaa7d">short</a></div><div class="ttdeci">This is a reverse engineered software emulation of the MOS6581 a full fledged Commodore and a popular SID tune player The VICE home page however reSID should still be of great interest to Commodore nostalgics The emulator engine is cycle emulating the internal operations of the SID chip SID s audio filter is modeled as an actual two integrator loop biquadratic filter circuit The engine has been developed based on available information on sampling of the OSC3 and ENV3 filter and meticulous testing In short</div><div class="ttdef"><b>Definition:</b> <a href="readme__resid_8txt_source.html#l00021">readme_resid.txt:21</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1opamp__t_html"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1opamp__t.html">reSID::Filter::opamp_t</a></div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00425">filter.h:425</a></div></div>
<div class="ttc" id="acubase64__2correlate_waveforms_8m_html_a633de4b0c14ca52ea2432a3c8a5c4c31"><div class="ttname"><a href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a></div><div class="ttdeci">f</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__2correlate_waveforms_8m_source.html#l00104">cubase64_2correlateWaveforms.m:104</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a73886a7d45df7cfb5ce56ba953be6a44"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a73886a7d45df7cfb5ce56ba953be6a44">reSID::Filter::Vhp</a></div><div class="ttdeci">int Vhp</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00405">filter.h:405</a></div></div>
<div class="ttc" id="abass__addon_8h_html_ac74d04db1b94e91597c8147a2f90e9af"><div class="ttname"><a href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a></div><div class="ttdeci">DWORD offset</div><div class="ttdef"><b>Definition:</b> <a href="bass__addon_8h_source.html#l00045">bass_addon.h:45</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_af4b69204ea5cf3b12a11963a4ece93ce"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#af4b69204ea5cf3b12a11963a4ece93ce">reSID::model_filter_init_t::dac_scale</a></div><div class="ttdeci">double dac_scale</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00126">filter.cc:126</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a8b37770414e868331d3cc265d4c08bcdafc04655d0aa5bb12f49e4c713c28a6d8"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcdafc04655d0aa5bb12f49e4c713c28a6d8">MOS6581</a></div><div class="ttdeci">@ MOS6581</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00050">siddefs.h:50</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_a163b4b44b439f2068c710fef651d7ccb"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a163b4b44b439f2068c710fef651d7ccb">reSID::Filter::model_filter_t::summer</a></div><div class="ttdeci">unsigned short summer[summer_offset&lt; 5 &gt;::value]</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00444">filter.h:444</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_ac6bd849ef72a56b6afbe5728bd819e42"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#ac6bd849ef72a56b6afbe5728bd819e42">reSID::Filter::mode</a></div><div class="ttdeci">reg4 mode</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00390">filter.h:390</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_a8987032f6f7d7cfaa0ff4e2a62ae08fe"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#a8987032f6f7d7cfaa0ff4e2a62ae08fe">reSID::model_filter_init_t::C</a></div><div class="ttdeci">double C</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00115">filter.cc:115</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a4a7204d2d82c410541ce5a0da9c6bd26"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a4a7204d2d82c410541ce5a0da9c6bd26">reSID::Filter::writeMODE_VOL</a></div><div class="ttdeci">void writeMODE_VOL(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00531">filter.cc:531</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a2b8b78e19e6472c88dcbc00f77de34b6"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a2b8b78e19e6472c88dcbc00f77de34b6">reSID::Filter::enable_filter</a></div><div class="ttdeci">void enable_filter(bool enable)</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00439">filter.cc:439</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_ad20897c5c8bd47f5d4005989bead0e55"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#ad20897c5c8bd47f5d4005989bead0e55">reSID::Filter::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00489">filter.cc:489</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a8740ba80e30dd75e71d09fa1dcf04f3d"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a8740ba80e30dd75e71d09fa1dcf04f3d">reSID::Filter::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00378">filter.h:378</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a8aacd90356a72f4a8519c14927f8e907"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a8aacd90356a72f4a8519c14927f8e907">reSID::Filter::Vbp_x</a></div><div class="ttdeci">int Vbp_x</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00407">filter.h:407</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a6f97f59def19eeefc2fb13bf88821b07"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a6f97f59def19eeefc2fb13bf88821b07">reSID::Filter::input</a></div><div class="ttdeci">void input(short sample)</div></div>
<div class="ttc" id="alibsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_html"><div class="ttname"><a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h.html">filter.h</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_adc5db42a67714673638b6680e729a1aa"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#adc5db42a67714673638b6680e729a1aa">reSID::Filter::writeFC_HI</a></div><div class="ttdeci">void writeFC_HI(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00516">filter.cc:516</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_af05689183f5f340a733a01be5273cc8d"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#af05689183f5f340a733a01be5273cc8d">reSID::Filter::model_filter_t::voice_scale_s14</a></div><div class="ttdeci">int voice_scale_s14</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00434">filter.h:434</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a245c1a3bcdc27ff055522b31c90048ff"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a245c1a3bcdc27ff055522b31c90048ff">reSID::Filter::mix</a></div><div class="ttdeci">reg8 mix</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00402">filter.h:402</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a3cd4b0322d027edc7817f4148a63afd0"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a3cd4b0322d027edc7817f4148a63afd0">reSID::Filter::writeFC_LO</a></div><div class="ttdeci">void writeFC_LO(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00510">filter.cc:510</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a7785722197392fd90368c115407a72f7"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a7785722197392fd90368c115407a72f7">reSID::Filter::set_voice_mask</a></div><div class="ttdeci">void set_voice_mask(reg4 mask)</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00479">filter.cc:479</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_ac8a270bda1a0784095b5ec578129c28a"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#ac8a270bda1a0784095b5ec578129c28a">reSID::model_filter_init_t::k</a></div><div class="ttdeci">double k</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00120">filter.cc:120</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_ac2efe7feebe29c850a7aea90c12fb97f"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#ac2efe7feebe29c850a7aea90c12fb97f">reSID::model_filter_init_t::dac_term</a></div><div class="ttdeci">bool dac_term</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00128">filter.cc:128</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html">reSID::model_filter_init_t</a></div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00107">filter.cc:107</a></div></div>
<div class="ttc" id="amidi__mapper_8h_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="midi__mapper_8h_source.html#l00059">midi_mapper.h:59</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html">reSID::Filter::model_filter_t</a></div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00430">filter.h:430</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_acf0ccfb5bf266a44cedc22a69b7f055c"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#acf0ccfb5bf266a44cedc22a69b7f055c">reSID::model_filter_init_t::WL_snake</a></div><div class="ttdeci">double WL_snake</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00123">filter.cc:123</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a230c5bb9e99122a53cbc3e10c8236aea"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a230c5bb9e99122a53cbc3e10c8236aea">reg4</a></div><div class="ttdeci">unsigned int reg4</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00039">siddefs.h:39</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_a4ec6c73cabd8c608829a4c61d75c38e1"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#a4ec6c73cabd8c608829a4c61d75c38e1">reSID::model_filter_init_t::WL_vcr</a></div><div class="ttdeci">double WL_vcr</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00122">filter.cc:122</a></div></div>
<div class="ttc" id="amultidemo_8c_html_a45c862cc0ba3a2a26c325256e953d227"><div class="ttname"><a href="multidemo_8c.html#a45c862cc0ba3a2a26c325256e953d227">log</a></div><div class="ttdeci">void log(char *msg)</div><div class="ttdef"><b>Definition:</b> <a href="multidemo_8c_source.html#l00052">multidemo.c:52</a></div></div>
<div class="ttc" id="amultidemo_8c_html_a245260f6f74972558f61b85227df5aae"><div class="ttname"><a href="multidemo_8c.html#a245260f6f74972558f61b85227df5aae">size</a></div><div class="ttdeci">unsigned size</div><div class="ttdef"><b>Definition:</b> <a href="multidemo_8c_source.html#l00040">multidemo.c:40</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a882e590197cdd5007df06a079d8e76b9"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a882e590197cdd5007df06a079d8e76b9">reSID::Filter::set_Q</a></div><div class="ttdeci">void set_Q()</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00641">filter.cc:641</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_a6b1b43578a8b4e475b84cc203461868b"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a6b1b43578a8b4e475b84cc203461868b">reSID::Filter::model_filter_t::bk</a></div><div class="ttdeci">int bk</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00437">filter.h:437</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_add2b1017d6feb98e792502b0d282c98a"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#add2b1017d6feb98e792502b0d282c98a">reSID::model_filter_init_t::dac_zero</a></div><div class="ttdeci">double dac_zero</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00125">filter.cc:125</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a6e1525b3e3c71a7f5c52c3578a5d20ee"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a6e1525b3e3c71a7f5c52c3578a5d20ee">reSID::Filter::_1024_div_Q</a></div><div class="ttdeci">int _1024_div_Q</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00421">filter.h:421</a></div></div>
<div class="ttc" id="anamespacere_s_i_d_html_a7ec5eff34739318306c207d943e9a64d"><div class="ttname"><a href="namespacere_s_i_d.html#a7ec5eff34739318306c207d943e9a64d">reSID::interpolate</a></div><div class="ttdeci">void interpolate(PointIter p0, PointIter pn, PointPlotter plot, double res)</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2spline_8h_source.html#l00210">spline.h:210</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a7d0cf64e99ba7d320528da9351a7a379"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a7d0cf64e99ba7d320528da9351a7a379">reSID::Filter::set_chip_model</a></div><div class="ttdeci">void set_chip_model(chip_model model)</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00461">filter.cc:461</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_ac56a61ab95244c7568af59bb077849b8"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#ac56a61ab95244c7568af59bb077849b8">reSID::model_filter_init_t::opamp_voltage_size</a></div><div class="ttdeci">int opamp_voltage_size</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00110">filter.cc:110</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_a7267083e355b27cab2c3cc8f41efab6b"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a7267083e355b27cab2c3cc8f41efab6b">reSID::Filter::model_filter_t::n_snake</a></div><div class="ttdeci">int n_snake</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00433">filter.h:433</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00246">cubase64_1analyzePitch.m:246</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_ad724ba04cbde6118ceddbd6635e96eaa"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#ad724ba04cbde6118ceddbd6635e96eaa">reSID::Filter::Filter</a></div><div class="ttdeci">Filter()</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00198">filter.cc:198</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_af7e4ce2490c2ea2ae03bc05198646779"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#af7e4ce2490c2ea2ae03bc05198646779">reSID::Filter::model_filter_t::mixer</a></div><div class="ttdeci">unsigned short mixer[mixer_offset&lt; 8 &gt;::value]</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00446">filter.h:446</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_acd02bd4a0c5d8f65b7024a0f38035194"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#acd02bd4a0c5d8f65b7024a0f38035194">reSID::Filter::Vbp</a></div><div class="ttdeci">int Vbp</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00406">filter.h:406</a></div></div>
<div class="ttc" id="aclassre_s_i_d_1_1_filter_html_a36e0ef60e80455bdabe223aa2d73db6c"><div class="ttname"><a href="classre_s_i_d_1_1_filter.html#a36e0ef60e80455bdabe223aa2d73db6c">reSID::Filter::model_filter</a></div><div class="ttdeci">static model_filter_t model_filter[2]</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00458">filter.h:458</a></div></div>
<div class="ttc" id="anamespacere_s_i_d_html_a6278ce21d164ffe2667c04fd2b02ced6"><div class="ttname"><a href="namespacere_s_i_d.html#a6278ce21d164ffe2667c04fd2b02ced6">reSID::build_dac_table</a></div><div class="ttdeci">void build_dac_table(unsigned short *dac, int bits, double _2R_div_R, bool term)</div><div class="ttdef"><b>Definition:</b> <a href="dac_8cc_source.html#l00075">dac.cc:75</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1_filter_1_1model__filter__t_html_a0c28f7eaed89bff398a7a919e3250051"><div class="ttname"><a href="structre_s_i_d_1_1_filter_1_1model__filter__t.html#a0c28f7eaed89bff398a7a919e3250051">reSID::Filter::model_filter_t::f0_dac</a></div><div class="ttdeci">unsigned short f0_dac[1&lt;&lt; 11]</div><div class="ttdef"><b>Definition:</b> <a href="libsidplayfp-2_80_81_2src_2builders_2resid-builder_2resid_2filter_8h_source.html#l00448">filter.h:448</a></div></div>
<div class="ttc" id="astructre_s_i_d_1_1model__filter__init__t_html_aea1c52896556c87a1a651fd8263090b8"><div class="ttname"><a href="structre_s_i_d_1_1model__filter__init__t.html#aea1c52896556c87a1a651fd8263090b8">reSID::model_filter_init_t::uCox</a></div><div class="ttdeci">double uCox</div><div class="ttdef"><b>Definition:</b> <a href="filter_8cc_source.html#l00121">filter.cc:121</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1438cc8c1a18e5b5e27392fc9c1a8795.html">musictools</a></li><li class="navelem"><a class="el" href="dir_b546ff86fa4f5b96096d07674c05f7aa.html">libsidplayfp-2.0.1</a></li><li class="navelem"><a class="el" href="dir_50cae758fdbc2c9a67ee6e4c345cb681.html">src</a></li><li class="navelem"><a class="el" href="dir_f5e1cd35a65dbf7f22c48d0e3a14da09.html">builders</a></li><li class="navelem"><a class="el" href="dir_70d26d057fcaf211a8269e1abc8ad89c.html">resid-builder</a></li><li class="navelem"><a class="el" href="dir_24b2db060bad1aa44b8fcb21a2d31c5b.html">resid</a></li><li class="navelem"><a class="el" href="filter_8cc.html">filter.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
