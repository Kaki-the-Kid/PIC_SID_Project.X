<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIC SID Project: musictools/MidiPlayer5/VST/OPL3Vsti/opl3emu4v_src/src/opl.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIC SID Project
   &#160;<span id="projectnumber">prototype</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('opl_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">opl.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="opl_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *  Copyright (C) 2002-2013  The DOSBox Team</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *  OPL2/OPL3 emulation library</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *  This library is free software; you can redistribute it and/or</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> *  modify it under the terms of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *  License as published by the Free Software Foundation; either</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *  version 2.1 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *  This library is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *  Lesser General Public License for more details.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *  You should have received a copy of the GNU Lesser General Public</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *  License along with this library; if not, write to the Free Software</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *  Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * Originally based on ADLIBEMU.C, an AdLib/OPL2 emulation library by Ken Silverman</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * Copyright (C) 1998-2001 Ken Silverman</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * Ken Silverman&#39;s official web site: &quot;http://www.advsys.net/ken&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="stdlib_8h.html">stdlib.h</a>&gt;</span> <span class="comment">// rand()</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="opl_8h.html">opl.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">static</span> <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> recipsamp;    <span class="comment">// inverse of sampling rate</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a57ceea29ec6013e22941a09461efbd3d">Bit16s</a> wavtable[<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>*3]; <span class="comment">// wave form table</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// vibrato/tremolo tables</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vib_table[<a class="code" href="opl_8h.html#ac518fde5f732b359f9beaa8d56cedf9b">VIBTAB_SIZE</a>];</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> trem_table[<a class="code" href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a>*2];</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vibval_const[<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>];</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> tremval_const[<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>];</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// vibrato value tables (used per-operator)</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vibval_var1[<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>];</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vibval_var2[<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>];</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//static Bit32s vibval_var3[BLOCKBUF_SIZE];</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//static Bit32s vibval_var4[BLOCKBUF_SIZE];</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// vibrato/trmolo value table pointers</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> *vibval1, *vibval2, *vibval3, *vibval4;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> *tremval1, *tremval2, *tremval3, *tremval4;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">// key scale level lookup table</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> kslmul[4] = {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    0.0, 0.5, 0.25, 1.0     <span class="comment">// -&gt; 0, 3, 1.5, 6 dB/oct</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;};</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// frequency multiplicator lookup table</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> frqmul_tab[16] = {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    0.5,1,2,3,4,5,6,7,8,9,10,10,12,12,15,15</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;};</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// calculated frequency multiplication values (depend on sampling rate)</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">static</span> <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> frqmul[16];</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">// key scale levels</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a> kslev[8][16];</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">// map a channel number to the register offset of the modulator (=register base)</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a> modulatorbase[9] = {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    0,1,2,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    8,9,10,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    16,17,18</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;};</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// map a register base to a modulator operator number or operator number</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a> regbase2modop[44] = {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    0,1,2,0,1,2,0,0,3,4,5,3,4,5,0,0,6,7,8,6,7,8,                    <span class="comment">// first set</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    18,19,20,18,19,20,0,0,21,22,23,21,22,23,0,0,24,25,26,24,25,26   <span class="comment">// second set</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;};</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a> regbase2op[44] = {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    0,1,2,9,10,11,0,0,3,4,5,12,13,14,0,0,6,7,8,15,16,17,            <span class="comment">// first set</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    18,19,20,27,28,29,0,0,21,22,23,30,31,32,0,0,24,25,26,33,34,35   <span class="comment">// second set</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;};</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">// start of the waveform</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> <a class="code" href="cubase64__1analyze_pitch_8m.html#a0c54efa4a11afe5fe8db8a4060803285">waveform</a>[8] = {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;1,</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    (<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>*3)&gt;&gt;2,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    0,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    0,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    (<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>*5)&gt;&gt;2,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&lt;&lt;1</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;};</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// length of the waveform as mask</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> wavemask[8] = {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>-1,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>-1,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    (<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;1)-1,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    (<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;1)-1,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>-1,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    ((<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>*3)&gt;&gt;2)-1,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;1,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>-1</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;};</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// where the first entry resides</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> wavestart[8] = {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    0,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;1,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    0,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;2,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    0,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    0,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    0,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;3</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;};</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// envelope generator function constants</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keyword">static</span> <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> attackconst[4] = {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(1/2.82624),</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(1/2.25280),</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(1/1.88416),</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(1/1.59744)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;};</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">static</span> <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> decrelconst[4] = {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(1/39.28064),</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(1/31.41608),</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(1/26.17344),</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(1/22.44608)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;};</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">  137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(<a class="code" href="structoperator__struct.html">op_type</a>* op_pt, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vib) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#ac7463f3bb276373fcf04f7edb5091c11">wfpos</a> = op_pt-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a>;                       <span class="comment">// waveform position</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// advance waveform time</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> += op_pt-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> += (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(op_pt-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a>)*vib/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a> += generator_add;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="opl_8cpp.html#a369860d23566f666e8cff363d714aea0">  147</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="opl_8cpp.html#a369860d23566f666e8cff363d714aea0">operator_advance_drums</a>(<a class="code" href="structoperator__struct.html">op_type</a>* op_pt1, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vib1, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt2, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vib2, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt3, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vib3) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> c1 = op_pt1-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a>/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> <a class="code" href="music__notes_8h.html#afcc397a4b15ce38bc6de2695d5422606">c3</a> = op_pt3-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a>/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> phasebit = (((c1 &amp; 0x88) ^ ((c1&lt;&lt;5) &amp; 0x80)) | ((<a class="code" href="music__notes_8h.html#afcc397a4b15ce38bc6de2695d5422606">c3</a> ^ (<a class="code" href="music__notes_8h.html#afcc397a4b15ce38bc6de2695d5422606">c3</a>&lt;&lt;2)) &amp; 0x20)) ? 0x02 : 0x00;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> noisebit = <a class="code" href="stdlib_8h.html#ae23144bcbb8e3742b00eb687c36654d1">rand</a>()&amp;1;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> snare_phase_bit = (((<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a>)((op_pt1-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a>/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>) / 0x100))&amp;1);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">//Hihat</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> inttm = (phasebit&lt;&lt;8) | (0x34&lt;&lt;(phasebit ^ (noisebit&lt;&lt;1)));</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    op_pt1-&gt;<a class="code" href="structoperator__struct.html#ac7463f3bb276373fcf04f7edb5091c11">wfpos</a> = inttm*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;              <span class="comment">// waveform position</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// advance waveform time</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    op_pt1-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> += op_pt1-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    op_pt1-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> += (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(op_pt1-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a>)*vib1/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    op_pt1-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a> += generator_add;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">//Snare</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    inttm = ((1+snare_phase_bit) ^ noisebit)&lt;&lt;8;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    op_pt2-&gt;<a class="code" href="structoperator__struct.html#ac7463f3bb276373fcf04f7edb5091c11">wfpos</a> = inttm*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;              <span class="comment">// waveform position</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// advance waveform time</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    op_pt2-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> += op_pt2-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    op_pt2-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> += (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(op_pt2-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a>)*vib2/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    op_pt2-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a> += generator_add;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">//Cymbal</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    inttm = (1+phasebit)&lt;&lt;8;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    op_pt3-&gt;<a class="code" href="structoperator__struct.html#ac7463f3bb276373fcf04f7edb5091c11">wfpos</a> = inttm*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;              <span class="comment">// waveform position</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// advance waveform time</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    op_pt3-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> += op_pt3-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    op_pt3-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> += (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(op_pt3-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a>)*vib3/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    op_pt3-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a> += generator_add;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">// output level is sustained, mode changes only when operator is turned off (-&gt;release)</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// or when the keep-sustained bit is turned off (-&gt;sustain_nokeep)</span></div>
<div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">  184</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(<a class="code" href="structoperator__struct.html">op_type</a>* op_pt, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> modulator, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> trem) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a2870de8dc7bbb66dede35a5bb178dc44">lastcval</a> = op_pt-&gt;<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a>)((op_pt-&gt;<a class="code" href="structoperator__struct.html#ac7463f3bb276373fcf04f7edb5091c11">wfpos</a>+modulator)/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="comment">// wform: -16384 to 16383 (0x4000)</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="comment">// trem :  32768 to 65535 (0x10000)</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">// step_amp: 0.0 to 1.0</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        <span class="comment">// vol  : 1/2^14 to 1/2^29 (/0x4000; /1../0x8000)</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a> = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(op_pt-&gt;<a class="code" href="structoperator__struct.html#a0a5ecc51cb9815c4770232c3e5a0fe32">step_amp</a>*op_pt-&gt;<a class="code" href="structoperator__struct.html#a557b4708e23f9eccded207ed571f1229">vol</a>*op_pt-&gt;<a class="code" href="structoperator__struct.html#a16b1736941c3acc729c938fa7037e534">cur_wform</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&amp;op_pt-&gt;<a class="code" href="structoperator__struct.html#a51a2e89214f71dea465edd64f6ddbf0d">cur_wmask</a>]*trem/16.0);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;}</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">// no action, operator is off</span></div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="opl_8cpp.html#aca1c0db4788383eefe5ac96d18463694">  200</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="opl_8cpp.html#aca1c0db4788383eefe5ac96d18463694">operator_off</a>(<a class="code" href="structoperator__struct.html">op_type</a>* <span class="comment">/*op_pt*/</span>) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// output level is sustained, mode changes only when operator is turned off (-&gt;release)</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// or when the keep-sustained bit is turned off (-&gt;sustain_nokeep)</span></div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="opl_8cpp.html#a9988c8831e36b6d0e166f0e2ccb6319f">  205</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="opl_8cpp.html#a9988c8831e36b6d0e166f0e2ccb6319f">operator_sustain</a>(<a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> num_steps_add = op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a>/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;    <span class="comment">// number of (standardized) samples</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> ct=0; ct&lt;num_steps_add; ct++) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a12f09ea5b06e9429a4ac71d571276825">cur_env_step</a>++;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a> -= num_steps_add*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">// operator in release mode, if output level reaches zero the operator is turned off</span></div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="opl_8cpp.html#af11aedad05a7e9ab2e238f53318573db">  214</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="opl_8cpp.html#af11aedad05a7e9ab2e238f53318573db">operator_release</a>(<a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="comment">// ??? boundary?</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> &gt; 0.00000001) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// release phase</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> *= op_pt-&gt;<a class="code" href="structoperator__struct.html#ad037d5ea40b636bb646beda963397bb1">releasemul</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> num_steps_add = op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a>/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;    <span class="comment">// number of (standardized) samples</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> ct=0; ct&lt;num_steps_add; ct++) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a12f09ea5b06e9429a4ac71d571276825">cur_env_step</a>++;                      <span class="comment">// sample counter</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span> ((op_pt-&gt;<a class="code" href="structoperator__struct.html#a12f09ea5b06e9429a4ac71d571276825">cur_env_step</a> &amp; op_pt-&gt;<a class="code" href="structoperator__struct.html#a66918688d0edd30559bbae31aa58162e">env_step_r</a>)==0) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> &lt;= 0.00000001) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="comment">// release phase finished, turn off this operator</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> = 0.0;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> == <a class="code" href="opl_8h.html#a1d2b2e8ba0b268b55f24e3a495f33220">OF_TYPE_REL</a>) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> = <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            op_pt-&gt;<a class="code" href="structoperator__struct.html#a0a5ecc51cb9815c4770232c3e5a0fe32">step_amp</a> = op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a> -= num_steps_add*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">// operator in decay mode, if sustain level is reached the output level is either</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// kept (sustain level keep enabled) or the operator is switched into release mode</span></div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="opl_8cpp.html#a4e58658e8f74cd38d4b99f0fadd9eccf">  240</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="opl_8cpp.html#a4e58658e8f74cd38d4b99f0fadd9eccf">operator_decay</a>(<a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> &gt; op_pt-&gt;<a class="code" href="structoperator__struct.html#abfe2b5c4ae5eeff93737c87a9479ff39">sustain_level</a>) {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="comment">// decay phase</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> *= op_pt-&gt;<a class="code" href="structoperator__struct.html#ae2455a6e181bff5ae3fc900cb8916e7a">decaymul</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> num_steps_add = op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a>/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;    <span class="comment">// number of (standardized) samples</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> ct=0; ct&lt;num_steps_add; ct++) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a12f09ea5b06e9429a4ac71d571276825">cur_env_step</a>++;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">if</span> ((op_pt-&gt;<a class="code" href="structoperator__struct.html#a12f09ea5b06e9429a4ac71d571276825">cur_env_step</a> &amp; op_pt-&gt;<a class="code" href="structoperator__struct.html#a23b657996c62f7e78f04612bb62b13b9">env_step_d</a>)==0) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> &lt;= op_pt-&gt;<a class="code" href="structoperator__struct.html#abfe2b5c4ae5eeff93737c87a9479ff39">sustain_level</a>) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="comment">// decay phase finished, sustain level reached</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a532e1ddaca6b2ccbe6c0ca8cbed5e7b3">sus_keep</a>) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    <span class="comment">// keep sustain level (until turned off)</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> = <a class="code" href="opl_8h.html#a1d92f4195f75880716efa08b64b927e0">OF_TYPE_SUS</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> = op_pt-&gt;<a class="code" href="structoperator__struct.html#abfe2b5c4ae5eeff93737c87a9479ff39">sustain_level</a>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                    <span class="comment">// next: release phase</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> = <a class="code" href="opl_8h.html#a8cb4549429c33cb3f85d353b9f3498bb">OF_TYPE_SUS_NOKEEP</a>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            op_pt-&gt;<a class="code" href="structoperator__struct.html#a0a5ecc51cb9815c4770232c3e5a0fe32">step_amp</a> = op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a> -= num_steps_add*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">// operator in attack mode, if full output level is reached,</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">// the operator is switched into decay mode</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="opl_8cpp.html#aaa7310d1a5fe6fc5c068485f8a03c84b">  269</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="opl_8cpp.html#aaa7310d1a5fe6fc5c068485f8a03c84b">operator_attack</a>(<a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> = ((op_pt-&gt;<a class="code" href="structoperator__struct.html#a77fd6ded964e94c4803095f440b08ca7">a3</a>*op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> + op_pt-&gt;<a class="code" href="structoperator__struct.html#acd1e0174136581a0fcc6a35df6ed29c9">a2</a>)*op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> + op_pt-&gt;<a class="code" href="structoperator__struct.html#aa4e21ce85899203574a5431ee2df64c7">a1</a>)*op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> + op_pt-&gt;<a class="code" href="structoperator__struct.html#ac160de4650e66a61bfe7dd00bebb798e">a0</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> num_steps_add = op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a>/<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;        <span class="comment">// number of (standardized) samples</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> ct=0; ct&lt;num_steps_add; ct++) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a12f09ea5b06e9429a4ac71d571276825">cur_env_step</a>++;  <span class="comment">// next sample</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">if</span> ((op_pt-&gt;<a class="code" href="structoperator__struct.html#a12f09ea5b06e9429a4ac71d571276825">cur_env_step</a> &amp; op_pt-&gt;<a class="code" href="structoperator__struct.html#a553fba925ac2533e44086e2821490675">env_step_a</a>)==0) {     <span class="comment">// check if next step already reached</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> &gt; 1.0) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <span class="comment">// attack phase finished, next: decay</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> = <a class="code" href="opl_8h.html#a84b5feacfdaff61e689b71534383203c">OF_TYPE_DEC</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a> = 1.0;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                op_pt-&gt;<a class="code" href="structoperator__struct.html#a0a5ecc51cb9815c4770232c3e5a0fe32">step_amp</a> = 1.0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            op_pt-&gt;<a class="code" href="structoperator__struct.html#a3f3851b57c329384b0262541aad9ce32">step_skip_pos_a</a> &lt;&lt;= 1;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a3f3851b57c329384b0262541aad9ce32">step_skip_pos_a</a>==0) op_pt-&gt;<a class="code" href="structoperator__struct.html#a3f3851b57c329384b0262541aad9ce32">step_skip_pos_a</a> = 1;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a3f3851b57c329384b0262541aad9ce32">step_skip_pos_a</a> &amp; op_pt-&gt;<a class="code" href="structoperator__struct.html#a4164351b30da94c677c05667dd781518">env_step_skip_a</a>) {  <span class="comment">// check if required to skip next step</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                op_pt-&gt;<a class="code" href="structoperator__struct.html#a0a5ecc51cb9815c4770232c3e5a0fe32">step_amp</a> = op_pt-&gt;<a class="code" href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">amp</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">generator_pos</a> -= num_steps_add*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="opl_8cpp.html#a893500349493e634ef27bea156738800">  293</a></span>&#160;<span class="keyword">typedef</span> <a class="code" href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a048848dadb8ead3df6561b53a3ef5219">void</a> (*<a class="code" href="opl_8cpp.html#a893500349493e634ef27bea156738800">optype_fptr</a>)(<a class="code" href="structoperator__struct.html">op_type</a>*);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">  295</a></span>&#160;<a class="code" href="opl_8cpp.html#a893500349493e634ef27bea156738800">optype_fptr</a> <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[6] = {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="opl_8cpp.html#aaa7310d1a5fe6fc5c068485f8a03c84b">operator_attack</a>,</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="opl_8cpp.html#a4e58658e8f74cd38d4b99f0fadd9eccf">operator_decay</a>,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="opl_8cpp.html#af11aedad05a7e9ab2e238f53318573db">operator_release</a>,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="opl_8cpp.html#a9988c8831e36b6d0e166f0e2ccb6319f">operator_sustain</a>,   <span class="comment">// sustain phase (keeping level)</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="opl_8cpp.html#af11aedad05a7e9ab2e238f53318573db">operator_release</a>,   <span class="comment">// sustain_nokeep phase (release-style)</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="opl_8cpp.html#aca1c0db4788383eefe5ac96d18463694">operator_off</a></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;};</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="keywordtype">void</span> OPL::change_attackrate(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> attackrate = adlibreg[<a class="code" href="opl_8h.html#a994d1f8897e07d0ce422be4d15effb77">ARC_ATTR_DECR</a>+regbase]&gt;&gt;4;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (attackrate) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)attackrate+(op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>&gt;&gt;2)-1)*attackconst[op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>&amp;3]*recipsamp);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">// attack rate coefficients</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#ac160de4650e66a61bfe7dd00bebb798e">a0</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(0.0377*<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#aa4e21ce85899203574a5431ee2df64c7">a1</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(10.73*<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>+1);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#acd1e0174136581a0fcc6a35df6ed29c9">a2</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(-17.57*<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a77fd6ded964e94c4803095f440b08ca7">a3</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(7.42*<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> step_skip = attackrate*4 + op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> steps = step_skip &gt;&gt; 2;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a553fba925ac2533e44086e2821490675">env_step_a</a> = (1&lt;&lt;(steps&lt;=12?12-steps:0))-1;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> step_num = (step_skip&lt;=48)?(4-(step_skip&amp;3)):0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a> step_skip_mask[5] = {0xff, 0xfe, 0xee, 0xba, 0xaa}; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a4164351b30da94c677c05667dd781518">env_step_skip_a</a> = step_skip_mask[step_num];</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span> (step_skip&gt;=60) {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            op_pt-&gt;<a class="code" href="structoperator__struct.html#ac160de4650e66a61bfe7dd00bebb798e">a0</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(2.0);  <span class="comment">// something that triggers an immediate transition to amp:=1.0</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            op_pt-&gt;<a class="code" href="structoperator__struct.html#aa4e21ce85899203574a5431ee2df64c7">a1</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(0.0);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            op_pt-&gt;<a class="code" href="structoperator__struct.html#acd1e0174136581a0fcc6a35df6ed29c9">a2</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(0.0);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            op_pt-&gt;<a class="code" href="structoperator__struct.html#a77fd6ded964e94c4803095f440b08ca7">a3</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(0.0);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="comment">// attack disabled</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#ac160de4650e66a61bfe7dd00bebb798e">a0</a> = 0.0;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#aa4e21ce85899203574a5431ee2df64c7">a1</a> = 1.0;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#acd1e0174136581a0fcc6a35df6ed29c9">a2</a> = 0.0;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a77fd6ded964e94c4803095f440b08ca7">a3</a> = 0.0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a553fba925ac2533e44086e2821490675">env_step_a</a> = 0;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a4164351b30da94c677c05667dd781518">env_step_skip_a</a> = 0;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="keywordtype">void</span> OPL::change_decayrate(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> decayrate = adlibreg[<a class="code" href="opl_8h.html#a994d1f8897e07d0ce422be4d15effb77">ARC_ATTR_DECR</a>+regbase]&amp;15;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">// decaymul should be 1.0 when decayrate==0</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (decayrate) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(-7.4493*decrelconst[op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>&amp;3]*recipsamp);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#ae2455a6e181bff5ae3fc900cb8916e7a">decaymul</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>*pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(decayrate+(op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>&gt;&gt;2)))));</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> steps = (decayrate*4 + op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>) &gt;&gt; 2;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a23b657996c62f7e78f04612bb62b13b9">env_step_d</a> = (1&lt;&lt;(steps&lt;=12?12-steps:0))-1;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#ae2455a6e181bff5ae3fc900cb8916e7a">decaymul</a> = 1.0;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a23b657996c62f7e78f04612bb62b13b9">env_step_d</a> = 0;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="keywordtype">void</span> OPL::change_releaserate(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> releaserate = adlibreg[<a class="code" href="opl_8h.html#a5f4f574443144025fd809e36ba902483">ARC_SUSL_RELR</a>+regbase]&amp;15;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// releasemul should be 1.0 when releaserate==0</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (releaserate) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> <a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(-7.4493*decrelconst[op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>&amp;3]*recipsamp);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#ad037d5ea40b636bb646beda963397bb1">releasemul</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>*pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(releaserate+(op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>&gt;&gt;2)))));</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> steps = (releaserate*4 + op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a>) &gt;&gt; 2;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a66918688d0edd30559bbae31aa58162e">env_step_r</a> = (1&lt;&lt;(steps&lt;=12?12-steps:0))-1;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#ad037d5ea40b636bb646beda963397bb1">releasemul</a> = 1.0;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a66918688d0edd30559bbae31aa58162e">env_step_r</a> = 0;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="keywordtype">void</span> OPL::change_sustainlevel(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> sustainlevel = adlibreg[<a class="code" href="opl_8h.html#a5f4f574443144025fd809e36ba902483">ARC_SUSL_RELR</a>+regbase]&gt;&gt;4;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// sustainlevel should be 0.0 when sustainlevel==15 (max)</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (sustainlevel&lt;15) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#abfe2b5c4ae5eeff93737c87a9479ff39">sustain_level</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)sustainlevel * (-<a class="code" href="opl_8h.html#a318ac4e2cff04194f748649cb71a73ef">FL05</a>)));</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#abfe2b5c4ae5eeff93737c87a9479ff39">sustain_level</a> = 0.0;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;}</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="keywordtype">void</span> OPL::change_waveform(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (regbase&gt;=<a class="code" href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a>) regbase -= (<a class="code" href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a>-22);  <span class="comment">// second set starts at 22</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="comment">// waveform selection</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a51a2e89214f71dea465edd64f6ddbf0d">cur_wmask</a> = wavemask[wave_sel[regbase]];</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a16b1736941c3acc729c938fa7037e534">cur_wform</a> = &amp;wavtable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a0c54efa4a11afe5fe8db8a4060803285">waveform</a>[wave_sel[regbase]]];</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">// (might need to be adapted to waveform type here...)</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;}</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="keywordtype">void</span> OPL::change_keepsustain(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a532e1ddaca6b2ccbe6c0ca8cbed5e7b3">sus_keep</a> = (adlibreg[<a class="code" href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a>+regbase]&amp;0x20)&gt;0;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>==<a class="code" href="opl_8h.html#a1d92f4195f75880716efa08b64b927e0">OF_TYPE_SUS</a>) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (!op_pt-&gt;<a class="code" href="structoperator__struct.html#a532e1ddaca6b2ccbe6c0ca8cbed5e7b3">sus_keep</a>) op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> = <a class="code" href="opl_8h.html#a8cb4549429c33cb3f85d353b9f3498bb">OF_TYPE_SUS_NOKEEP</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>==<a class="code" href="opl_8h.html#a8cb4549429c33cb3f85d353b9f3498bb">OF_TYPE_SUS_NOKEEP</a>) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a532e1ddaca6b2ccbe6c0ca8cbed5e7b3">sus_keep</a>) op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> = <a class="code" href="opl_8h.html#a1d92f4195f75880716efa08b64b927e0">OF_TYPE_SUS</a>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;}</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">// enable/disable vibrato/tremolo LFO effects</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="keywordtype">void</span> OPL::change_vibrato(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#aaa56530c33fdaf6a75bd8cc2ac8250d3">vibrato</a> = (adlibreg[<a class="code" href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a>+regbase]&amp;0x40)!=0;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a1cd1b4cd39da5756ce6742d8df00e84a">tremolo</a> = (adlibreg[<a class="code" href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a>+regbase]&amp;0x80)!=0;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">// change amount of self-feedback</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="keywordtype">void</span> OPL::change_feedback(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> chanbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> feedback = adlibreg[<a class="code" href="opl_8h.html#a37ce6a33c319c21e2eeb62be4baa974f">ARC_FEEDBACK</a>+chanbase]&amp;14;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (feedback) op_pt-&gt;<a class="code" href="structoperator__struct.html#a0496516df54532cf3c7a82ee38363410">mfbi</a> = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)((feedback&gt;&gt;1)+8)));</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">else</span> op_pt-&gt;<a class="code" href="structoperator__struct.html#a0496516df54532cf3c7a82ee38363410">mfbi</a> = 0;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keywordtype">void</span> OPL::change_frequency(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> chanbase, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt) {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">// frequency</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> frn = ((((<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a>)adlibreg[<a class="code" href="opl_8h.html#ae86e27103d6746d4fb38973eab133915">ARC_KON_BNUM</a>+chanbase])&amp;3)&lt;&lt;8) + (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a>)adlibreg[<a class="code" href="opl_8h.html#a884e05b6c710f7014cb312508e2a10fd">ARC_FREQ_NUM</a>+chanbase];</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// block number/octave</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> oct = ((((<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a>)adlibreg[<a class="code" href="opl_8h.html#ae86e27103d6746d4fb38973eab133915">ARC_KON_BNUM</a>+chanbase])&gt;&gt;2)&amp;7);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a> = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((frn&gt;&gt;7)&amp;7);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// keysplit</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> note_sel = (adlibreg[8]&gt;&gt;6)&amp;1;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a> = ((frn&gt;&gt;9)&amp;(note_sel^1)) | ((frn&gt;&gt;8)&amp;note_sel);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a> += (oct&lt;&lt;1);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// envelope scaling (KSR)</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (!(adlibreg[<a class="code" href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a>+regbase]&amp;0x10)) op_pt-&gt;<a class="code" href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">toff</a> &gt;&gt;= 2;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// 20+a0+b0:</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">tinc</a> = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a>)((((<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(frn&lt;&lt;oct))*frqmul[adlibreg[<a class="code" href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a>+regbase]&amp;15]));</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// 40+a0+b0:</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> vol_in = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)((<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(adlibreg[<a class="code" href="opl_8h.html#a5359529d9da2a6eca2ee99973116ebe1">ARC_KSL_OUTLEV</a>+regbase]&amp;63) +</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                            kslmul[adlibreg[<a class="code" href="opl_8h.html#a5359529d9da2a6eca2ee99973116ebe1">ARC_KSL_OUTLEV</a>+regbase]&gt;&gt;6]*kslev[oct][frn&gt;&gt;6]);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    op_pt-&gt;<a class="code" href="structoperator__struct.html#a557b4708e23f9eccded207ed571f1229">vol</a> = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(vol_in * -0.125 - 14)));</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">// operator frequency changed, care about features that depend on it</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    change_attackrate(regbase,op_pt);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    change_decayrate(regbase,op_pt);</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    change_releaserate(regbase,op_pt);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="keywordtype">void</span> OPL::enable_operator(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase, <a class="code" href="structoperator__struct.html">op_type</a>* op_pt, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> act_type) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="comment">// check if this is really an off-on transition</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a9de64ee5287c43eaf992d1b69c6a59d5">act_state</a> == <a class="code" href="opl_8h.html#a7dfd22f87c63407fe1f1936e7bfe05d7">OP_ACT_OFF</a>) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> wselbase = regbase;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span> (wselbase&gt;=<a class="code" href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a>) wselbase -= (<a class="code" href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a>-22);    <span class="comment">// second set starts at 22</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">tcount</a> = wavestart[wave_sel[wselbase]]*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">// start with attack mode</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> = <a class="code" href="opl_8h.html#a609f922aa3a1038c83a4e5943907811b">OF_TYPE_ATT</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a9de64ee5287c43eaf992d1b69c6a59d5">act_state</a> |= act_type;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;}</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="keywordtype">void</span> OPL::disable_operator(<a class="code" href="structoperator__struct.html">op_type</a>* op_pt, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> act_type) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// check if this is really an on-off transition</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a9de64ee5287c43eaf992d1b69c6a59d5">act_state</a> != <a class="code" href="opl_8h.html#a7dfd22f87c63407fe1f1936e7bfe05d7">OP_ACT_OFF</a>) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        op_pt-&gt;<a class="code" href="structoperator__struct.html#a9de64ee5287c43eaf992d1b69c6a59d5">act_state</a> &amp;= (~act_type);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#a9de64ee5287c43eaf992d1b69c6a59d5">act_state</a> == <a class="code" href="opl_8h.html#a7dfd22f87c63407fe1f1936e7bfe05d7">OP_ACT_OFF</a>) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keywordflow">if</span> (op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) op_pt-&gt;<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> = <a class="code" href="opl_8h.html#a1d2b2e8ba0b268b55f24e3a495f33220">OF_TYPE_REL</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="class_o_p_l.html#afea7d335d3a936bd669ce30f867ae189">  459</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_o_p_l.html#afea7d335d3a936bd669ce30f867ae189">OPL::adlib_init</a>(<span class="keywordtype">int</span> <a class="code" href="gsid_8cpp.html#ac38751c7169cfeb9325a947cc0484286">samplerate</a>) {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, j, oct;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    int_samplerate = <a class="code" href="gsid_8cpp.html#ac38751c7169cfeb9325a947cc0484286">samplerate</a>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    generator_add = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a>)(<a class="code" href="opl_8h.html#af7c8f4371e05c0e046fa661841e7e155">INTFREQU</a>*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>/int_samplerate);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="string_8h.html#a61225aab8c8ea6fd46ee4def7d35a0b8">memset</a>((<span class="keywordtype">void</span> *)adlibreg,0,<span class="keyword">sizeof</span>(adlibreg));</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="string_8h.html#a61225aab8c8ea6fd46ee4def7d35a0b8">memset</a>((<span class="keywordtype">void</span> *)<a class="code" href="structop.html">op</a>,0,<span class="keyword">sizeof</span>(<a class="code" href="structoperator__struct.html">op_type</a>)*<a class="code" href="opl_8h.html#aff885dd90e21fd4128ccae79f3a9e354">MAXOPERATORS</a>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="string_8h.html#a61225aab8c8ea6fd46ee4def7d35a0b8">memset</a>((<span class="keywordtype">void</span> *)wave_sel,0,<span class="keyword">sizeof</span>(wave_sel));</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="opl_8h.html#aff885dd90e21fd4128ccae79f3a9e354">MAXOPERATORS</a>;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].op_state = <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].act_state = <a class="code" href="opl_8h.html#a7dfd22f87c63407fe1f1936e7bfe05d7">OP_ACT_OFF</a>;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].amp = 0.0;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].step_amp = 0.0;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].vol = 0.0;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].tcount = 0;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].tinc = 0;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].toff = 0;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].cur_wmask = wavemask[0];</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].cur_wform = &amp;wavtable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a0c54efa4a11afe5fe8db8a4060803285">waveform</a>[0]];</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].freq_high = 0;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].generator_pos = 0;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].cur_env_step = 0;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].env_step_a = 0;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].env_step_d = 0;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].env_step_r = 0;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].step_skip_pos_a = 0;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].env_step_skip_a = 0;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].is_4op = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].is_4op_attached = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].left_pan = 1;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <a class="code" href="structop.html">op</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].right_pan = 1;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    recipsamp = 1.0 / (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)int_samplerate;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=15;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&gt;=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>--) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        frqmul[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(frqmul_tab[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*<a class="code" href="opl_8h.html#af7c8f4371e05c0e046fa661841e7e155">INTFREQU</a>/(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>*(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*recipsamp);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    status = 0;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    opl_index = 0;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160; </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">// create vibrato table</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    vib_table[0] = 8;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    vib_table[1] = 4;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    vib_table[2] = 0;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    vib_table[3] = -4;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=4; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="opl_8h.html#ac518fde5f732b359f9beaa8d56cedf9b">VIBTAB_SIZE</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) vib_table[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = vib_table[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-4]*-1;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="comment">// vibrato at ~6.1 ?? (opl3 docs say 6.1, opl4 docs say 6.0, y8950 docs say 6.4)</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    vibtab_add = <span class="keyword">static_cast&lt;</span><a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a><span class="keyword">&gt;</span>(<a class="code" href="opl_8h.html#ac518fde5f732b359f9beaa8d56cedf9b">VIBTAB_SIZE</a>*<a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a>/8192*<a class="code" href="opl_8h.html#af7c8f4371e05c0e046fa661841e7e155">INTFREQU</a>/int_samplerate);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    vibtab_pos = 0;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) vibval_const[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="comment">// create tremolo table</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> trem_table_int[<a class="code" href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a>];</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;14; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)    trem_table_int[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-13;       <span class="comment">// upwards (13 to 26 -&gt; -0.5/6 to 0)</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=14; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;41; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)   trem_table_int[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = -<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+14;      <span class="comment">// downwards (26 to 0 -&gt; 0 to -1/6)</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=41; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;53; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)   trem_table_int[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-40-26;    <span class="comment">// upwards (1 to 12 -&gt; -1/6 to -0.5/6)</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// 0.0 .. -26/26*4.8/6 == [0.0 .. -0.8], 4/53 steps == [1 .. 0.57]</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> trem_val1=(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)(((<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)trem_table_int[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>])*4.8/26.0/6.0);                <span class="comment">// 4.8db</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a> trem_val2=(<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)((<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)((<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(trem_table_int[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]/4))*1.2/6.0/6.0);     <span class="comment">// 1.2db (larger stepping)</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        trem_table[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,trem_val1)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        trem_table[<a class="code" href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a>+<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)(pow(<a class="code" href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a>,trem_val2)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    }</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// tremolo at 3.7hz</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    tremtab_add = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a>)((<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)<a class="code" href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a> * <a class="code" href="opl_8h.html#a60297daf2dccf6c92062c7490a0ae039">TREM_FREQ</a> * <a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a> / (<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)int_samplerate);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    tremtab_pos = 0;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) tremval_const[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keyword">static</span> <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> initfirstime = 0;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordflow">if</span> (!initfirstime) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        initfirstime = 1;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="comment">// create waveform tables</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;(<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;1);<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            wavtable[(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;&lt;1)  +<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a57ceea29ec6013e22941a09461efbd3d">Bit16s</a>)(16384*sin((<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)((<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;&lt;1)  )*<a class="code" href="opl_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>*2/<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>));</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            wavtable[(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;&lt;1)+1+<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a57ceea29ec6013e22941a09461efbd3d">Bit16s</a>)(16384*sin((<a class="code" href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a>)((<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;&lt;1)+1)*<a class="code" href="opl_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a>*2/<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>));</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            wavtable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]                 = wavtable[(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;&lt;1)  +<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>];</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            <span class="comment">// alternative: (zero-less)</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">/*          wavtable[(i&lt;&lt;1)  +WAVEPREC] = (Bit16s)(16384*sin((fltype)((i&lt;&lt;2)+1)*PI/WAVEPREC));</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">            wavtable[(i&lt;&lt;1)+1+WAVEPREC] = (Bit16s)(16384*sin((fltype)((i&lt;&lt;2)+3)*PI/WAVEPREC));</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">            wavtable[i]                 = wavtable[(i&lt;&lt;1)-1+WAVEPREC]; */</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;(<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;3);<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            wavtable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+(<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&lt;&lt;1)]       = wavtable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+(<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;3)]-16384;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            wavtable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+((<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>*17)&gt;&gt;3)]  = wavtable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+(<a class="code" href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a>&gt;&gt;2)]+16384;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="comment">// key scale level table verified ([table in book]*8/3)</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        kslev[7][0] = 0;    kslev[7][1] = 24;   kslev[7][2] = 32;   kslev[7][3] = 37;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        kslev[7][4] = 40;   kslev[7][5] = 43;   kslev[7][6] = 45;   kslev[7][7] = 47;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        kslev[7][8] = 48;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=9;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;16;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) kslev[7][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a>)(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+41);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">for</span> (j=6;j&gt;=0;j--) {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;16;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                oct = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a>)kslev[j+1][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]-8;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                <span class="keywordflow">if</span> (oct &lt; 0) oct = 0;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                kslev[j][<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a>)oct;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="class_o_p_l.html#a0b75e90817861a9730640fff0468e3ed">  580</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_o_p_l.html#a0b75e90817861a9730640fff0468e3ed">OPL::adlib_write</a>(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> idx, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a> val) {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a> second_set = idx&amp;0x100;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    adlibreg[idx] = val;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">switch</span> (idx&amp;0xf0) {</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a23c6b8cb901fba6f4cd46eefd152d1b7">ARC_CONTROL</a>:</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="comment">// here we check for the second set registers, too:</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">switch</span> (idx) {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">case</span> 0x02:  <span class="comment">// timer1 counter</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">case</span> 0x03:  <span class="comment">// timer2 counter</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">case</span> 0x04:</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="comment">// IRQ reset, timer mask/start</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            <span class="keywordflow">if</span> (val&amp;0x80) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                <span class="comment">// clear IRQ bits in status register</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                status &amp;= ~0x60;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                status = 0;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">case</span> 0x04|<a class="code" href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a>:</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="comment">// 4op enable/disable switches for each possible channel</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            <a class="code" href="structop.html">op</a>[0].is_4op = (val&amp;1)&gt;0;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <a class="code" href="structop.html">op</a>[3].is_4op_attached = <a class="code" href="structop.html">op</a>[0].is_4op;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <a class="code" href="structop.html">op</a>[1].is_4op = (val&amp;2)&gt;0;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <a class="code" href="structop.html">op</a>[4].is_4op_attached = <a class="code" href="structop.html">op</a>[1].is_4op;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <a class="code" href="structop.html">op</a>[2].is_4op = (val&amp;4)&gt;0;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            <a class="code" href="structop.html">op</a>[5].is_4op_attached = <a class="code" href="structop.html">op</a>[2].is_4op;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <a class="code" href="structop.html">op</a>[18].is_4op = (val&amp;8)&gt;0;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <a class="code" href="structop.html">op</a>[21].is_4op_attached = <a class="code" href="structop.html">op</a>[18].is_4op;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <a class="code" href="structop.html">op</a>[19].is_4op = (val&amp;16)&gt;0;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <a class="code" href="structop.html">op</a>[22].is_4op_attached = <a class="code" href="structop.html">op</a>[19].is_4op;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <a class="code" href="structop.html">op</a>[20].is_4op = (val&amp;32)&gt;0;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            <a class="code" href="structop.html">op</a>[23].is_4op_attached = <a class="code" href="structop.html">op</a>[20].is_4op;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">case</span> 0x05|<a class="code" href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a>:</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">case</span> 0x08:</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="comment">// CSW, note select</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a>:</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a>+0x10: {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="comment">// tremolo/vibrato/sustain keeping enabled; key scale rate; frequency multiplication</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;        <span class="keywordtype">int</span> num = idx&amp;7;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> base = (idx-<a class="code" href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a>)&amp;0xff;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">if</span> ((num&lt;6) &amp;&amp; (base&lt;22)) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> modop = regbase2modop[second_set?(base+22):base];</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase = base+second_set;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> chanbase = second_set?(modop-18+<a class="code" href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a>):modop;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="comment">// change tremolo/vibrato and sustain keeping of this operator</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <a class="code" href="structoperator__struct.html">op_type</a>* op_ptr = &amp;<a class="code" href="structop.html">op</a>[modop+((num&lt;3) ? 0 : 9)];</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            change_keepsustain(regbase,op_ptr);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            change_vibrato(regbase,op_ptr);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <span class="comment">// change frequency calculations of this operator as</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="comment">// key scale rate and frequency multiplicator can be changed</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; (<a class="code" href="structop.html">op</a>[modop].is_4op_attached)) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="comment">// operator uses frequency of channel</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                change_frequency(chanbase-3,regbase,op_ptr);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                change_frequency(chanbase,regbase,op_ptr);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            }</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a5359529d9da2a6eca2ee99973116ebe1">ARC_KSL_OUTLEV</a>:</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a5359529d9da2a6eca2ee99973116ebe1">ARC_KSL_OUTLEV</a>+0x10: {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="comment">// key scale level; output rate</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="keywordtype">int</span> num = idx&amp;7;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> base = (idx-<a class="code" href="opl_8h.html#a5359529d9da2a6eca2ee99973116ebe1">ARC_KSL_OUTLEV</a>)&amp;0xff;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">if</span> ((num&lt;6) &amp;&amp; (base&lt;22)) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> modop = regbase2modop[second_set?(base+22):base];</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> chanbase = second_set?(modop-18+<a class="code" href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a>):modop;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="comment">// change frequency calculations of this operator as</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="comment">// key scale level and output rate can be changed</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <a class="code" href="structoperator__struct.html">op_type</a>* op_ptr = &amp;<a class="code" href="structop.html">op</a>[modop+((num&lt;3) ? 0 : 9)];</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase = base+second_set;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; (<a class="code" href="structop.html">op</a>[modop].is_4op_attached)) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <span class="comment">// operator uses frequency of channel</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                change_frequency(chanbase-3,regbase,op_ptr);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                change_frequency(chanbase,regbase,op_ptr);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a994d1f8897e07d0ce422be4d15effb77">ARC_ATTR_DECR</a>:</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a994d1f8897e07d0ce422be4d15effb77">ARC_ATTR_DECR</a>+0x10: {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="comment">// attack/decay rates</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="keywordtype">int</span> num = idx&amp;7;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> base = (idx-<a class="code" href="opl_8h.html#a994d1f8897e07d0ce422be4d15effb77">ARC_ATTR_DECR</a>)&amp;0xff;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <span class="keywordflow">if</span> ((num&lt;6) &amp;&amp; (base&lt;22)) {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase = base+second_set;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            <span class="comment">// change attack rate and decay rate of this operator</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <a class="code" href="structoperator__struct.html">op_type</a>* op_ptr = &amp;<a class="code" href="structop.html">op</a>[regbase2op[second_set?(base+22):base]];</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            change_attackrate(regbase,op_ptr);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            change_decayrate(regbase,op_ptr);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a5f4f574443144025fd809e36ba902483">ARC_SUSL_RELR</a>:</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a5f4f574443144025fd809e36ba902483">ARC_SUSL_RELR</a>+0x10: {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        <span class="comment">// sustain level; release rate</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordtype">int</span> num = idx&amp;7;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> base = (idx-<a class="code" href="opl_8h.html#a5f4f574443144025fd809e36ba902483">ARC_SUSL_RELR</a>)&amp;0xff;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordflow">if</span> ((num&lt;6) &amp;&amp; (base&lt;22)) {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> regbase = base+second_set;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            <span class="comment">// change sustain level and release rate of this operator</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <a class="code" href="structoperator__struct.html">op_type</a>* op_ptr = &amp;<a class="code" href="structop.html">op</a>[regbase2op[second_set?(base+22):base]];</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            change_releaserate(regbase,op_ptr);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;            change_sustainlevel(regbase,op_ptr);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        }</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a884e05b6c710f7014cb312508e2a10fd">ARC_FREQ_NUM</a>: {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="comment">// 0xa0-0xa8 low8 frequency</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> base = (idx-<a class="code" href="opl_8h.html#a884e05b6c710f7014cb312508e2a10fd">ARC_FREQ_NUM</a>)&amp;0xff;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keywordflow">if</span> (base&lt;9) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> opbase = second_set?(base+18):base;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; <a class="code" href="structop.html">op</a>[opbase].is_4op_attached) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            <span class="comment">// regbase of modulator:</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> modbase = modulatorbase[base]+second_set;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> chanbase = base+second_set;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            change_frequency(chanbase,modbase,&amp;<a class="code" href="structop.html">op</a>[opbase]);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            change_frequency(chanbase,modbase+3,&amp;<a class="code" href="structop.html">op</a>[opbase+9]);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            <span class="comment">// for 4op channels all four operators are modified to the frequency of the channel</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; <a class="code" href="structop.html">op</a>[second_set?(base+18):base].is_4op) {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                change_frequency(chanbase,modbase+8,&amp;<a class="code" href="structop.html">op</a>[opbase+3]);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                change_frequency(chanbase,modbase+3+8,&amp;<a class="code" href="structop.html">op</a>[opbase+3+9]);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        }</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        }</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#ae86e27103d6746d4fb38973eab133915">ARC_KON_BNUM</a>: {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="keywordflow">if</span> (idx == <a class="code" href="opl_8h.html#aed59db242877547b015d1e706a5c2c7b">ARC_PERC_MODE</a>) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;            <span class="keywordflow">if</span> (second_set) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;            <span class="keywordflow">if</span> ((val&amp;0x30) == 0x30) {       <span class="comment">// BassDrum active</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                enable_operator(16,&amp;<a class="code" href="structop.html">op</a>[6],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                change_frequency(6,16,&amp;<a class="code" href="structop.html">op</a>[6]);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                enable_operator(16+3,&amp;<a class="code" href="structop.html">op</a>[6+9],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                change_frequency(6,16+3,&amp;<a class="code" href="structop.html">op</a>[6+9]);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                disable_operator(&amp;<a class="code" href="structop.html">op</a>[6],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                disable_operator(&amp;<a class="code" href="structop.html">op</a>[6+9],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="keywordflow">if</span> ((val&amp;0x28) == 0x28) {       <span class="comment">// Snare active</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                enable_operator(17+3,&amp;<a class="code" href="structop.html">op</a>[16],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                change_frequency(7,17+3,&amp;<a class="code" href="structop.html">op</a>[16]);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                disable_operator(&amp;<a class="code" href="structop.html">op</a>[16],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;            }</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <span class="keywordflow">if</span> ((val&amp;0x24) == 0x24) {       <span class="comment">// TomTom active</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                enable_operator(18,&amp;<a class="code" href="structop.html">op</a>[8],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                change_frequency(8,18,&amp;<a class="code" href="structop.html">op</a>[8]);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                disable_operator(&amp;<a class="code" href="structop.html">op</a>[8],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            <span class="keywordflow">if</span> ((val&amp;0x22) == 0x22) {       <span class="comment">// Cymbal active</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                enable_operator(18+3,&amp;<a class="code" href="structop.html">op</a>[8+9],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                change_frequency(8,18+3,&amp;<a class="code" href="structop.html">op</a>[8+9]);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                disable_operator(&amp;<a class="code" href="structop.html">op</a>[8+9],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordflow">if</span> ((val&amp;0x21) == 0x21) {       <span class="comment">// Hihat active</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                enable_operator(17,&amp;<a class="code" href="structop.html">op</a>[7],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                change_frequency(7,17,&amp;<a class="code" href="structop.html">op</a>[7]);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                disable_operator(&amp;<a class="code" href="structop.html">op</a>[7],<a class="code" href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="comment">// regular 0xb0-0xb8</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> base = (idx-<a class="code" href="opl_8h.html#ae86e27103d6746d4fb38973eab133915">ARC_KON_BNUM</a>)&amp;0xff;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">if</span> (base&lt;9) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> opbase = second_set?(base+18):base;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; <a class="code" href="structop.html">op</a>[opbase].is_4op_attached) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <span class="comment">// regbase of modulator:</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> modbase = modulatorbase[base]+second_set;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            <span class="keywordflow">if</span> (val&amp;32) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                <span class="comment">// operator switched on</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                enable_operator(modbase,&amp;<a class="code" href="structop.html">op</a>[opbase],<a class="code" href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a>);     <span class="comment">// modulator (if 2op)</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                enable_operator(modbase+3,&amp;<a class="code" href="structop.html">op</a>[opbase+9],<a class="code" href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a>); <span class="comment">// carrier (if 2op)</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                <span class="comment">// for 4op channels all four operators are switched on</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; <a class="code" href="structop.html">op</a>[opbase].is_4op) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                    <span class="comment">// turn on chan+3 operators as well</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                    enable_operator(modbase+8,&amp;<a class="code" href="structop.html">op</a>[opbase+3],<a class="code" href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a>);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                    enable_operator(modbase+3+8,&amp;<a class="code" href="structop.html">op</a>[opbase+3+9],<a class="code" href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a>);</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                <span class="comment">// operator switched off</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                disable_operator(&amp;<a class="code" href="structop.html">op</a>[opbase],<a class="code" href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                disable_operator(&amp;<a class="code" href="structop.html">op</a>[opbase+9],<a class="code" href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a>);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                <span class="comment">// for 4op channels all four operators are switched off</span></div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; <a class="code" href="structop.html">op</a>[opbase].is_4op) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                    <span class="comment">// turn off chan+3 operators as well</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                    disable_operator(&amp;<a class="code" href="structop.html">op</a>[opbase+3],<a class="code" href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a>);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                    disable_operator(&amp;<a class="code" href="structop.html">op</a>[opbase+3+9],<a class="code" href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> chanbase = base+second_set;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="comment">// change frequency calculations of modulator and carrier (2op) as</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            <span class="comment">// the frequency of the channel has changed</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            change_frequency(chanbase,modbase,&amp;<a class="code" href="structop.html">op</a>[opbase]);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            change_frequency(chanbase,modbase+3,&amp;<a class="code" href="structop.html">op</a>[opbase+9]);</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            <span class="comment">// for 4op channels all four operators are modified to the frequency of the channel</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; <a class="code" href="structop.html">op</a>[second_set?(base+18):base].is_4op) {</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                <span class="comment">// change frequency calculations of chan+3 operators as well</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                change_frequency(chanbase,modbase+8,&amp;<a class="code" href="structop.html">op</a>[opbase+3]);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                change_frequency(chanbase,modbase+3+8,&amp;<a class="code" href="structop.html">op</a>[opbase+3+9]);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            }</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        }</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#a37ce6a33c319c21e2eeb62be4baa974f">ARC_FEEDBACK</a>: {</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="comment">// 0xc0-0xc8 feedback/modulation type (AM/FM)</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> base = (idx-<a class="code" href="opl_8h.html#a37ce6a33c319c21e2eeb62be4baa974f">ARC_FEEDBACK</a>)&amp;0xff;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">if</span> (base&lt;9) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> opbase = second_set?(base+18):base;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> chanbase = base+second_set;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            change_feedback(chanbase,&amp;<a class="code" href="structop.html">op</a>[opbase]);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            <span class="comment">// OPL3 panning</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            <a class="code" href="structop.html">op</a>[opbase].left_pan = ((val&amp;0x10)&gt;&gt;4);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <a class="code" href="structop.html">op</a>[opbase].right_pan = ((val&amp;0x20)&gt;&gt;5);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        }</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        }</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#acad9a0a85254d78b7dbb385d203ec51c">ARC_WAVE_SEL</a>:</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="opl_8h.html#acad9a0a85254d78b7dbb385d203ec51c">ARC_WAVE_SEL</a>+0x10: {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordtype">int</span> num = idx&amp;7;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> base = (idx-<a class="code" href="opl_8h.html#acad9a0a85254d78b7dbb385d203ec51c">ARC_WAVE_SEL</a>)&amp;0xff;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">if</span> ((num&lt;6) &amp;&amp; (base&lt;22)) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> wselbase = second_set?(base+22):base;  <span class="comment">// for easier mapping onto wave_sel[]</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            <span class="comment">// change waveform</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            <span class="keywordflow">if</span> (adlibreg[0x105]&amp;1) wave_sel[wselbase] = val&amp;7;  <span class="comment">// opl3 mode enabled, all waveforms accessible</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="keywordflow">else</span> wave_sel[wselbase] = val&amp;3;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <a class="code" href="structoperator__struct.html">op_type</a>* op_ptr = &amp;<a class="code" href="structop.html">op</a>[regbase2modop[wselbase]+((num&lt;3) ? 0 : 9)];</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            change_waveform(wselbase,op_ptr);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;}</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="opl_8h.html#a5887f1420ea3c4eb9f9a9dd29628af1a">OPL_INLINE</a> clipit16(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> ival, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a57ceea29ec6013e22941a09461efbd3d">Bit16s</a>* outval) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> (ival&lt;32768) {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span> (ival&gt;-32769) {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            *outval=(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a57ceea29ec6013e22941a09461efbd3d">Bit16s</a>)ival;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            *outval = -32768;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        *outval = 32767;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    }</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">// be careful with this</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">// uses cptr and chanval, outputs into outbufl(/outbufr)</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">// for opl3 check if opl3-mode is enabled (which uses stereo panning)</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="preprocessor">#undef CHANVAL_OUT</span></div>
<div class="line"><a name="l00858"></a><span class="lineno"><a class="line" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">  858</a></span>&#160;<span class="preprocessor">#define CHANVAL_OUT                                 \</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="preprocessor">    if (adlibreg[0x105]&amp;1) {                        \</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="preprocessor">        outbufl[i] += chanval*cptr[0].left_pan;     \</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="preprocessor">        outbufr[i] += chanval*cptr[0].right_pan;    \</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="preprocessor">    } else {                                        \</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="preprocessor">        outbufl[i] += chanval;                      \</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="preprocessor">    }</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="class_o_p_l.html#a1a4e71cdd0fb041d6afd18e0d8c295ba">  866</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_o_p_l.html#a1a4e71cdd0fb041d6afd18e0d8c295ba">OPL::adlib_getsample</a>(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a57ceea29ec6013e22941a09461efbd3d">Bit16s</a>* sndptr, <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> numsamples) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, endsamples;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <a class="code" href="structoperator__struct.html">op_type</a>* cptr;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> outbufl[<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>];</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="comment">// second output buffer (right channel for opl3 stereo)</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> outbufr[<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>];</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment">// vibrato/tremolo lookup tables (global, to possibly be used by all operators)</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vib_lut[<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>];</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> trem_lut[<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>];</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> samples_to_process = numsamples;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> cursmp=0; cursmp&lt;samples_to_process; cursmp+=endsamples) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        endsamples = samples_to_process-cursmp;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">if</span> (endsamples&gt;<a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>) endsamples = <a class="code" href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a>;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <a class="code" href="string_8h.html#a61225aab8c8ea6fd46ee4def7d35a0b8">memset</a>((<span class="keywordtype">void</span>*)&amp;outbufl,0,endsamples*<span class="keyword">sizeof</span>(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>));</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="comment">// clear second output buffer (opl3 stereo)</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">if</span> (adlibreg[0x105]&amp;1) <a class="code" href="string_8h.html#a61225aab8c8ea6fd46ee4def7d35a0b8">memset</a>((<span class="keywordtype">void</span>*)&amp;outbufr,0,endsamples*<span class="keyword">sizeof</span>(<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>));</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160; </div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="comment">// calculate vibrato/tremolo lookup tables</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> vib_tshift = ((adlibreg[<a class="code" href="opl_8h.html#aed59db242877547b015d1e706a5c2c7b">ARC_PERC_MODE</a>]&amp;0x40)==0) ? 1 : 0;    <span class="comment">// 14cents/7cents switching</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            <span class="comment">// cycle through vibrato table</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            vibtab_pos += vibtab_add;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            <span class="keywordflow">if</span> (vibtab_pos/<a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a>&gt;=<a class="code" href="opl_8h.html#ac518fde5f732b359f9beaa8d56cedf9b">VIBTAB_SIZE</a>) vibtab_pos-=<a class="code" href="opl_8h.html#ac518fde5f732b359f9beaa8d56cedf9b">VIBTAB_SIZE</a>*<a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = vib_table[vibtab_pos/<a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a>]&gt;&gt;vib_tshift;     <span class="comment">// 14cents (14/100 of a semitone) or 7cents</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;            <span class="comment">// cycle through tremolo table</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            tremtab_pos += tremtab_add;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <span class="keywordflow">if</span> (tremtab_pos/<a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a>&gt;=<a class="code" href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a>) tremtab_pos-=<a class="code" href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a>*<a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <span class="keywordflow">if</span> (adlibreg[<a class="code" href="opl_8h.html#aed59db242877547b015d1e706a5c2c7b">ARC_PERC_MODE</a>]&amp;0x80) trem_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = trem_table[tremtab_pos/<a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a>];</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;            <span class="keywordflow">else</span> trem_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = trem_table[<a class="code" href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a>+tremtab_pos/<a class="code" href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a>];</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">if</span> (adlibreg[<a class="code" href="opl_8h.html#aed59db242877547b015d1e706a5c2c7b">ARC_PERC_MODE</a>]&amp;0x20) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <span class="comment">//BassDrum</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            cptr = &amp;<a class="code" href="structop.html">op</a>[6];</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            <span class="keywordflow">if</span> (adlibreg[<a class="code" href="opl_8h.html#a37ce6a33c319c21e2eeb62be4baa974f">ARC_FEEDBACK</a>+6]&amp;1) {</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                <span class="comment">// additive synthesis</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                <span class="keywordflow">if</span> (cptr[9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                    <span class="keywordflow">if</span> (cptr[9].vibrato) {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                        vibval1 = vibval_var1;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                            vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                    } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    <span class="keywordflow">if</span> (cptr[9].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                    <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160; </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                    <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                        <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[9],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                        <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[9]);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                        <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[9],0,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                        </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>*2;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                        <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                    }</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                }</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                <span class="comment">// frequency modulation</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                <span class="keywordflow">if</span> ((cptr[9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                    <span class="keywordflow">if</span> ((cptr[0].vibrato) &amp;&amp; (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                        vibval1 = vibval_var1;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                            vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                    } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                    <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                        vibval2 = vibval_var2;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                            vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;                    } <span class="keywordflow">else</span> vibval2 = vibval_const;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                    <span class="keywordflow">if</span> (cptr[0].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                    <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                    <span class="keywordflow">if</span> (cptr[9].tremolo) tremval2 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                    <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160; </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                    <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                        <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[0],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                        <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[0].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[0]);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                        <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[0],(cptr[0].lastcval+cptr[0].cval)*cptr[0].mfbi/2,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160; </div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                        <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[9],vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                        <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[9]);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;                        <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[9],cptr[0].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                        </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>*2;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                        <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                    }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160; </div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            <span class="comment">//TomTom (j=8)</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="structop.html">op</a>[8].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;                cptr = &amp;<a class="code" href="structop.html">op</a>[8];</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordflow">if</span> (cptr[0].vibrato) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                    vibval3 = vibval_var1;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                        vibval3[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                } <span class="keywordflow">else</span> vibval3 = vibval_const;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                <span class="keywordflow">if</span> (cptr[0].tremolo) tremval3 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                <span class="keywordflow">else</span> tremval3 = tremval_const;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                    <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[0],vibval3[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                    <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[0].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[0]);        <span class="comment">//TomTom</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                    <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[0],0,tremval3[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[0].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>*2;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                    <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;            }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;            <span class="comment">//Snare/Hihat (j=7), Cymbal (j=8)</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="structop.html">op</a>[7].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (<a class="code" href="structop.html">op</a>[16].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) ||</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                (<a class="code" href="structop.html">op</a>[17].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                cptr = &amp;<a class="code" href="structop.html">op</a>[7];</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                <span class="keywordflow">if</span> ((cptr[0].vibrato) &amp;&amp; (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                    vibval1 = vibval_var1;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                        vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> == <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    vibval2 = vibval_var2;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                        vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                } <span class="keywordflow">else</span> vibval2 = vibval_const;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                <span class="keywordflow">if</span> (cptr[0].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                <span class="keywordflow">if</span> (cptr[9].tremolo) tremval2 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                cptr = &amp;<a class="code" href="structop.html">op</a>[8];</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> == <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    vibval4 = vibval_var2;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                        vibval4[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                } <span class="keywordflow">else</span> vibval4 = vibval_const;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;                <span class="keywordflow">if</span> (cptr[9].tremolo) tremval4 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                <span class="keywordflow">else</span> tremval4 = tremval_const;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                    <a class="code" href="opl_8cpp.html#a369860d23566f666e8cff363d714aea0">operator_advance_drums</a>(&amp;<a class="code" href="structop.html">op</a>[7],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],&amp;<a class="code" href="structop.html">op</a>[7+9],vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],&amp;<a class="code" href="structop.html">op</a>[8+9],vibval4[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                    <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[<a class="code" href="structop.html">op</a>[7].op_state](&amp;<a class="code" href="structop.html">op</a>[7]);            <span class="comment">//Hihat</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                    <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;<a class="code" href="structop.html">op</a>[7],0,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;                    <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[<a class="code" href="structop.html">op</a>[7+9].op_state](&amp;<a class="code" href="structop.html">op</a>[7+9]);        <span class="comment">//Snare</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                    <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;<a class="code" href="structop.html">op</a>[7+9],0,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                    <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[<a class="code" href="structop.html">op</a>[8+9].op_state](&amp;<a class="code" href="structop.html">op</a>[8+9]);        <span class="comment">//Cymbal</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                    <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;<a class="code" href="structop.html">op</a>[8+9],0,tremval4[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;                    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = (<a class="code" href="structop.html">op</a>[7].cval + <a class="code" href="structop.html">op</a>[7+9].cval + <a class="code" href="structop.html">op</a>[8+9].cval)*2;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                    <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;            }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        }</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> max_channel = <a class="code" href="opl_8h.html#ae5597ce31d23d11493e6e674fe257d73">NUM_CHANNELS</a>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1)==0) max_channel = <a class="code" href="opl_8h.html#ae5597ce31d23d11493e6e674fe257d73">NUM_CHANNELS</a>/2;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a> cur_ch=max_channel-1; cur_ch&gt;=0; cur_ch--) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="comment">// skip drum/percussion operators</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            <span class="keywordflow">if</span> ((adlibreg[<a class="code" href="opl_8h.html#aed59db242877547b015d1e706a5c2c7b">ARC_PERC_MODE</a>]&amp;0x20) &amp;&amp; (cur_ch &gt;= 6) &amp;&amp; (cur_ch &lt; 9)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160; </div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;            <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a> k = cur_ch;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <span class="keywordflow">if</span> (cur_ch &lt; 9) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;                cptr = &amp;<a class="code" href="structop.html">op</a>[cur_ch];</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                cptr = &amp;<a class="code" href="structop.html">op</a>[cur_ch+9];   <span class="comment">// second set is operator18-operator35</span></div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                k += (-9+256);      <span class="comment">// second set uses registers 0x100 onwards</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="comment">// check if this operator is part of a 4-op</span></div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; cptr-&gt;<a class="code" href="structoperator__struct.html#a3607c7d66b7cd6f6beb1931ecbd5832c">is_4op_attached</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            <span class="comment">// check for FM/AM</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            <span class="keywordflow">if</span> (adlibreg[<a class="code" href="opl_8h.html#a37ce6a33c319c21e2eeb62be4baa974f">ARC_FEEDBACK</a>+k]&amp;1) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; cptr-&gt;<a class="code" href="structoperator__struct.html#af13c91a9cebbed1edbf36e8636bf342d">is_4op</a>) {</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                    <span class="keywordflow">if</span> (adlibreg[<a class="code" href="opl_8h.html#a37ce6a33c319c21e2eeb62be4baa974f">ARC_FEEDBACK</a>+k+3]&amp;1) {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                        <span class="comment">// AM-AM-style synthesis (op1[fb] + (op2 * op3) + op4)</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                        <span class="keywordflow">if</span> (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                            <span class="keywordflow">if</span> (cptr[0].vibrato) {</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                                vibval1 = vibval_var1;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                                    vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                            } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                            <span class="keywordflow">if</span> (cptr[0].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                            <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                            <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[0],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[0].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[0]);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[0],(cptr[0].lastcval+cptr[0].cval)*cptr[0].mfbi/2,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                                <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[0].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                                <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                            }</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                        }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                        <span class="keywordflow">if</span> ((cptr[3].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (cptr[9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                            <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                                vibval1 = vibval_var1;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                                    vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                            } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                            <span class="keywordflow">if</span> (cptr[9].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                            <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                            <span class="keywordflow">if</span> (cptr[3].tremolo) tremval2 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                            <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                            <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[9],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[9]);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[9],0,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[3],0);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[3].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[3]);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[3],cptr[9].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                                <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[3].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                                <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                            }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                        }</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                        <span class="keywordflow">if</span> (cptr[3+9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) {</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                            <span class="keywordflow">if</span> (cptr[3+9].tremolo) tremval1 = trem_lut; <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                            <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                            <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[3+9],0);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[3+9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[3+9]);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[3+9],0,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                                <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[3+9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                                <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                            }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                        }</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                        <span class="comment">// AM-FM-style synthesis (op1[fb] + (op2 * op3 * op4))</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                        <span class="keywordflow">if</span> (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                            <span class="keywordflow">if</span> (cptr[0].vibrato) {</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                                vibval1 = vibval_var1;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                                    vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                            } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                            <span class="keywordflow">if</span> (cptr[0].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                            <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                            <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[0],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[0].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[0]);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[0],(cptr[0].lastcval+cptr[0].cval)*cptr[0].mfbi/2,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                                <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[0].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                                <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                            }</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                        }</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                        <span class="keywordflow">if</span> ((cptr[9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (cptr[3].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (cptr[3+9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;                            <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                                vibval1 = vibval_var1;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                                    vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                            } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                            <span class="keywordflow">if</span> (cptr[9].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                            <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                            <span class="keywordflow">if</span> (cptr[3].tremolo) tremval2 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                            <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                            <span class="keywordflow">if</span> (cptr[3+9].tremolo) tremval3 = trem_lut; <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                            <span class="keywordflow">else</span> tremval3 = tremval_const;</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                            <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[9],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[9]);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[9],0,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[3],0);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[3].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[3]);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[3],cptr[9].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[3+9],0);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[3+9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[3+9]);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[3+9],cptr[3].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval3[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                                <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[3+9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                                <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;                            }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                        }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                    }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;                }</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                <span class="comment">// 2op additive synthesis</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                <span class="keywordflow">if</span> ((cptr[9].op_state == <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) &amp;&amp; (cptr[0].op_state == <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;                <span class="keywordflow">if</span> ((cptr[0].vibrato) &amp;&amp; (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                    vibval1 = vibval_var1;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                        vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                    vibval2 = vibval_var2;</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                        vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                } <span class="keywordflow">else</span> vibval2 = vibval_const;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <span class="keywordflow">if</span> (cptr[0].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                <span class="keywordflow">if</span> (cptr[9].tremolo) tremval2 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                    <span class="comment">// carrier1</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                    <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[0],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                    <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[0].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[0]);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                    <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[0],(cptr[0].lastcval+cptr[0].cval)*cptr[0].mfbi/2,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                    <span class="comment">// carrier2</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                    <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[9],vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                    <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[9]);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                    <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[9],0,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a> + cptr[0].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                    <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                }</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                <span class="keywordflow">if</span> ((adlibreg[0x105]&amp;1) &amp;&amp; cptr-&gt;<a class="code" href="structoperator__struct.html#af13c91a9cebbed1edbf36e8636bf342d">is_4op</a>) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                    <span class="keywordflow">if</span> (adlibreg[<a class="code" href="opl_8h.html#a37ce6a33c319c21e2eeb62be4baa974f">ARC_FEEDBACK</a>+k+3]&amp;1) {</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                        <span class="comment">// FM-AM-style synthesis ((op1[fb] * op2) + (op3 * op4))</span></div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                        <span class="keywordflow">if</span> ((cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (cptr[9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                            <span class="keywordflow">if</span> ((cptr[0].vibrato) &amp;&amp; (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                                vibval1 = vibval_var1;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                                    vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                            } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;                            <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                                vibval2 = vibval_var2;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                                    vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                            } <span class="keywordflow">else</span> vibval2 = vibval_const;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                            <span class="keywordflow">if</span> (cptr[0].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                            <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;                            <span class="keywordflow">if</span> (cptr[9].tremolo) tremval2 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                            <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;                            <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[0],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[0].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[0]);</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[0],(cptr[0].lastcval+cptr[0].cval)*cptr[0].mfbi/2,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[9],vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[9]);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[9],cptr[0].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;                                <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                                <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                            }</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                        }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                        <span class="keywordflow">if</span> ((cptr[3].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (cptr[3+9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                            <span class="keywordflow">if</span> (cptr[3].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                            <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                            <span class="keywordflow">if</span> (cptr[3+9].tremolo) tremval2 = trem_lut; <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                            <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                            <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[3],0);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[3].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[3]);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[3],0,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[3+9],0);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[3+9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[3+9]);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[3+9],cptr[3].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                                <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[3+9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                                <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                            }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                        }</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160; </div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                        <span class="comment">// FM-FM-style synthesis (op1[fb] * op2 * op3 * op4)</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                        <span class="keywordflow">if</span> ((cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (cptr[9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || </div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                            (cptr[3].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) || (cptr[3+9].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                            <span class="keywordflow">if</span> ((cptr[0].vibrato) &amp;&amp; (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                                vibval1 = vibval_var1;</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                                    vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                            } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                            <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                                vibval2 = vibval_var2;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                                    vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                            } <span class="keywordflow">else</span> vibval2 = vibval_const;</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                            <span class="keywordflow">if</span> (cptr[0].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                            <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                            <span class="keywordflow">if</span> (cptr[9].tremolo) tremval2 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                            <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                            <span class="keywordflow">if</span> (cptr[3].tremolo) tremval3 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                            <span class="keywordflow">else</span> tremval3 = tremval_const;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                            <span class="keywordflow">if</span> (cptr[3+9].tremolo) tremval4 = trem_lut; <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                            <span class="keywordflow">else</span> tremval4 = tremval_const;</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160; </div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                            <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[0],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[0].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[0]);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[0],(cptr[0].lastcval+cptr[0].cval)*cptr[0].mfbi/2,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[9],vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[9]);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[9],cptr[0].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[3],0);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[3].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[3]);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[3],cptr[9].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval3[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;                                <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[3+9],0);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                                <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[3+9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[3+9]);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                                <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[3+9],cptr[3].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval4[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                                <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[3+9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                                <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                            }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;                        }</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                    }</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                }</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                <span class="comment">// 2op frequency modulation</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;                <span class="keywordflow">if</span> ((cptr[9].op_state == <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>) &amp;&amp; (cptr[0].op_state == <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                <span class="keywordflow">if</span> ((cptr[0].vibrato) &amp;&amp; (cptr[0].op_state != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                    vibval1 = vibval_var1;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                        vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[0].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                } <span class="keywordflow">else</span> vibval1 = vibval_const;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                <span class="keywordflow">if</span> ((cptr[9].vibrato) &amp;&amp; (cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a> != <a class="code" href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a>)) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;                    vibval2 = vibval_var2;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++)</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                        vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (<a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a>)((vib_lut[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]*cptr[9].<a class="code" href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">freq_high</a>/8)*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>*<a class="code" href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a>);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                } <span class="keywordflow">else</span> vibval2 = vibval_const;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                <span class="keywordflow">if</span> (cptr[0].tremolo) tremval1 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                <span class="keywordflow">else</span> tremval1 = tremval_const;</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                <span class="keywordflow">if</span> (cptr[9].tremolo) tremval2 = trem_lut;   <span class="comment">// tremolo enabled, use table</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                <span class="keywordflow">else</span> tremval2 = tremval_const;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                <span class="comment">// calculate channel output</span></div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                    <span class="comment">// modulator</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                    <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[0],vibval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                    <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[0].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[0]);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                    <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[0],(cptr[0].lastcval+cptr[0].cval)*cptr[0].mfbi/2,tremval1[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                    <span class="comment">// carrier</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;                    <a class="code" href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a>(&amp;cptr[9],vibval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                    <a class="code" href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a>[cptr[9].<a class="code" href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">op_state</a>](&amp;cptr[9]);</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                    <a class="code" href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a>(&amp;cptr[9],cptr[0].cval*<a class="code" href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a>,tremval2[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                    <a class="code" href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a> chanval = cptr[9].<a class="code" href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">cval</a>;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                    <a class="code" href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                }</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            }</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        }</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="keywordflow">if</span> (adlibreg[0x105]&amp;1) {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="comment">// convert to 16bit samples (stereo)</span></div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;                clipit16(outbufl[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],sndptr++);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;                clipit16(outbufr[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],sndptr++);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            }</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            <span class="comment">// convert to 16bit samples (mono)</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=0;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&lt;endsamples;<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                clipit16(outbufl[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],sndptr++);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;                clipit16(outbufl[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>],sndptr++);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;        }</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astructoperator__struct_html_a66918688d0edd30559bbae31aa58162e"><div class="ttname"><a href="structoperator__struct.html#a66918688d0edd30559bbae31aa58162e">operator_struct::env_step_r</a></div><div class="ttdeci">Bits env_step_r</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00144">opl.h:144</a></div></div>
<div class="ttc" id="aopl_8h_html_af7c8f4371e05c0e046fa661841e7e155"><div class="ttname"><a href="opl_8h.html#af7c8f4371e05c0e046fa661841e7e155">INTFREQU</a></div><div class="ttdeci">#define INTFREQU</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00072">opl.h:72</a></div></div>
<div class="ttc" id="aopl_8h_html_a8f0a0e4932f472245a168b06a04931f6"><div class="ttname"><a href="opl_8h.html#a8f0a0e4932f472245a168b06a04931f6">ARC_SECONDSET</a></div><div class="ttdeci">#define ARC_SECONDSET</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00093">opl.h:93</a></div></div>
<div class="ttc" id="aopl_8h_html_a598a3330b3c21701223ee0ca14316eca"><div class="ttname"><a href="opl_8h.html#a598a3330b3c21701223ee0ca14316eca">PI</a></div><div class="ttdeci">#define PI</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00064">opl.h:64</a></div></div>
<div class="ttc" id="aopl_8h_html_afde43e48565c5fca378e93d23e01a812"><div class="ttname"><a href="opl_8h.html#afde43e48565c5fca378e93d23e01a812">OP_ACT_PERC</a></div><div class="ttdeci">#define OP_ACT_PERC</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00098">opl.h:98</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a4164351b30da94c677c05667dd781518"><div class="ttname"><a href="structoperator__struct.html#a4164351b30da94c677c05667dd781518">operator_struct::env_step_skip_a</a></div><div class="ttdeci">Bits env_step_skip_a</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00146">opl.h:146</a></div></div>
<div class="ttc" id="aopl_8h_html_a84b5feacfdaff61e689b71534383203c"><div class="ttname"><a href="opl_8h.html#a84b5feacfdaff61e689b71534383203c">OF_TYPE_DEC</a></div><div class="ttdeci">#define OF_TYPE_DEC</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00076">opl.h:76</a></div></div>
<div class="ttc" id="aopl_8h_html_a9370e92fc0b31128b00c84daf7dbfcb8"><div class="ttname"><a href="opl_8h.html#a9370e92fc0b31128b00c84daf7dbfcb8">FL2</a></div><div class="ttdeci">#define FL2</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00063">opl.h:63</a></div></div>
<div class="ttc" id="a_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_html_a9aac2c7ef4e707f2cf8859deb455bf15"><div class="ttname"><a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a9aac2c7ef4e707f2cf8859deb455bf15">Bits</a></div><div class="ttdeci">signed int Bits</div><div class="ttdef"><b>Definition:</b> <a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_source.html#l00011">types.h:11</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a23b657996c62f7e78f04612bb62b13b9"><div class="ttname"><a href="structoperator__struct.html#a23b657996c62f7e78f04612bb62b13b9">operator_struct::env_step_d</a></div><div class="ttdeci">Bits env_step_d</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00144">opl.h:144</a></div></div>
<div class="ttc" id="aclass_o_p_l_html_a1a4e71cdd0fb041d6afd18e0d8c295ba"><div class="ttname"><a href="class_o_p_l.html#a1a4e71cdd0fb041d6afd18e0d8c295ba">OPL::adlib_getsample</a></div><div class="ttdeci">void adlib_getsample(Bit16s *sndptr, Bits numsamples)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00866">opl.cpp:866</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a0496516df54532cf3c7a82ee38363410"><div class="ttname"><a href="structoperator__struct.html#a0496516df54532cf3c7a82ee38363410">operator_struct::mfbi</a></div><div class="ttdeci">Bit32s mfbi</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00129">opl.h:129</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a12f09ea5b06e9429a4ac71d571276825"><div class="ttname"><a href="structoperator__struct.html#a12f09ea5b06e9429a4ac71d571276825">operator_struct::cur_env_step</a></div><div class="ttdeci">Bits cur_env_step</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00143">opl.h:143</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a9d4590528d3e9ba0791694380226cd98"><div class="ttname"><a href="structoperator__struct.html#a9d4590528d3e9ba0791694380226cd98">operator_struct::freq_high</a></div><div class="ttdeci">Bit32s freq_high</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00134">opl.h:134</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a553fba925ac2533e44086e2821490675"><div class="ttname"><a href="structoperator__struct.html#a553fba925ac2533e44086e2821490675">operator_struct::env_step_a</a></div><div class="ttdeci">Bits env_step_a</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00144">opl.h:144</a></div></div>
<div class="ttc" id="aclass_o_p_l_html_afea7d335d3a936bd669ce30f867ae189"><div class="ttname"><a href="class_o_p_l.html#afea7d335d3a936bd669ce30f867ae189">OPL::adlib_init</a></div><div class="ttdeci">void adlib_init(int samplerate)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00459">opl.cpp:459</a></div></div>
<div class="ttc" id="aopl_8h_html_a61943530d6a44db3142c4a3458b928f2"><div class="ttname"><a href="opl_8h.html#a61943530d6a44db3142c4a3458b928f2">VIBFAC</a></div><div class="ttdeci">#define VIBFAC</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00105">opl.h:105</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a58fb5cc9ed1d7f0183278afb1f23bfbd"><div class="ttname"><a href="structoperator__struct.html#a58fb5cc9ed1d7f0183278afb1f23bfbd">operator_struct::generator_pos</a></div><div class="ttdeci">Bit32u generator_pos</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00142">opl.h:142</a></div></div>
<div class="ttc" id="aopl_8h_html_ada0918d3c95662435e28f40392661073"><div class="ttname"><a href="opl_8h.html#ada0918d3c95662435e28f40392661073">TREMTAB_SIZE</a></div><div class="ttdeci">#define TREMTAB_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00108">opl.h:108</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a3f3851b57c329384b0262541aad9ce32"><div class="ttname"><a href="structoperator__struct.html#a3f3851b57c329384b0262541aad9ce32">operator_struct::step_skip_pos_a</a></div><div class="ttdeci">Bit8u step_skip_pos_a</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00145">opl.h:145</a></div></div>
<div class="ttc" id="aopl_8h_html_ababc959be081390809246219c59c9767"><div class="ttname"><a href="opl_8h.html#ababc959be081390809246219c59c9767">fltype</a></div><div class="ttdeci">#define fltype</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00030">opl.h:30</a></div></div>
<div class="ttc" id="aopl_8h_html"><div class="ttname"><a href="opl_8h.html">opl.h</a></div></div>
<div class="ttc" id="aopl_8h_html_a2edfb61d74c2eb02fec20b4dd13894fc"><div class="ttname"><a href="opl_8h.html#a2edfb61d74c2eb02fec20b4dd13894fc">OF_TYPE_OFF</a></div><div class="ttdeci">#define OF_TYPE_OFF</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00080">opl.h:80</a></div></div>
<div class="ttc" id="astructoperator__struct_html_abfe2b5c4ae5eeff93737c87a9479ff39"><div class="ttname"><a href="structoperator__struct.html#abfe2b5c4ae5eeff93737c87a9479ff39">operator_struct::sustain_level</a></div><div class="ttdeci">fltype sustain_level</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00128">opl.h:128</a></div></div>
<div class="ttc" id="aopl_8h_html_add38a26c98e26bb7b283f4f5de7f6175"><div class="ttname"><a href="opl_8h.html#add38a26c98e26bb7b283f4f5de7f6175">FIXEDPT_LFO</a></div><div class="ttdeci">#define FIXEDPT_LFO</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00068">opl.h:68</a></div></div>
<div class="ttc" id="aopl_8h_html_a8cb4549429c33cb3f85d353b9f3498bb"><div class="ttname"><a href="opl_8h.html#a8cb4549429c33cb3f85d353b9f3498bb">OF_TYPE_SUS_NOKEEP</a></div><div class="ttdeci">#define OF_TYPE_SUS_NOKEEP</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00079">opl.h:79</a></div></div>
<div class="ttc" id="aopl_8cpp_html_a444769e73623bec162e658d8e69caa9e"><div class="ttname"><a href="opl_8cpp.html#a444769e73623bec162e658d8e69caa9e">operator_output</a></div><div class="ttdeci">void operator_output(op_type *op_pt, Bit32s modulator, Bit32s trem)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00184">opl.cpp:184</a></div></div>
<div class="ttc" id="astring_8h_html_a61225aab8c8ea6fd46ee4def7d35a0b8"><div class="ttname"><a href="string_8h.html#a61225aab8c8ea6fd46ee4def7d35a0b8">memset</a></div><div class="ttdeci">void *__fastcall__ memset(void *s, int c, size_t count)</div></div>
<div class="ttc" id="astructoperator__struct_html_aaafd50ada247aee34602575be156614d"><div class="ttname"><a href="structoperator__struct.html#aaafd50ada247aee34602575be156614d">operator_struct::op_state</a></div><div class="ttdeci">Bit32u op_state</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00132">opl.h:132</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a21fdd0d4e010c3d40d5191934f70d5e9"><div class="ttname"><a href="structoperator__struct.html#a21fdd0d4e010c3d40d5191934f70d5e9">operator_struct::tinc</a></div><div class="ttdeci">Bit32u tinc</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00125">opl.h:125</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a51a2e89214f71dea465edd64f6ddbf0d"><div class="ttname"><a href="structoperator__struct.html#a51a2e89214f71dea465edd64f6ddbf0d">operator_struct::cur_wmask</a></div><div class="ttdeci">Bit32u cur_wmask</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00136">opl.h:136</a></div></div>
<div class="ttc" id="a_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_html_ad52f60a6b2d7bbffa6ad4507122baa76"><div class="ttname"><a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ad52f60a6b2d7bbffa6ad4507122baa76">Bit8u</a></div><div class="ttdeci">unsigned char Bit8u</div><div class="ttdef"><b>Definition:</b> <a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_source.html#l00002">types.h:2</a></div></div>
<div class="ttc" id="aopl_8h_html_a9b4e7e262bad76c84c7bff82429ddd71"><div class="ttname"><a href="opl_8h.html#a9b4e7e262bad76c84c7bff82429ddd71">WAVEPREC</a></div><div class="ttdeci">#define WAVEPREC</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00070">opl.h:70</a></div></div>
<div class="ttc" id="aopl_8cpp_html_aca1c0db4788383eefe5ac96d18463694"><div class="ttname"><a href="opl_8cpp.html#aca1c0db4788383eefe5ac96d18463694">operator_off</a></div><div class="ttdeci">void operator_off(op_type *)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00200">opl.cpp:200</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a5309b75f7d289c18a3d99dc57e9719da"><div class="ttname"><a href="structoperator__struct.html#a5309b75f7d289c18a3d99dc57e9719da">operator_struct::amp</a></div><div class="ttdeci">fltype amp</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00126">opl.h:126</a></div></div>
<div class="ttc" id="aopl_8h_html_a1d2b2e8ba0b268b55f24e3a495f33220"><div class="ttname"><a href="opl_8h.html#a1d2b2e8ba0b268b55f24e3a495f33220">OF_TYPE_REL</a></div><div class="ttdeci">#define OF_TYPE_REL</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00077">opl.h:77</a></div></div>
<div class="ttc" id="aopl_8h_html_a60297daf2dccf6c92062c7490a0ae039"><div class="ttname"><a href="opl_8h.html#a60297daf2dccf6c92062c7490a0ae039">TREM_FREQ</a></div><div class="ttdeci">#define TREM_FREQ</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00109">opl.h:109</a></div></div>
<div class="ttc" id="aopl_8h_html_a73d655145dbf3bd8da5b2cf0d57ad0a0"><div class="ttname"><a href="opl_8h.html#a73d655145dbf3bd8da5b2cf0d57ad0a0">ARC_TVS_KSR_MUL</a></div><div class="ttdeci">#define ARC_TVS_KSR_MUL</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00083">opl.h:83</a></div></div>
<div class="ttc" id="aopl_8h_html_a7dfd22f87c63407fe1f1936e7bfe05d7"><div class="ttname"><a href="opl_8h.html#a7dfd22f87c63407fe1f1936e7bfe05d7">OP_ACT_OFF</a></div><div class="ttdeci">#define OP_ACT_OFF</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00096">opl.h:96</a></div></div>
<div class="ttc" id="aopl_8h_html_a884e05b6c710f7014cb312508e2a10fd"><div class="ttname"><a href="opl_8h.html#a884e05b6c710f7014cb312508e2a10fd">ARC_FREQ_NUM</a></div><div class="ttdeci">#define ARC_FREQ_NUM</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00087">opl.h:87</a></div></div>
<div class="ttc" id="aclass_o_p_l_html_a0b75e90817861a9730640fff0468e3ed"><div class="ttname"><a href="class_o_p_l.html#a0b75e90817861a9730640fff0468e3ed">OPL::adlib_write</a></div><div class="ttdeci">void adlib_write(Bitu idx, Bit8u val)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00580">opl.cpp:580</a></div></div>
<div class="ttc" id="aopl_8h_html_a23c6b8cb901fba6f4cd46eefd152d1b7"><div class="ttname"><a href="opl_8h.html#a23c6b8cb901fba6f4cd46eefd152d1b7">ARC_CONTROL</a></div><div class="ttdeci">#define ARC_CONTROL</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00082">opl.h:82</a></div></div>
<div class="ttc" id="a_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_html_ab420c1a0d448f243002270765cff08e3"><div class="ttname"><a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#ab420c1a0d448f243002270765cff08e3">Bitu</a></div><div class="ttdeci">unsigned int Bitu</div><div class="ttdef"><b>Definition:</b> <a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_source.html#l00010">types.h:10</a></div></div>
<div class="ttc" id="a_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt_html_a048848dadb8ead3df6561b53a3ef5219"><div class="ttname"><a href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a048848dadb8ead3df6561b53a3ef5219">void</a></div><div class="ttdeci">if the work is an executable linked with the with the complete machine readable work that uses the as object code and or source so that the user can modify the Library and then relink to produce a modified executable containing the modified rather than copying library functions into the if the user installs as long as the modified version is interface compatible with the version that the work was made with c Accompany the work with a written valid for at least three to give the same user the materials specified in for a charge no more than the cost of performing this distribution d If distribution of the work is made by offering access to copy from a designated offer equivalent access to copy the above specified materials from the same place e Verify that the user has already received a copy of these materials or that you have already sent this user a copy For an the required form of the work that uses the Library must include any data and utility programs needed for reproducing the executable from it as a special the materials to be distributed need not include anything that is normally and so on of the operating system on which the executable unless that component itself accompanies the executable It may happen that this requirement contradicts the license restrictions of other proprietary libraries that do not normally accompany the operating system Such a contradiction means you cannot use both them and the Library together in an executable that you distribute You may place library facilities that are a work based on the Library side by side in a single library together with other library facilities not covered by this and distribute such a combined provided that the separate distribution of the work based on the Library and of the other library facilities is otherwise and provided that you do these two uncombined with any other library facilities This must be distributed under the terms of the Sections above b Give prominent notice with the combined library of the fact that part of it is a work based on the and explaining where to find the accompanying uncombined form of the same work You may not link or distribute the Library except as expressly provided under this License Any attempt otherwise to link or distribute the Library is void</div><div class="ttdef"><b>Definition:</b> <a href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt_source.html#l00352">COPYING.LESSER.txt:352</a></div></div>
<div class="ttc" id="aopl_8h_html_a609f922aa3a1038c83a4e5943907811b"><div class="ttname"><a href="opl_8h.html#a609f922aa3a1038c83a4e5943907811b">OF_TYPE_ATT</a></div><div class="ttdeci">#define OF_TYPE_ATT</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00075">opl.h:75</a></div></div>
<div class="ttc" id="aopl_8cpp_html_af11aedad05a7e9ab2e238f53318573db"><div class="ttname"><a href="opl_8cpp.html#af11aedad05a7e9ab2e238f53318573db">operator_release</a></div><div class="ttdeci">void operator_release(op_type *op_pt)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00214">opl.cpp:214</a></div></div>
<div class="ttc" id="aopl_8h_html_a994d1f8897e07d0ce422be4d15effb77"><div class="ttname"><a href="opl_8h.html#a994d1f8897e07d0ce422be4d15effb77">ARC_ATTR_DECR</a></div><div class="ttdeci">#define ARC_ATTR_DECR</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00085">opl.h:85</a></div></div>
<div class="ttc" id="aopl_8cpp_html_a6e9de560c500e8e431bb51098ab3932b"><div class="ttname"><a href="opl_8cpp.html#a6e9de560c500e8e431bb51098ab3932b">operator_advance</a></div><div class="ttdeci">void operator_advance(op_type *op_pt, Bit32s vib)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00137">opl.cpp:137</a></div></div>
<div class="ttc" id="astructoperator__struct_html_aa01dd36c551223e1aa916c386507b706"><div class="ttname"><a href="structoperator__struct.html#aa01dd36c551223e1aa916c386507b706">operator_struct::cval</a></div><div class="ttdeci">Bit32s cval</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00124">opl.h:124</a></div></div>
<div class="ttc" id="aopl_8cpp_html_a4e58658e8f74cd38d4b99f0fadd9eccf"><div class="ttname"><a href="opl_8cpp.html#a4e58658e8f74cd38d4b99f0fadd9eccf">operator_decay</a></div><div class="ttdeci">void operator_decay(op_type *op_pt)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00240">opl.cpp:240</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a0c54efa4a11afe5fe8db8a4060803285"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a0c54efa4a11afe5fe8db8a4060803285">waveform</a></div><div class="ttdeci">save sliceMiddleIndexConstantPitchAudio mak sliceMiddleIndexConstantPitchAudio Wavetable extraction Let s grab one loopable waveform around every sliceMiddleIndexConstantPitchAudio Let the sliceMiddleIndex be in the middle of the waveform</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00874">cubase64_1analyzePitch.m:874</a></div></div>
<div class="ttc" id="astructoperator__struct_html_acd1e0174136581a0fcc6a35df6ed29c9"><div class="ttname"><a href="structoperator__struct.html#acd1e0174136581a0fcc6a35df6ed29c9">operator_struct::a2</a></div><div class="ttdeci">fltype a2</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00130">opl.h:130</a></div></div>
<div class="ttc" id="a_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_html_a57ceea29ec6013e22941a09461efbd3d"><div class="ttname"><a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a57ceea29ec6013e22941a09461efbd3d">Bit16s</a></div><div class="ttdeci">signed short Bit16s</div><div class="ttdef"><b>Definition:</b> <a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_source.html#l00005">types.h:5</a></div></div>
<div class="ttc" id="agsid_8cpp_html_ac38751c7169cfeb9325a947cc0484286"><div class="ttname"><a href="gsid_8cpp.html#ac38751c7169cfeb9325a947cc0484286">samplerate</a></div><div class="ttdeci">int samplerate</div><div class="ttdef"><b>Definition:</b> <a href="gsid_8cpp_source.html#l00016">gsid.cpp:16</a></div></div>
<div class="ttc" id="a_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_html_a60381c01156b37b0b794db963ee03466"><div class="ttname"><a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a60381c01156b37b0b794db963ee03466">Bit32s</a></div><div class="ttdeci">signed long Bit32s</div><div class="ttdef"><b>Definition:</b> <a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_source.html#l00007">types.h:7</a></div></div>
<div class="ttc" id="astructoperator__struct_html_accea0f62274dabc0d8bd166b53b999c4"><div class="ttname"><a href="structoperator__struct.html#accea0f62274dabc0d8bd166b53b999c4">operator_struct::toff</a></div><div class="ttdeci">Bit32u toff</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00133">opl.h:133</a></div></div>
<div class="ttc" id="aopl_8h_html_acad9a0a85254d78b7dbb385d203ec51c"><div class="ttname"><a href="opl_8h.html#acad9a0a85254d78b7dbb385d203ec51c">ARC_WAVE_SEL</a></div><div class="ttdeci">#define ARC_WAVE_SEL</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00091">opl.h:91</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a9de64ee5287c43eaf992d1b69c6a59d5"><div class="ttname"><a href="structoperator__struct.html#a9de64ee5287c43eaf992d1b69c6a59d5">operator_struct::act_state</a></div><div class="ttdeci">Bit32u act_state</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00137">opl.h:137</a></div></div>
<div class="ttc" id="aopl_8h_html_ac8ccfef347a97451ef0717a3fbe59639"><div class="ttname"><a href="opl_8h.html#ac8ccfef347a97451ef0717a3fbe59639">FIXEDPT</a></div><div class="ttdeci">#define FIXEDPT</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00067">opl.h:67</a></div></div>
<div class="ttc" id="aopl_8h_html_aff885dd90e21fd4128ccae79f3a9e354"><div class="ttname"><a href="opl_8h.html#aff885dd90e21fd4128ccae79f3a9e354">MAXOPERATORS</a></div><div class="ttdeci">#define MAXOPERATORS</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00059">opl.h:59</a></div></div>
<div class="ttc" id="aopl_8h_html_ac518fde5f732b359f9beaa8d56cedf9b"><div class="ttname"><a href="opl_8h.html#ac518fde5f732b359f9beaa8d56cedf9b">VIBTAB_SIZE</a></div><div class="ttdeci">#define VIBTAB_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00104">opl.h:104</a></div></div>
<div class="ttc" id="astructoperator__struct_html"><div class="ttname"><a href="structoperator__struct.html">operator_struct</a></div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00123">opl.h:123</a></div></div>
<div class="ttc" id="aopl_8h_html_a5f4f574443144025fd809e36ba902483"><div class="ttname"><a href="opl_8h.html#a5f4f574443144025fd809e36ba902483">ARC_SUSL_RELR</a></div><div class="ttdeci">#define ARC_SUSL_RELR</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00086">opl.h:86</a></div></div>
<div class="ttc" id="amusic__notes_8h_html_afcc397a4b15ce38bc6de2695d5422606"><div class="ttname"><a href="music__notes_8h.html#afcc397a4b15ce38bc6de2695d5422606">c3</a></div><div class="ttdeci">#define c3</div><div class="ttdef"><b>Definition:</b> <a href="music__notes_8h_source.html#l00056">music_notes.h:56</a></div></div>
<div class="ttc" id="aopl_8h_html_ae86e27103d6746d4fb38973eab133915"><div class="ttname"><a href="opl_8h.html#ae86e27103d6746d4fb38973eab133915">ARC_KON_BNUM</a></div><div class="ttdeci">#define ARC_KON_BNUM</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00088">opl.h:88</a></div></div>
<div class="ttc" id="acubase64__2correlate_waveforms_8m_html_a633de4b0c14ca52ea2432a3c8a5c4c31"><div class="ttname"><a href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a></div><div class="ttdeci">f</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__2correlate_waveforms_8m_source.html#l00104">cubase64_2correlateWaveforms.m:104</a></div></div>
<div class="ttc" id="astructoperator__struct_html_ae2455a6e181bff5ae3fc900cb8916e7a"><div class="ttname"><a href="structoperator__struct.html#ae2455a6e181bff5ae3fc900cb8916e7a">operator_struct::decaymul</a></div><div class="ttdeci">fltype decaymul</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00131">opl.h:131</a></div></div>
<div class="ttc" id="aopl_8cpp_html_a369860d23566f666e8cff363d714aea0"><div class="ttname"><a href="opl_8cpp.html#a369860d23566f666e8cff363d714aea0">operator_advance_drums</a></div><div class="ttdeci">void operator_advance_drums(op_type *op_pt1, Bit32s vib1, op_type *op_pt2, Bit32s vib2, op_type *op_pt3, Bit32s vib3)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00147">opl.cpp:147</a></div></div>
<div class="ttc" id="aopl_8cpp_html_aaafcfa64a60cfd711ec46e25191025a0"><div class="ttname"><a href="opl_8cpp.html#aaafcfa64a60cfd711ec46e25191025a0">opfuncs</a></div><div class="ttdeci">optype_fptr opfuncs[6]</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00295">opl.cpp:295</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a77fd6ded964e94c4803095f440b08ca7"><div class="ttname"><a href="structoperator__struct.html#a77fd6ded964e94c4803095f440b08ca7">operator_struct::a3</a></div><div class="ttdeci">fltype a3</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00130">opl.h:130</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a16b1736941c3acc729c938fa7037e534"><div class="ttname"><a href="structoperator__struct.html#a16b1736941c3acc729c938fa7037e534">operator_struct::cur_wform</a></div><div class="ttdeci">Bit16s * cur_wform</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00135">opl.h:135</a></div></div>
<div class="ttc" id="astructoperator__struct_html_aa4e21ce85899203574a5431ee2df64c7"><div class="ttname"><a href="structoperator__struct.html#aa4e21ce85899203574a5431ee2df64c7">operator_struct::a1</a></div><div class="ttdeci">fltype a1</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00130">opl.h:130</a></div></div>
<div class="ttc" id="astructop_html"><div class="ttname"><a href="structop.html">op</a></div><div class="ttdef"><b>Definition:</b> <a href="parse_8h_source.html#l00047">parse.h:47</a></div></div>
<div class="ttc" id="astructoperator__struct_html_ad037d5ea40b636bb646beda963397bb1"><div class="ttname"><a href="structoperator__struct.html#ad037d5ea40b636bb646beda963397bb1">operator_struct::releasemul</a></div><div class="ttdeci">fltype releasemul</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00131">opl.h:131</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a3607c7d66b7cd6f6beb1931ecbd5832c"><div class="ttname"><a href="structoperator__struct.html#a3607c7d66b7cd6f6beb1931ecbd5832c">operator_struct::is_4op_attached</a></div><div class="ttdeci">bool is_4op_attached</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00148">opl.h:148</a></div></div>
<div class="ttc" id="astructoperator__struct_html_ac160de4650e66a61bfe7dd00bebb798e"><div class="ttname"><a href="structoperator__struct.html#ac160de4650e66a61bfe7dd00bebb798e">operator_struct::a0</a></div><div class="ttdeci">fltype a0</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00130">opl.h:130</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a2870de8dc7bbb66dede35a5bb178dc44"><div class="ttname"><a href="structoperator__struct.html#a2870de8dc7bbb66dede35a5bb178dc44">operator_struct::lastcval</a></div><div class="ttdeci">Bit32s lastcval</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00124">opl.h:124</a></div></div>
<div class="ttc" id="aopl_8h_html_a5359529d9da2a6eca2ee99973116ebe1"><div class="ttname"><a href="opl_8h.html#a5359529d9da2a6eca2ee99973116ebe1">ARC_KSL_OUTLEV</a></div><div class="ttdeci">#define ARC_KSL_OUTLEV</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00084">opl.h:84</a></div></div>
<div class="ttc" id="astructoperator__struct_html_ada9c3cef06bf2201cdcbe180234d91cb"><div class="ttname"><a href="structoperator__struct.html#ada9c3cef06bf2201cdcbe180234d91cb">operator_struct::tcount</a></div><div class="ttdeci">Bit32u tcount</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00125">opl.h:125</a></div></div>
<div class="ttc" id="astdlib_8h_html_ae23144bcbb8e3742b00eb687c36654d1"><div class="ttname"><a href="stdlib_8h.html#ae23144bcbb8e3742b00eb687c36654d1">rand</a></div><div class="ttdeci">int rand(void)</div></div>
<div class="ttc" id="aopl_8cpp_html_a893500349493e634ef27bea156738800"><div class="ttname"><a href="opl_8cpp.html#a893500349493e634ef27bea156738800">optype_fptr</a></div><div class="ttdeci">void(* optype_fptr)(op_type *)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00293">opl.cpp:293</a></div></div>
<div class="ttc" id="aopl_8h_html_ae5597ce31d23d11493e6e674fe257d73"><div class="ttname"><a href="opl_8h.html#ae5597ce31d23d11493e6e674fe257d73">NUM_CHANNELS</a></div><div class="ttdeci">#define NUM_CHANNELS</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00057">opl.h:57</a></div></div>
<div class="ttc" id="aopl_8cpp_html_aaa7310d1a5fe6fc5c068485f8a03c84b"><div class="ttname"><a href="opl_8cpp.html#aaa7310d1a5fe6fc5c068485f8a03c84b">operator_attack</a></div><div class="ttdeci">void operator_attack(op_type *op_pt)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00269">opl.cpp:269</a></div></div>
<div class="ttc" id="a_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_html_a73e8960a29095eee179715598b87a486"><div class="ttname"><a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h.html#a73e8960a29095eee179715598b87a486">Bit32u</a></div><div class="ttdeci">unsigned long Bit32u</div><div class="ttdef"><b>Definition:</b> <a href="_midi_player5_2_v_s_t_2_o_p_l3_vsti_2opl3emu4v__src_2src_2types_8h_source.html#l00006">types.h:6</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a0a5ecc51cb9815c4770232c3e5a0fe32"><div class="ttname"><a href="structoperator__struct.html#a0a5ecc51cb9815c4770232c3e5a0fe32">operator_struct::step_amp</a></div><div class="ttdeci">fltype step_amp</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00126">opl.h:126</a></div></div>
<div class="ttc" id="astructoperator__struct_html_aaa56530c33fdaf6a75bd8cc2ac8250d3"><div class="ttname"><a href="structoperator__struct.html#aaa56530c33fdaf6a75bd8cc2ac8250d3">operator_struct::vibrato</a></div><div class="ttdeci">bool vibrato</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00139">opl.h:139</a></div></div>
<div class="ttc" id="astructoperator__struct_html_af13c91a9cebbed1edbf36e8636bf342d"><div class="ttname"><a href="structoperator__struct.html#af13c91a9cebbed1edbf36e8636bf342d">operator_struct::is_4op</a></div><div class="ttdeci">bool is_4op</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00148">opl.h:148</a></div></div>
<div class="ttc" id="aopl_8h_html_a1d92f4195f75880716efa08b64b927e0"><div class="ttname"><a href="opl_8h.html#a1d92f4195f75880716efa08b64b927e0">OF_TYPE_SUS</a></div><div class="ttdeci">#define OF_TYPE_SUS</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00078">opl.h:78</a></div></div>
<div class="ttc" id="astdlib_8h_html"><div class="ttname"><a href="stdlib_8h.html">stdlib.h</a></div></div>
<div class="ttc" id="aopl_8h_html_a37ce6a33c319c21e2eeb62be4baa974f"><div class="ttname"><a href="opl_8h.html#a37ce6a33c319c21e2eeb62be4baa974f">ARC_FEEDBACK</a></div><div class="ttdeci">#define ARC_FEEDBACK</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00090">opl.h:90</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a532e1ddaca6b2ccbe6c0ca8cbed5e7b3"><div class="ttname"><a href="structoperator__struct.html#a532e1ddaca6b2ccbe6c0ca8cbed5e7b3">operator_struct::sus_keep</a></div><div class="ttdeci">bool sus_keep</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00138">opl.h:138</a></div></div>
<div class="ttc" id="aopl_8cpp_html_a09a3d4d221df6671104bdc262c2e0917"><div class="ttname"><a href="opl_8cpp.html#a09a3d4d221df6671104bdc262c2e0917">CHANVAL_OUT</a></div><div class="ttdeci">#define CHANVAL_OUT</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00858">opl.cpp:858</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a1cd1b4cd39da5756ce6742d8df00e84a"><div class="ttname"><a href="structoperator__struct.html#a1cd1b4cd39da5756ce6742d8df00e84a">operator_struct::tremolo</a></div><div class="ttdeci">bool tremolo</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00139">opl.h:139</a></div></div>
<div class="ttc" id="aopl_8cpp_html_a9988c8831e36b6d0e166f0e2ccb6319f"><div class="ttname"><a href="opl_8cpp.html#a9988c8831e36b6d0e166f0e2ccb6319f">operator_sustain</a></div><div class="ttdeci">void operator_sustain(op_type *op_pt)</div><div class="ttdef"><b>Definition:</b> <a href="opl_8cpp_source.html#l00205">opl.cpp:205</a></div></div>
<div class="ttc" id="aopl_8h_html_a5887f1420ea3c4eb9f9a9dd29628af1a"><div class="ttname"><a href="opl_8h.html#a5887f1420ea3c4eb9f9a9dd29628af1a">OPL_INLINE</a></div><div class="ttdeci">#define OPL_INLINE</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00053">opl.h:53</a></div></div>
<div class="ttc" id="astructoperator__struct_html_ac7463f3bb276373fcf04f7edb5091c11"><div class="ttname"><a href="structoperator__struct.html#ac7463f3bb276373fcf04f7edb5091c11">operator_struct::wfpos</a></div><div class="ttdeci">Bit32u wfpos</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00125">opl.h:125</a></div></div>
<div class="ttc" id="aopl_8h_html_aed59db242877547b015d1e706a5c2c7b"><div class="ttname"><a href="opl_8h.html#aed59db242877547b015d1e706a5c2c7b">ARC_PERC_MODE</a></div><div class="ttdeci">#define ARC_PERC_MODE</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00089">opl.h:89</a></div></div>
<div class="ttc" id="aopl_8h_html_a98c738e8218147903794caffb8c5e49c"><div class="ttname"><a href="opl_8h.html#a98c738e8218147903794caffb8c5e49c">BLOCKBUF_SIZE</a></div><div class="ttdeci">#define BLOCKBUF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00100">opl.h:100</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00246">cubase64_1analyzePitch.m:246</a></div></div>
<div class="ttc" id="aopl_8h_html_ae7406e845a7de67037fa72b8353c027e"><div class="ttname"><a href="opl_8h.html#ae7406e845a7de67037fa72b8353c027e">OP_ACT_NORMAL</a></div><div class="ttdeci">#define OP_ACT_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00097">opl.h:97</a></div></div>
<div class="ttc" id="astructoperator__struct_html_a557b4708e23f9eccded207ed571f1229"><div class="ttname"><a href="structoperator__struct.html#a557b4708e23f9eccded207ed571f1229">operator_struct::vol</a></div><div class="ttdeci">fltype vol</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00127">opl.h:127</a></div></div>
<div class="ttc" id="aopl_8h_html_a318ac4e2cff04194f748649cb71a73ef"><div class="ttname"><a href="opl_8h.html#a318ac4e2cff04194f748649cb71a73ef">FL05</a></div><div class="ttdeci">#define FL05</div><div class="ttdef"><b>Definition:</b> <a href="opl_8h_source.html#l00062">opl.h:62</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1438cc8c1a18e5b5e27392fc9c1a8795.html">musictools</a></li><li class="navelem"><a class="el" href="dir_548b17ebdc376a619687963a0ad94d24.html">MidiPlayer5</a></li><li class="navelem"><a class="el" href="dir_ab9e2fa644241238789e6b8d8e10961d.html">VST</a></li><li class="navelem"><a class="el" href="dir_a4f9a139b188aba57db7c28352aa161b.html">OPL3Vsti</a></li><li class="navelem"><a class="el" href="dir_a398e552f24f4c8343647fa08a58ee90.html">opl3emu4v_src</a></li><li class="navelem"><a class="el" href="dir_1cb51aefa3dc1c5bd42a0d59a99f359c.html">src</a></li><li class="navelem"><a class="el" href="opl_8cpp.html">opl.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
