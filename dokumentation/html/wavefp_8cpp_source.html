<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIC SID Project: musictools/GoatTracker_2.75/goattrk2/src/resid-fp/wavefp.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIC SID Project
   &#160;<span id="projectnumber">prototype</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('wavefp_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">wavefp.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="wavefp_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//  ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  This file is part of reSID, a MOS6581 SID emulator engine.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  Copyright (C) 2004  Dag Lem &lt;resid@nimrod.no&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//  it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//  the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//  (at your option) any later version.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//  This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//  GNU General Public License for more details.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//  You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//  along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//  ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wavefp_8h.html">wavefp.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sidfp_8h.html">sidfp.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="structwaveformconfig__t.html">   23</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="structwaveformconfig__t.html#ab881305da614121cd59b58172248c151">   24</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structwaveformconfig__t.html#ab881305da614121cd59b58172248c151">bias</a>;</div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="structwaveformconfig__t.html#a52b13018ba83315db14cd1289db5d4a6">   25</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structwaveformconfig__t.html#a52b13018ba83315db14cd1289db5d4a6">pulsestrength</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="structwaveformconfig__t.html#a25fe433a5901595bb969aea07746a16b">   26</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structwaveformconfig__t.html#a25fe433a5901595bb969aea07746a16b">topbit</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="structwaveformconfig__t.html#a06f14a9abd47b91465f895d5259cdc1b">   27</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structwaveformconfig__t.html#a06f14a9abd47b91465f895d5259cdc1b">distance</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="structwaveformconfig__t.html#a3440fd6a60ecf1f9b738049560602188">   28</a></span>&#160;    <span class="keywordtype">float</span> <a class="code" href="structwaveformconfig__t.html#a3440fd6a60ecf1f9b738049560602188">stmix</a>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;} <a class="code" href="structwaveformconfig__t.html">waveformconfig_t</a>;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="wavefp_8cpp.html#ab67f321a7e207f08c545bcdb7272d173">   31</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="wavefp_8cpp.html#ab67f321a7e207f08c545bcdb7272d173">sharpness</a> = 512.f;</div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="wavefp_8cpp.html#a458d3018ed97450f11fada763b5ff3f9">   32</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structwaveformconfig__t.html">waveformconfig_t</a> <a class="code" href="wavefp_8cpp.html#a458d3018ed97450f11fada763b5ff3f9">wfconfig</a>[2][5] = { {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">/* kevtris chip G (6581) */</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    { 0.880815f, 0.f, 0.f, 0.3279614f, 0.5999545f }, <span class="comment">// error 1795</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    { 0.8924618f, 2.014781f, 1.003332f, 0.02992322f, 0.0f }, <span class="comment">// error 11610</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    { 0.8646501f, 1.712586f, 1.137704f, 0.02845423f, 0.f }, <span class="comment">// error 21307</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    { 0.9527834f, 1.794777f, 0.f, 0.09806272f, 0.7752482f }, <span class="comment">// error 196</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    { 0.5f, 0.0f, 1.0f, 0.0f, 0.0f, },</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}, {</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">/* kevtris chip V (8580) */</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    { 0.9781665f, 0.f, 0.9899469f, 8.087667f, 0.8226412f }, <span class="comment">// error 5546</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    { 0.9097769f, 2.039997f, 0.9584096f, 0.1765447f, 0.f }, <span class="comment">// error 18763</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    { 0.9231212f, 2.084788f, 0.9493895f, 0.1712518f, 0.f }, <span class="comment">// error 17103</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    { 0.9845552f, 1.415612f, 0.9703883f, 3.68829f, 0.8265008f }, <span class="comment">// error 3319</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    { 0.5f, 0.0f, 1.0f, 0.0f, 0.0f },</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    }</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;};</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/* render output from bitstate */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> make_sample(<span class="keywordtype">float</span> *o) {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordtype">float</span> <a class="code" href="ins2snd2_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = 0;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="ins2snd2_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> += o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] * <a class="code" href="sidfp_8cpp.html#a1186eb7d27fa9db755beb012c100e912">dac</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="ins2snd2_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/* generate tables for waveforms 1 .. 7 */</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#ade0baaa5b262c9e6e7a5444885439701">   59</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#ade0baaa5b262c9e6e7a5444885439701">WaveformGeneratorFP::rebuild_wftable</a>() {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">float</span> o[12];</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> oldwf = <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a0fdf53c7d3c2abe79f532d0eda473c69">reg32</a> oldacc = <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a9328a4815a368dfec763aa1b59aa7729">reg12</a> oldpw = <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> = 1; <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &lt; 8; <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> ++) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> = 0; <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> &lt; (1&lt;&lt;24); <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> += (1&lt;&lt;12)) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="comment">/* generate pulse-low variants. Also,</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">             * when waveform &lt; 4, pw doesn&#39;t matter. */</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> = 0x1000; <span class="comment">/* pulse always low */</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <a class="code" href="class_waveform_generator_f_p.html#a3db91ab6792b84ea71e784efb561546f">calculate_waveform_sample</a>(o);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <a class="code" href="sidfp_8cpp.html#a3bfc47aa65309464f9e4b3aeefcf036d">wftable</a>[<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> - 1][<a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> &gt;&gt; 12] = make_sample(o) + <a class="code" href="class_waveform_generator_f_p.html#a856f48051a8443fdfaae7e6909a9eccc">wave_zero</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="comment">/* Add pulse-high variants after pulse-low state variants */</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &gt;= 4) {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> = 0x000; <span class="comment">/* pulse always high */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <a class="code" href="class_waveform_generator_f_p.html#a3db91ab6792b84ea71e784efb561546f">calculate_waveform_sample</a>(o);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <a class="code" href="sidfp_8cpp.html#a3bfc47aa65309464f9e4b3aeefcf036d">wftable</a>[<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> + 3][<a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> &gt;&gt; 12] = make_sample(o) + <a class="code" href="class_waveform_generator_f_p.html#a856f48051a8443fdfaae7e6909a9eccc">wave_zero</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> = oldwf;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> = oldacc;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> = oldpw;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;}</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/* explode reg12 to a floating point bit array */</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> populate(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a9328a4815a368dfec763aa1b59aa7729">reg12</a> v, <span class="keywordtype">float</span> o[12])</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordtype">int</span> j = 1;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = v &amp; j ? 1.f : 0.f;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        j &lt;&lt;= 1;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">/* waveform values valid are 1 .. 7 */</span></div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a3db91ab6792b84ea71e784efb561546f">   97</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#a3db91ab6792b84ea71e784efb561546f">WaveformGeneratorFP::calculate_waveform_sample</a>(<span class="keywordtype">float</span> o[12])</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;{</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">/* P */</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> == 4) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    populate((<a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> &gt;&gt; 12) &gt;= <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> ? 0xfff : 0x000, o);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keyword">const</span> <a class="code" href="structwaveformconfig__t.html">waveformconfig_t</a> <a class="code" href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">config</a> = <a class="code" href="wavefp_8cpp.html#a458d3018ed97450f11fada763b5ff3f9">wfconfig</a>[</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a5d822ab3d1f5c75cfc11cc36c9eb8066">model</a> == <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcdafc04655d0aa5bb12f49e4c713c28a6d8">MOS6581</a> ? 0 : 1</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  ][</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> == 3 ? 0 :</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> == 5 ? 1 :</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> == 6 ? 2 :</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> == 7 ? 3 :</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    4</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  ];</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">/* S with strong top bit for 6581 */</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  populate(<a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> &gt;&gt; 12, o);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">/* convert to T */</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &amp; 3) == 1) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="_s_i_d-_wizard-1_87-_user_manual_8txt.html#ac37af8af18ac51c5b2e7e00705023402">top</a> = (<a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> &amp; 0x800000) != 0;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 11; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &gt; 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> --) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="_s_i_d-_wizard-1_87-_user_manual_8txt.html#ac37af8af18ac51c5b2e7e00705023402">top</a>) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 1.0f - o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-1];</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>-1];</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    o[0] = 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="comment">/* convert to ST */</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &amp; 3) == 3) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">/* bottom bit is grounded via T waveform selector */</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    o[0] *= <a class="code" href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">config</a>.<a class="code" href="structre_s_i_dfp_1_1_combined_waveform_config.html#a3440fd6a60ecf1f9b738049560602188">stmix</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 1; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> - 1] * (1.f - <a class="code" href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">config</a>.<a class="code" href="structre_s_i_dfp_1_1_combined_waveform_config.html#a3440fd6a60ecf1f9b738049560602188">stmix</a>) + o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] * <a class="code" href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">config</a>.<a class="code" href="structre_s_i_dfp_1_1_combined_waveform_config.html#a3440fd6a60ecf1f9b738049560602188">stmix</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  o[11] *= <a class="code" href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">config</a>.<a class="code" href="structre_s_i_dfp_1_1_combined_waveform_config.html#a25fe433a5901595bb969aea07746a16b">topbit</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">/* ST, P* waveform? */</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> == 3 || <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &gt; 4) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordtype">float</span> distancetable[12 * 2 + 1];</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt;= 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        distancetable[12+<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = distancetable[12-<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 1.f / (1.f + <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> * <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> * <a class="code" href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">config</a>.distance);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordtype">float</span> pulse = (<a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> &gt;&gt; 12) &gt;= <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> ? 1.<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a> : -1.<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    pulse *= <a class="code" href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">config</a>.<a class="code" href="structre_s_i_dfp_1_1_combined_waveform_config.html#a52b13018ba83315db14cd1289db5d4a6">pulsestrength</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">float</span> tmp[12];</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordtype">float</span> avg = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordtype">float</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> = 0;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 12; j ++) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordtype">float</span> weight = distancetable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> - j + 12];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            avg += o[j] * weight;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> += weight;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        }</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="comment">/* pulse control bit */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &gt; 4) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordtype">float</span> weight = distancetable[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> - 12 + 12];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            avg += pulse * weight;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> += weight;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        tmp[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] + avg / <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>) * 0.5<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = tmp[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">/* use the environment around bias value to set/clear dac bit. The</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">   * relationship is nonlinear because that seems to sound a bit better. */</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = (o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] - <a class="code" href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">config</a>.<a class="code" href="structre_s_i_dfp_1_1_combined_waveform_config.html#ab881305da614121cd59b58172248c151">bias</a>) * <a class="code" href="wavefp_8cpp.html#ab67f321a7e207f08c545bcdb7272d173">sharpness</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] += 0.5f;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &gt; 1.<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;       o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 1.f;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">if</span> (o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &lt; 0.<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>) {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0.;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  }</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a5694a34f91d231304c23cb45a2b1c065">  192</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#a5694a34f91d231304c23cb45a2b1c065">WaveformGeneratorFP::set_nonlinearity</a>(<span class="keywordtype">float</span> nl)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;{</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="sidfp_8cpp.html#a1186eb7d27fa9db755beb012c100e912">dac</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d_f_p.html#a5143eaf982cebd6eea361adbdf20d068">SIDFP::kinked_dac</a>((1 &lt;&lt; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>), nl, 12);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">// Constructor.</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#aa70eac7ca1c4b0cf2e8ffbdcf8ed3c4e">  202</a></span>&#160;<a class="code" href="class_waveform_generator_f_p.html#aa70eac7ca1c4b0cf2e8ffbdcf8ed3c4e">WaveformGeneratorFP::WaveformGeneratorFP</a>()</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;{</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a7d0cf64e99ba7d320528da9351a7a379">set_chip_model</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcdafc04655d0aa5bb12f49e4c713c28a6d8">MOS6581</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">// Set chip model.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a7d0cf64e99ba7d320528da9351a7a379">  211</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#a7d0cf64e99ba7d320528da9351a7a379">WaveformGeneratorFP::set_chip_model</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcd">chip_model</a> model)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  this-&gt;model = <a class="code" href="class_waveform_generator_f_p.html#a5d822ab3d1f5c75cfc11cc36c9eb8066">model</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a856f48051a8443fdfaae7e6909a9eccc">wave_zero</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code" href="class_waveform_generator_f_p.html#a5d822ab3d1f5c75cfc11cc36c9eb8066">model</a> == <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcdafc04655d0aa5bb12f49e4c713c28a6d8">MOS6581</a> ? -0x380 : -0x800);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// Register functions.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a4989daed8f4be5a9ee7c72b5781adc61">  221</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#a4989daed8f4be5a9ee7c72b5781adc61">WaveformGeneratorFP::writeFREQ_LO</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> freq_lo)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a5af5067c2bd225750570996cb4eaf7d3">freq</a> = (<a class="code" href="class_waveform_generator_f_p.html#a5af5067c2bd225750570996cb4eaf7d3">freq</a> &amp; 0xff00) | (freq_lo &amp; 0xff);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#ac5a70f2cb36cf2f625434b7070405182">  226</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#ac5a70f2cb36cf2f625434b7070405182">WaveformGeneratorFP::writeFREQ_HI</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> freq_hi)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;{</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a5af5067c2bd225750570996cb4eaf7d3">freq</a> = ((freq_hi &lt;&lt; 8) &amp; 0xff00) | (<a class="code" href="class_waveform_generator_f_p.html#a5af5067c2bd225750570996cb4eaf7d3">freq</a> &amp; 0xff);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a679de489ee841d255035e28723657722">  231</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#a679de489ee841d255035e28723657722">WaveformGeneratorFP::writePW_LO</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> pw_lo)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;{</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> = (<a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> &amp; 0xf00) | (pw_lo &amp; 0x0ff);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#af170643c424abdffd008aa66de646da4">  236</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#af170643c424abdffd008aa66de646da4">WaveformGeneratorFP::writePW_HI</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> pw_hi)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> = ((pw_hi &lt;&lt; 8) &amp; 0xf00) | (<a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> &amp; 0x0ff);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a9ef0f5f87d8295d8bbbdc1767b4000d9">  241</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#a9ef0f5f87d8295d8bbbdc1767b4000d9">WaveformGeneratorFP::writeCONTROL_REG</a>(<a class="code" href="class_waveform_generator_f_p.html">WaveformGeneratorFP</a>&amp; source, <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> control)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">/* when selecting the 0 waveform, the previous output is held for</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">   * a time in the DAC MOSFET gates. We keep on holding forever, though... */</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a230c5bb9e99122a53cbc3e10c8236aea">reg4</a> waveform_next = (control &gt;&gt; 4) &amp; 0x0f;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span> (waveform_next == 0 &amp;&amp; <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &gt;= 1 &amp;&amp; <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &lt;= 7) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a1ffad85478c85ad13e80fcf911c38449">previous</a> = <a class="code" href="class_waveform_generator_f_p.html#a62127fe720d7dc116a9fde87436d7424">readOSC</a>(source);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#ad7fd39cd968c80e8ead7afe970020c90">previous_dac</a> = <a class="code" href="class_waveform_generator_f_p.html#a58258d573647c7984dca18195964d2ec">output</a>(source);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> = waveform_next;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a75f99e1258d50738fba611b5dac5d19f">ring_mod</a> = (control &amp; 0x04) != 0;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#af5bad216eac9aefc703a450d3163e542">sync</a> = (control &amp; 0x02) != 0;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">bool</span> test_next = (control &amp; 0x08) != 0;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// Test bit rising? Invert bit 19 and write it to bit 1.</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">if</span> (test_next &amp;&amp; !<a class="code" href="class_waveform_generator_f_p.html#a69f942d7289d5ed2ffe3a00b12235d04">test</a>) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> = 0;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#ab0581f55aa80be209c0d39c879c7cb8b">reg24</a> bit19 = (<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &gt;&gt; 18) &amp; 2;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> = (<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x7ffffd) | (bit19^2);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a1be167e08191df44e7c1370507333cc1">noise_overwrite_delay</a> = 200000; <span class="comment">/* 200 ms, probably too generous? */</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (! test_next) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="comment">// Test bit falling? clock noise once,</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="comment">// otherwise just emulate noise&#39;s combined waveforms.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="class_waveform_generator_f_p.html#a722e0427c41955bf84f6ff5990dd836b">clock_noise</a>(<a class="code" href="class_waveform_generator_f_p.html#a69f942d7289d5ed2ffe3a00b12235d04">test</a>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a69f942d7289d5ed2ffe3a00b12235d04">test</a> = test_next;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a62127fe720d7dc116a9fde87436d7424">  273</a></span>&#160;<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> <a class="code" href="class_waveform_generator_f_p.html#a62127fe720d7dc116a9fde87436d7424">WaveformGeneratorFP::readOSC</a>(<a class="code" href="class_waveform_generator_f_p.html">WaveformGeneratorFP</a>&amp; source)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordtype">float</span> o[12];</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> == 0 || <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &gt; 7) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_waveform_generator_f_p.html#a1ffad85478c85ad13e80fcf911c38449">previous</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">/* Include effects of the test bit &amp; ring mod */</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a9328a4815a368dfec763aa1b59aa7729">reg12</a> oldpw = <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a69f942d7289d5ed2ffe3a00b12235d04">test</a>) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> = 0;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#ab0581f55aa80be209c0d39c879c7cb8b">reg24</a> oldaccumulator = <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> ^= (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &amp; 3) == 1 &amp;&amp; <a class="code" href="class_waveform_generator_f_p.html#a75f99e1258d50738fba611b5dac5d19f">ring_mod</a> &amp;&amp; (source.<a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> &amp; 0x800000) ? 0x800000 : 0;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a3db91ab6792b84ea71e784efb561546f">calculate_waveform_sample</a>(o);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> = oldpw;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> = oldaccumulator;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> <a class="code" href="ins2snd2_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> = 0;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> <a class="code" href="cubase64__1analyze_pitch_8m.html#abc96a7397125bd0c724070f4f29be519">bit</a> = 1;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 4; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 12; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">if</span> (o[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] &gt; 0.5<a class="code" href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a>) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <a class="code" href="ins2snd2_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a> |= <a class="code" href="cubase64__1analyze_pitch_8m.html#abc96a7397125bd0c724070f4f29be519">bit</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="cubase64__1analyze_pitch_8m.html#abc96a7397125bd0c724070f4f29be519">bit</a> &lt;&lt;= 1;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="ins2snd2_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a722e0427c41955bf84f6ff5990dd836b">  303</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#a722e0427c41955bf84f6ff5990dd836b">WaveformGeneratorFP::clock_noise</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="time_8h.html#ade863cfcca9ee19f20ca95796f8ddc1e">clock</a>)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a91c4a467078baf29eb254476f50fa310">clock</a>) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#ab0581f55aa80be209c0d39c879c7cb8b">reg24</a> bit0 = ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &gt;&gt; 22) ^ (<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &gt;&gt; 17)) &amp; 0x1;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &lt;&lt;= 1;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> |= bit0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">// clear output bits of shift register if noise and other waveforms</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">// are selected simultaneously</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &gt; 8) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp;= 0x7fffff^(1&lt;&lt;22)^(1&lt;&lt;20)^(1&lt;&lt;16)^(1&lt;&lt;13)^(1&lt;&lt;11)^(1&lt;&lt;7)^(1&lt;&lt;4)^(1&lt;&lt;2);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> &gt;= 8) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#a1ffad85478c85ad13e80fcf911c38449">previous</a> = <a class="code" href="class_waveform_generator_f_p.html#a5d4b4dcb3728626e92808c0c76aa18fa">outputN___</a>() &gt;&gt; 4;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="class_waveform_generator_f_p.html#ad7fd39cd968c80e8ead7afe970020c90">previous_dac</a> = <a class="code" href="class_waveform_generator_f_p.html#a856f48051a8443fdfaae7e6909a9eccc">wave_zero</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 8; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> ++) {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="class_waveform_generator_f_p.html#a1ffad85478c85ad13e80fcf911c38449">previous</a> &amp; (1 &lt;&lt; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <a class="code" href="class_waveform_generator_f_p.html#ad7fd39cd968c80e8ead7afe970020c90">previous_dac</a> += <a class="code" href="sidfp_8cpp.html#a1186eb7d27fa9db755beb012c100e912">dac</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>+4];</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#a5d4b4dcb3728626e92808c0c76aa18fa">  328</a></span>&#160;<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a9328a4815a368dfec763aa1b59aa7729">reg12</a> <a class="code" href="class_waveform_generator_f_p.html#a5d4b4dcb3728626e92808c0c76aa18fa">WaveformGeneratorFP::outputN___</a>()</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">return</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x400000) &gt;&gt; 11) |</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x100000) &gt;&gt; 10) |</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x010000) &gt;&gt; 7) |</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x002000) &gt;&gt; 5) |</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x000800) &gt;&gt; 4) |</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x000080) &gt;&gt; 1) |</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x000010) &lt;&lt; 1) |</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    ((<a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> &amp; 0x000004) &lt;&lt; 2);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">// SID reset.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="class_waveform_generator_f_p.html#ad20897c5c8bd47f5d4005989bead0e55">  344</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_waveform_generator_f_p.html#ad20897c5c8bd47f5d4005989bead0e55">WaveformGeneratorFP::reset</a>()</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> = 0;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a1ffad85478c85ad13e80fcf911c38449">previous</a> = 0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#ad7fd39cd968c80e8ead7afe970020c90">previous_dac</a> = 0;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> = 0x7ffffc;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a5af5067c2bd225750570996cb4eaf7d3">freq</a> = 0;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">pw</a> = 0;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a69f942d7289d5ed2ffe3a00b12235d04">test</a> = 0;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">waveform</a> = 0;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a9ef0f5f87d8295d8bbbdc1767b4000d9">writeCONTROL_REG</a>(*<span class="keyword">this</span>, 0);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="class_waveform_generator_f_p.html#a8339ff4c659be817392153bd3960f7ef">msb_rising</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_waveform_generator_f_p_html_a5694a34f91d231304c23cb45a2b1c065"><div class="ttname"><a href="class_waveform_generator_f_p.html#a5694a34f91d231304c23cb45a2b1c065">WaveformGeneratorFP::set_nonlinearity</a></div><div class="ttdeci">void set_nonlinearity(float nl)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00192">wavefp.cpp:192</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a9328a4815a368dfec763aa1b59aa7729"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a9328a4815a368dfec763aa1b59aa7729">reg12</a></div><div class="ttdeci">unsigned int reg12</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00041">siddefs.h:41</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_aa70eac7ca1c4b0cf2e8ffbdcf8ed3c4e"><div class="ttname"><a href="class_waveform_generator_f_p.html#aa70eac7ca1c4b0cf2e8ffbdcf8ed3c4e">WaveformGeneratorFP::WaveformGeneratorFP</a></div><div class="ttdeci">WaveformGeneratorFP()</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00202">wavefp.cpp:202</a></div></div>
<div class="ttc" id="ains2snd2_8c_html_a1277960b5f2b37137fe9b0b5a1ea0beb"><div class="ttname"><a href="ins2snd2_8c.html#a1277960b5f2b37137fe9b0b5a1ea0beb">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="ins2snd2_8c_source.html#l00019">ins2snd2.c:19</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a9ef0f5f87d8295d8bbbdc1767b4000d9"><div class="ttname"><a href="class_waveform_generator_f_p.html#a9ef0f5f87d8295d8bbbdc1767b4000d9">WaveformGeneratorFP::writeCONTROL_REG</a></div><div class="ttdeci">void writeCONTROL_REG(WaveformGeneratorFP &amp;source, reg8 value)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00241">wavefp.cpp:241</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a856f48051a8443fdfaae7e6909a9eccc"><div class="ttname"><a href="class_waveform_generator_f_p.html#a856f48051a8443fdfaae7e6909a9eccc">WaveformGeneratorFP::wave_zero</a></div><div class="ttdeci">float wave_zero</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00087">wavefp.h:87</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a91c4a467078baf29eb254476f50fa310"><div class="ttname"><a href="class_waveform_generator_f_p.html#a91c4a467078baf29eb254476f50fa310">WaveformGeneratorFP::clock</a></div><div class="ttdeci">void clock()</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00099">wavefp.h:99</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a889db961d737bd98db726c6fd3a00dd2"><div class="ttname"><a href="class_waveform_generator_f_p.html#a889db961d737bd98db726c6fd3a00dd2">WaveformGeneratorFP::accumulator</a></div><div class="ttdeci">reg24 accumulator</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00068">wavefp.h:68</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a1ffad85478c85ad13e80fcf911c38449"><div class="ttname"><a href="class_waveform_generator_f_p.html#a1ffad85478c85ad13e80fcf911c38449">WaveformGeneratorFP::previous</a></div><div class="ttdeci">reg8 previous</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00070">wavefp.h:70</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html"><div class="ttname"><a href="class_waveform_generator_f_p.html">WaveformGeneratorFP</a></div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00036">wavefp.h:36</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a5d822ab3d1f5c75cfc11cc36c9eb8066"><div class="ttname"><a href="class_waveform_generator_f_p.html#a5d822ab3d1f5c75cfc11cc36c9eb8066">WaveformGeneratorFP::model</a></div><div class="ttdeci">chip_model model</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00063">wavefp.h:63</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_abc96a7397125bd0c724070f4f29be519"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#abc96a7397125bd0c724070f4f29be519">bit</a></div><div class="ttdeci">clks LDA ROR $AF Compressed pitch bit</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l01173">cubase64_1analyzePitch.m:1173</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a92d711c22040a38dd032a4dd233b8eff"><div class="ttname"><a href="class_waveform_generator_f_p.html#a92d711c22040a38dd032a4dd233b8eff">WaveformGeneratorFP::shift_register</a></div><div class="ttdeci">reg24 shift_register</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00069">wavefp.h:69</a></div></div>
<div class="ttc" id="awavefp_8cpp_html_ab67f321a7e207f08c545bcdb7272d173"><div class="ttname"><a href="wavefp_8cpp.html#ab67f321a7e207f08c545bcdb7272d173">sharpness</a></div><div class="ttdeci">const float sharpness</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00031">wavefp.cpp:31</a></div></div>
<div class="ttc" id="astructre_s_i_dfp_1_1_combined_waveform_config_html_a3440fd6a60ecf1f9b738049560602188"><div class="ttname"><a href="structre_s_i_dfp_1_1_combined_waveform_config.html#a3440fd6a60ecf1f9b738049560602188">reSIDfp::CombinedWaveformConfig::stmix</a></div><div class="ttdeci">float stmix</div><div class="ttdef"><b>Definition:</b> <a href="_waveform_calculator_8h_source.html#l00044">WaveformCalculator.h:44</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a85b766155e569372fa271ce951e919d6"><div class="ttname"><a href="class_waveform_generator_f_p.html#a85b766155e569372fa271ce951e919d6">WaveformGeneratorFP::pw</a></div><div class="ttdeci">reg12 pw</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00076">wavefp.h:76</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a58258d573647c7984dca18195964d2ec"><div class="ttname"><a href="class_waveform_generator_f_p.html#a58258d573647c7984dca18195964d2ec">WaveformGeneratorFP::output</a></div><div class="ttdeci">float output(WaveformGeneratorFP &amp;source)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00149">wavefp.h:149</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a91e6b5172145ebb86e17b21e72e2715c"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a></div><div class="ttdeci">unsigned int reg8</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00040">siddefs.h:40</a></div></div>
<div class="ttc" id="astructwaveformconfig__t_html_a25fe433a5901595bb969aea07746a16b"><div class="ttname"><a href="structwaveformconfig__t.html#a25fe433a5901595bb969aea07746a16b">waveformconfig_t::topbit</a></div><div class="ttdeci">float topbit</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00026">wavefp.cpp:26</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a3db91ab6792b84ea71e784efb561546f"><div class="ttname"><a href="class_waveform_generator_f_p.html#a3db91ab6792b84ea71e784efb561546f">WaveformGeneratorFP::calculate_waveform_sample</a></div><div class="ttdeci">void calculate_waveform_sample(float o[12])</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00097">wavefp.cpp:97</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a4989daed8f4be5a9ee7c72b5781adc61"><div class="ttname"><a href="class_waveform_generator_f_p.html#a4989daed8f4be5a9ee7c72b5781adc61">WaveformGeneratorFP::writeFREQ_LO</a></div><div class="ttdeci">void writeFREQ_LO(reg8 value)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00221">wavefp.cpp:221</a></div></div>
<div class="ttc" id="asidfp_8cpp_html_a1186eb7d27fa9db755beb012c100e912"><div class="ttname"><a href="sidfp_8cpp.html#a1186eb7d27fa9db755beb012c100e912">dac</a></div><div class="ttdeci">float dac[12]</div><div class="ttdef"><b>Definition:</b> <a href="sidfp_8cpp_source.html#l00030">sidfp.cpp:30</a></div></div>
<div class="ttc" id="astructre_s_i_dfp_1_1_combined_waveform_config_html_a52b13018ba83315db14cd1289db5d4a6"><div class="ttname"><a href="structre_s_i_dfp_1_1_combined_waveform_config.html#a52b13018ba83315db14cd1289db5d4a6">reSIDfp::CombinedWaveformConfig::pulsestrength</a></div><div class="ttdeci">float pulsestrength</div><div class="ttdef"><b>Definition:</b> <a href="_waveform_calculator_8h_source.html#l00040">WaveformCalculator.h:40</a></div></div>
<div class="ttc" id="asidfp_8cpp_html_a3bfc47aa65309464f9e4b3aeefcf036d"><div class="ttname"><a href="sidfp_8cpp.html#a3bfc47aa65309464f9e4b3aeefcf036d">wftable</a></div><div class="ttdeci">float wftable[11][4096]</div><div class="ttdef"><b>Definition:</b> <a href="sidfp_8cpp_source.html#l00032">sidfp.cpp:32</a></div></div>
<div class="ttc" id="awavefp_8h_html"><div class="ttname"><a href="wavefp_8h.html">wavefp.h</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a69f942d7289d5ed2ffe3a00b12235d04"><div class="ttname"><a href="class_waveform_generator_f_p.html#a69f942d7289d5ed2ffe3a00b12235d04">WaveformGeneratorFP::test</a></div><div class="ttdeci">bool test</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00083">wavefp.h:83</a></div></div>
<div class="ttc" id="atime_8h_html_ade863cfcca9ee19f20ca95796f8ddc1e"><div class="ttname"><a href="time_8h.html#ade863cfcca9ee19f20ca95796f8ddc1e">clock</a></div><div class="ttdeci">clock_t clock(void)</div></div>
<div class="ttc" id="a_s_i_d-_wizard-1_87-_user_manual_8txt_html_ac37af8af18ac51c5b2e7e00705023402"><div class="ttname"><a href="_s_i_d-_wizard-1_87-_user_manual_8txt.html#ac37af8af18ac51c5b2e7e00705023402">top</a></div><div class="ttdeci">**************************SID Wizard User Manual **************************This is a shorter revised version of the SID Wizard User Manual now in TXT format so all quirks and complexities coming with PDF are excluded and it can be read on real C64 as well Press cursor up down to scroll up and and press Home to return to the top</div><div class="ttdef"><b>Definition:</b> <a href="_s_i_d-_wizard-1_87-_user_manual_8txt_source.html#l00015">SID-Wizard-1.7-UserManual.txt:15</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a8b37770414e868331d3cc265d4c08bcd"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcd">chip_model</a></div><div class="ttdeci">chip_model</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00050">siddefs.h:50</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a5d4b4dcb3728626e92808c0c76aa18fa"><div class="ttname"><a href="class_waveform_generator_f_p.html#a5d4b4dcb3728626e92808c0c76aa18fa">WaveformGeneratorFP::outputN___</a></div><div class="ttdeci">reg12 outputN___()</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00328">wavefp.cpp:328</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a1be167e08191df44e7c1370507333cc1"><div class="ttname"><a href="class_waveform_generator_f_p.html#a1be167e08191df44e7c1370507333cc1">WaveformGeneratorFP::noise_overwrite_delay</a></div><div class="ttdeci">int noise_overwrite_delay</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00071">wavefp.h:71</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a8339ff4c659be817392153bd3960f7ef"><div class="ttname"><a href="class_waveform_generator_f_p.html#a8339ff4c659be817392153bd3960f7ef">WaveformGeneratorFP::msb_rising</a></div><div class="ttdeci">bool msb_rising</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00066">wavefp.h:66</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a5af5067c2bd225750570996cb4eaf7d3"><div class="ttname"><a href="class_waveform_generator_f_p.html#a5af5067c2bd225750570996cb4eaf7d3">WaveformGeneratorFP::freq</a></div><div class="ttdeci">reg16 freq</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00074">wavefp.h:74</a></div></div>
<div class="ttc" id="anamespacere_s_i_dfp_html_a279cdbe0bde3f92e5d9e8bc990760665"><div class="ttname"><a href="namespacere_s_i_dfp.html#a279cdbe0bde3f92e5d9e8bc990760665">reSIDfp::config</a></div><div class="ttdeci">const CombinedWaveformConfig config[2][4]</div><div class="ttdef"><b>Definition:</b> <a href="_waveform_calculator_8cpp_source.html#l00046">WaveformCalculator.cpp:46</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a7d0cf64e99ba7d320528da9351a7a379"><div class="ttname"><a href="class_waveform_generator_f_p.html#a7d0cf64e99ba7d320528da9351a7a379">WaveformGeneratorFP::set_chip_model</a></div><div class="ttdeci">void set_chip_model(chip_model model)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00211">wavefp.cpp:211</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a62fb5a06410b4c556aa931b88bfb1523"><div class="ttname"><a href="class_waveform_generator_f_p.html#a62fb5a06410b4c556aa931b88bfb1523">WaveformGeneratorFP::waveform</a></div><div class="ttdeci">reg8 waveform</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00080">wavefp.h:80</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_af170643c424abdffd008aa66de646da4"><div class="ttname"><a href="class_waveform_generator_f_p.html#af170643c424abdffd008aa66de646da4">WaveformGeneratorFP::writePW_HI</a></div><div class="ttdeci">void writePW_HI(reg8 value)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00236">wavefp.cpp:236</a></div></div>
<div class="ttc" id="asidfp_8h_html"><div class="ttname"><a href="sidfp_8h.html">sidfp.h</a></div></div>
<div class="ttc" id="acubase64__2correlate_waveforms_8m_html_a633de4b0c14ca52ea2432a3c8a5c4c31"><div class="ttname"><a href="cubase64__2correlate_waveforms_8m.html#a633de4b0c14ca52ea2432a3c8a5c4c31">f</a></div><div class="ttdeci">f</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__2correlate_waveforms_8m_source.html#l00104">cubase64_2correlateWaveforms.m:104</a></div></div>
<div class="ttc" id="astructwaveformconfig__t_html"><div class="ttname"><a href="structwaveformconfig__t.html">waveformconfig_t</a></div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00023">wavefp.cpp:23</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_ab0581f55aa80be209c0d39c879c7cb8b"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#ab0581f55aa80be209c0d39c879c7cb8b">reg24</a></div><div class="ttdeci">unsigned int reg24</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00043">siddefs.h:43</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a75f99e1258d50738fba611b5dac5d19f"><div class="ttname"><a href="class_waveform_generator_f_p.html#a75f99e1258d50738fba611b5dac5d19f">WaveformGeneratorFP::ring_mod</a></div><div class="ttdeci">bool ring_mod</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00083">wavefp.h:83</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a8b37770414e868331d3cc265d4c08bcdafc04655d0aa5bb12f49e4c713c28a6d8"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcdafc04655d0aa5bb12f49e4c713c28a6d8">MOS6581</a></div><div class="ttdeci">@ MOS6581</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00050">siddefs.h:50</a></div></div>
<div class="ttc" id="aclass_s_i_d_f_p_html_a5143eaf982cebd6eea361adbdf20d068"><div class="ttname"><a href="class_s_i_d_f_p.html#a5143eaf982cebd6eea361adbdf20d068">SIDFP::kinked_dac</a></div><div class="ttdeci">static float kinked_dac(const int x, const float nonlinearity, const int bits)</div><div class="ttdef"><b>Definition:</b> <a href="sidfp_8cpp_source.html#l00043">sidfp.cpp:43</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_ac5a70f2cb36cf2f625434b7070405182"><div class="ttname"><a href="class_waveform_generator_f_p.html#ac5a70f2cb36cf2f625434b7070405182">WaveformGeneratorFP::writeFREQ_HI</a></div><div class="ttdeci">void writeFREQ_HI(reg8 value)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00226">wavefp.cpp:226</a></div></div>
<div class="ttc" id="astructwaveformconfig__t_html_a06f14a9abd47b91465f895d5259cdc1b"><div class="ttname"><a href="structwaveformconfig__t.html#a06f14a9abd47b91465f895d5259cdc1b">waveformconfig_t::distance</a></div><div class="ttdeci">float distance</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00027">wavefp.cpp:27</a></div></div>
<div class="ttc" id="awavefp_8cpp_html_a458d3018ed97450f11fada763b5ff3f9"><div class="ttname"><a href="wavefp_8cpp.html#a458d3018ed97450f11fada763b5ff3f9">wfconfig</a></div><div class="ttdeci">const waveformconfig_t wfconfig[2][5]</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00032">wavefp.cpp:32</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a62127fe720d7dc116a9fde87436d7424"><div class="ttname"><a href="class_waveform_generator_f_p.html#a62127fe720d7dc116a9fde87436d7424">WaveformGeneratorFP::readOSC</a></div><div class="ttdeci">reg8 readOSC(WaveformGeneratorFP &amp;source)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00273">wavefp.cpp:273</a></div></div>
<div class="ttc" id="astructwaveformconfig__t_html_ab881305da614121cd59b58172248c151"><div class="ttname"><a href="structwaveformconfig__t.html#ab881305da614121cd59b58172248c151">waveformconfig_t::bias</a></div><div class="ttdeci">float bias</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00024">wavefp.cpp:24</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_af5bad216eac9aefc703a450d3163e542"><div class="ttname"><a href="class_waveform_generator_f_p.html#af5bad216eac9aefc703a450d3163e542">WaveformGeneratorFP::sync</a></div><div class="ttdeci">bool sync</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00083">wavefp.h:83</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_ade0baaa5b262c9e6e7a5444885439701"><div class="ttname"><a href="class_waveform_generator_f_p.html#ade0baaa5b262c9e6e7a5444885439701">WaveformGeneratorFP::rebuild_wftable</a></div><div class="ttdeci">void rebuild_wftable()</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00059">wavefp.cpp:59</a></div></div>
<div class="ttc" id="amidi__mapper_8h_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="midi__mapper_8h_source.html#l00059">midi_mapper.h:59</a></div></div>
<div class="ttc" id="astructre_s_i_dfp_1_1_combined_waveform_config_html_ab881305da614121cd59b58172248c151"><div class="ttname"><a href="structre_s_i_dfp_1_1_combined_waveform_config.html#ab881305da614121cd59b58172248c151">reSIDfp::CombinedWaveformConfig::bias</a></div><div class="ttdeci">float bias</div><div class="ttdef"><b>Definition:</b> <a href="_waveform_calculator_8h_source.html#l00039">WaveformCalculator.h:39</a></div></div>
<div class="ttc" id="astructwaveformconfig__t_html_a52b13018ba83315db14cd1289db5d4a6"><div class="ttname"><a href="structwaveformconfig__t.html#a52b13018ba83315db14cd1289db5d4a6">waveformconfig_t::pulsestrength</a></div><div class="ttdeci">float pulsestrength</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00025">wavefp.cpp:25</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a230c5bb9e99122a53cbc3e10c8236aea"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a230c5bb9e99122a53cbc3e10c8236aea">reg4</a></div><div class="ttdeci">unsigned int reg4</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00039">siddefs.h:39</a></div></div>
<div class="ttc" id="astructre_s_i_dfp_1_1_combined_waveform_config_html_a25fe433a5901595bb969aea07746a16b"><div class="ttname"><a href="structre_s_i_dfp_1_1_combined_waveform_config.html#a25fe433a5901595bb969aea07746a16b">reSIDfp::CombinedWaveformConfig::topbit</a></div><div class="ttdeci">float topbit</div><div class="ttdef"><b>Definition:</b> <a href="_waveform_calculator_8h_source.html#l00041">WaveformCalculator.h:41</a></div></div>
<div class="ttc" id="astructwaveformconfig__t_html_a3440fd6a60ecf1f9b738049560602188"><div class="ttname"><a href="structwaveformconfig__t.html#a3440fd6a60ecf1f9b738049560602188">waveformconfig_t::stmix</a></div><div class="ttdeci">float stmix</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00028">wavefp.cpp:28</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00246">cubase64_1analyzePitch.m:246</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a0fdf53c7d3c2abe79f532d0eda473c69"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a0fdf53c7d3c2abe79f532d0eda473c69">reg32</a></div><div class="ttdeci">unsigned int reg32</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00044">siddefs.h:44</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_ad20897c5c8bd47f5d4005989bead0e55"><div class="ttname"><a href="class_waveform_generator_f_p.html#ad20897c5c8bd47f5d4005989bead0e55">WaveformGeneratorFP::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00344">wavefp.cpp:344</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_ad7fd39cd968c80e8ead7afe970020c90"><div class="ttname"><a href="class_waveform_generator_f_p.html#ad7fd39cd968c80e8ead7afe970020c90">WaveformGeneratorFP::previous_dac</a></div><div class="ttdeci">float previous_dac</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8h_source.html#l00089">wavefp.h:89</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a679de489ee841d255035e28723657722"><div class="ttname"><a href="class_waveform_generator_f_p.html#a679de489ee841d255035e28723657722">WaveformGeneratorFP::writePW_LO</a></div><div class="ttdeci">void writePW_LO(reg8 value)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00231">wavefp.cpp:231</a></div></div>
<div class="ttc" id="aclass_waveform_generator_f_p_html_a722e0427c41955bf84f6ff5990dd836b"><div class="ttname"><a href="class_waveform_generator_f_p.html#a722e0427c41955bf84f6ff5990dd836b">WaveformGeneratorFP::clock_noise</a></div><div class="ttdeci">void clock_noise(const bool clock)</div><div class="ttdef"><b>Definition:</b> <a href="wavefp_8cpp_source.html#l00303">wavefp.cpp:303</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1438cc8c1a18e5b5e27392fc9c1a8795.html">musictools</a></li><li class="navelem"><a class="el" href="dir_17e68d802e3e325e8707ae00f20adaca.html">GoatTracker_2.75</a></li><li class="navelem"><a class="el" href="dir_20f75f6c12e12f9fba9c33b39b534248.html">goattrk2</a></li><li class="navelem"><a class="el" href="dir_84b122b346a7317a1a20c0062e2c14ca.html">src</a></li><li class="navelem"><a class="el" href="dir_e3c337e58cbbd6ccca47472dc6d4d2ad.html">resid-fp</a></li><li class="navelem"><a class="el" href="wavefp_8cpp.html">wavefp.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
