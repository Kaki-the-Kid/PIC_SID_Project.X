<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIC SID Project: musictools/GoatTracker_2.75/goattrk2/src/resid/sid.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIC SID Project
   &#160;<span id="projectnumber">prototype</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sid.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//  ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//  This file is part of reSID, a MOS6581 SID emulator engine.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//  Copyright (C) 2004  Dag Lem &lt;resid@nimrod.no&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//  This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//  it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//  the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//  (at your option) any later version.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//  This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//  but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//  GNU General Public License for more details.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//  You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//  along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//  ---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h.html">sid.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// Resampling constants.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// The error in interpolated lookup is bounded by 1.234/L^2,</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// while the error in non-interpolated lookup is bounded by</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// 0.7854/L + 0.4113/L^2, see</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// http://www-ccrma.stanford.edu/~jos/resample/Choice_Table_Size.html</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// For a resolution of 16 bits this yields L &gt;= 285 and L &gt;= 51473,</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// respectively.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a2f727e2766e29e74e4b7d1b3e397df61">   30</a></span>&#160;<span class="preprocessor">#define FIR_N 125</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a5ac3cfb508eaa9955d3983d7c05e43aa">   31</a></span>&#160;<span class="preprocessor">#define FIR_RES_INTERPOLATE 285</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#aa632c5e2160874b997395ca3b0186cf0">   32</a></span>&#160;<span class="preprocessor">#define FIR_RES_FAST 51473</span></div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#afffa15931cbca99378d2e4673add646d">   33</a></span>&#160;<span class="preprocessor">#define FIR_SHIFT 15</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">   34</a></span>&#160;<span class="preprocessor">#define RINGSIZE 16384</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// Fixpoint constants (16.16 bits).</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">   37</a></span>&#160;<span class="preprocessor">#define FIXP_SHIFT 16</span></div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#ab94ff938b9ed512025134e35d194d011">   38</a></span>&#160;<span class="preprocessor">#define FIXP_MASK 0xffff</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">// Constructor.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a07389ddeb24af85890976d122b9f3870">   43</a></span>&#160;<a class="code" href="class_s_i_d.html#a07389ddeb24af85890976d122b9f3870">SID::SID</a>()</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;{</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// Initialize pointers.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a> = 0;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_voice.html#a3107c6016125b0e5d69d2f6281931153">set_sync_source</a>(&amp;<a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2]);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#a3107c6016125b0e5d69d2f6281931153">set_sync_source</a>(&amp;<a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0]);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a3107c6016125b0e5d69d2f6281931153">set_sync_source</a>(&amp;<a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1]);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="class_s_i_d.html#acf53270393a1e0aaeb5ab924dbb12d79">set_sampling_parameters</a>(985248, <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0a32b98b4aed7e5b96af005e4b8d001b9b">SAMPLE_FAST</a>, 44100);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a> = 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> = 0;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="class_s_i_d.html#a15fe397b04a015239924785f5d0c907a">ext_in</a> = 0;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">// Destructor.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="class_s_i_d.html#ad1891dec1e5d0715c8a82a6165f76ca7">   65</a></span>&#160;<a class="code" href="class_s_i_d.html#ad1891dec1e5d0715c8a82a6165f76ca7">SID::~SID</a>()</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keyword">delete</span>[] <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keyword">delete</span>[] <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// Set chip model.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a7d0cf64e99ba7d320528da9351a7a379">   75</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#a7d0cf64e99ba7d320528da9351a7a379">SID::set_chip_model</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcd">chip_model</a> model)</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a7d0cf64e99ba7d320528da9351a7a379">set_chip_model</a>(model);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a7d0cf64e99ba7d320528da9351a7a379">set_chip_model</a>(model);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="class_s_i_d.html#a027bb66729611ac59f3d5f81d9751ea0">extfilt</a>.<a class="code" href="class_external_filter.html#a7d0cf64e99ba7d320528da9351a7a379">set_chip_model</a>(model);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">// SID reset.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="class_s_i_d.html#ad20897c5c8bd47f5d4005989bead0e55">   89</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#ad20897c5c8bd47f5d4005989bead0e55">SID::reset</a>()</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="class_s_i_d.html#a027bb66729611ac59f3d5f81d9751ea0">extfilt</a>.<a class="code" href="class_external_filter.html#ad20897c5c8bd47f5d4005989bead0e55">reset</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a> = 0;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> = 0;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">// Write 16-bit sample to audio input.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">// NB! The caller is responsible for keeping the value within 16 bits.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// Note that to mix in an external audio signal, the signal should be</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// resampled to 1MHz first to avoid sampling noise.</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="class_s_i_d.html#aad1fee63f4848ae839246b1af23b8268">  108</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#aad1fee63f4848ae839246b1af23b8268">SID::input</a>(<span class="keywordtype">int</span> <a class="code" href="chipchip_8c.html#af07147e3e498f1cc010dc6472a61f1f6">sample</a>)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// Voice outputs are 20 bits. Scale up to match three voices in order</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// to facilitate simulation of the MOS8580 &quot;digi boost&quot; hardware hack.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="class_s_i_d.html#a15fe397b04a015239924785f5d0c907a">ext_in</a> = (<a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> &lt;&lt; 4)*3;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">// Read sample from audio output.</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// Both 16-bit and n-bit output is provided.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">  119</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">SID::output</a>()</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;{</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a185b809d013177456ca59a424de13c28">range</a> = 1 &lt;&lt; 16;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> half = <a class="code" href="cubase64__1analyze_pitch_8m.html#a185b809d013177456ca59a424de13c28">range</a> &gt;&gt; 1;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> = <a class="code" href="class_s_i_d.html#a027bb66729611ac59f3d5f81d9751ea0">extfilt</a>.<a class="code" href="class_external_filter.html#aee7ec0e25a37c6a2321b68c631a8b332">output</a>()/((4095*255 &gt;&gt; 7)*3*15*2/<a class="code" href="cubase64__1analyze_pitch_8m.html#a185b809d013177456ca59a424de13c28">range</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> &gt;= half) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">return</span> half - 1;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> &lt; -half) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> -half;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a5489465f924a8f9ce4136db7e8027979">  133</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">SID::output</a>(<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a4768c84e70f55a2e17ad2e5c9613881a">bits</a>)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a185b809d013177456ca59a424de13c28">range</a> = 1 &lt;&lt; <a class="code" href="cubase64__1analyze_pitch_8m.html#a4768c84e70f55a2e17ad2e5c9613881a">bits</a>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> half = <a class="code" href="cubase64__1analyze_pitch_8m.html#a185b809d013177456ca59a424de13c28">range</a> &gt;&gt; 1;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> = <a class="code" href="class_s_i_d.html#a027bb66729611ac59f3d5f81d9751ea0">extfilt</a>.<a class="code" href="class_external_filter.html#aee7ec0e25a37c6a2321b68c631a8b332">output</a>()/((4095*255 &gt;&gt; 7)*3*15*2/<a class="code" href="cubase64__1analyze_pitch_8m.html#a185b809d013177456ca59a424de13c28">range</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> &gt;= half) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> half - 1;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> &lt; -half) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> -half;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;}</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">// Read registers.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">// Reading a write only register returns the last byte written to any SID</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">// register. The individual bits in this value start to fade down towards</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">// zero after a few cycles. All bits reach zero within approximately</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">// $2000 - $4000 cycles.</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">// It has been claimed that this fading happens in an orderly fashion, however</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">// sampling of write only registers reveals that this is not the case.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">// NB! This is not correctly modeled.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">// The actual use of write only registers has largely been made in the belief</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">// that all SID registers are readable. To support this belief the read</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">// would have to be done immediately after a write to the same register</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">// (remember that an intermediate write to another register would yield that</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">// value instead). With this in mind we return the last value written to</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">// any SID register for $2000 cycles without modeling the bit fading.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="class_s_i_d.html#ac79f303105acc55d9597a7014d8a26e1">  165</a></span>&#160;<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> <a class="code" href="class_s_i_d.html#ac79f303105acc55d9597a7014d8a26e1">SID::read</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> <a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a>)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a>) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">case</span> 0x19:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a297255fa8525347249bf898121219d2f">potx</a>.<a class="code" href="class_potentiometer.html#afad15229939e330518aa81f45cd3d518">readPOT</a>();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">case</span> 0x1a:</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a7fb58163fedb28d871058fcd1bcc9c8e">poty</a>.<a class="code" href="class_potentiometer.html#afad15229939e330518aa81f45cd3d518">readPOT</a>();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">case</span> 0x1b:</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a30bfff3b299217694b026a259e058b7e">readOSC</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">case</span> 0x1c:</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a42db6c4b71f51dd3f006f296ff2b2fd2">readENV</a>();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">// Write registers.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a8c1ccef3d45c31f0259717e4a77e4b78">  185</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#a8c1ccef3d45c31f0259717e4a77e4b78">SID::write</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> <a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a>, <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a> <a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a> = <a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> = 0x2000;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a>) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">case</span> 0x00:</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#acd6d2f4cb8be9e37f096923c44f33637">writeFREQ_LO</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">case</span> 0x01:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a65b09609ec0c8e86a8de72f518938dd6">writeFREQ_HI</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordflow">case</span> 0x02:</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#ac9f02802ae0c3013b4b39d85436641d4">writePW_LO</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">case</span> 0x03:</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a0af43b6b6735d78f8e0ad3fecef20a77">writePW_HI</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">case</span> 0x04:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_voice.html#a4ffdee30d142e2595e040deaa2ff3a5a">writeCONTROL_REG</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">case</span> 0x05:</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#afeabd12b164c3ed7bb215d3be46bb94b">writeATTACK_DECAY</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keywordflow">case</span> 0x06:</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#adc4b822fb503209d0f5d113331cd9821">writeSUSTAIN_RELEASE</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">case</span> 0x07:</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#acd6d2f4cb8be9e37f096923c44f33637">writeFREQ_LO</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">case</span> 0x08:</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a65b09609ec0c8e86a8de72f518938dd6">writeFREQ_HI</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">case</span> 0x09:</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#ac9f02802ae0c3013b4b39d85436641d4">writePW_LO</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">case</span> 0x0a:</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a0af43b6b6735d78f8e0ad3fecef20a77">writePW_HI</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">case</span> 0x0b:</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#a4ffdee30d142e2595e040deaa2ff3a5a">writeCONTROL_REG</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">case</span> 0x0c:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#afeabd12b164c3ed7bb215d3be46bb94b">writeATTACK_DECAY</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">case</span> 0x0d:</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#adc4b822fb503209d0f5d113331cd9821">writeSUSTAIN_RELEASE</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">case</span> 0x0e:</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#acd6d2f4cb8be9e37f096923c44f33637">writeFREQ_LO</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">case</span> 0x0f:</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a65b09609ec0c8e86a8de72f518938dd6">writeFREQ_HI</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">case</span> 0x10:</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#ac9f02802ae0c3013b4b39d85436641d4">writePW_LO</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordflow">case</span> 0x11:</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a0af43b6b6735d78f8e0ad3fecef20a77">writePW_HI</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">case</span> 0x12:</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a4ffdee30d142e2595e040deaa2ff3a5a">writeCONTROL_REG</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">case</span> 0x13:</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#afeabd12b164c3ed7bb215d3be46bb94b">writeATTACK_DECAY</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">case</span> 0x14:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#adc4b822fb503209d0f5d113331cd9821">writeSUSTAIN_RELEASE</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">case</span> 0x15:</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a3cd4b0322d027edc7817f4148a63afd0">writeFC_LO</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">case</span> 0x16:</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#adc5db42a67714673638b6680e729a1aa">writeFC_HI</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordflow">case</span> 0x17:</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a936b207fda074a84f9b990e0e0ddaccd">writeRES_FILT</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">case</span> 0x18:</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a4a7204d2d82c410541ce5a0da9c6bd26">writeMODE_VOL</a>(<a class="code" href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a>);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">// Constructor.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="class_s_i_d_1_1_state.html#a790355057d12e9c1ce7643551c16fecd">  275</a></span>&#160;<a class="code" href="class_s_i_d_1_1_state.html#a790355057d12e9c1ce7643551c16fecd">SID::State::State</a>()</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;{</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 0x20; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="class_s_i_d_1_1_state.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a> = 0;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="class_s_i_d_1_1_state.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> = 0;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a027fd2e502e93b85d74e8bc663d6804b">accumulator</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a166537d20e9a0e2fc7f912bdcfe5b6d6">shift_register</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0x7ffff8;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a908bbf63c6595c87bae81e5c96e7aff8">rate_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a78192cbf9f830adb2eab6e5a08724e6e">rate_counter_period</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 9;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a7af526a69bf507ba923641fc7a7e3b79">exponential_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a1c37cf144c297249161f5ad091707acb">exponential_counter_period</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 1;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a92be1335633e8c73863f6f4ab5f374b9">envelope_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = 0;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#af26fa1dcc386cff88619d8da14708785">envelope_state</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_envelope_generator.html#a5d74787dedbc4e11c1ab15bf487e61f8ad590443978dc58d64aed5001f56efcdf">EnvelopeGenerator::RELEASE</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="class_s_i_d_1_1_state.html#a5689410bb7ea5efc10bb7b13c8055f28">hold_zero</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">// Read state.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a581d76c617e790a29babf6647fa82393">  303</a></span>&#160;<a class="code" href="class_s_i_d_1_1_state.html">SID::State</a> <a class="code" href="class_s_i_d.html#a581d76c617e790a29babf6647fa82393">SID::read_state</a>()</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <a class="code" href="class_s_i_d_1_1_state.html">State</a> state;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, j;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0, j = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++, j += 7) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="class_waveform_generator.html">WaveformGenerator</a>&amp; <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a> = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="class_envelope_generator.html">EnvelopeGenerator</a>&amp; envelope = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j + 0] = <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.freq &amp; 0xff;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j + 1] = <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.freq &gt;&gt; 8;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j + 2] = <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.pw &amp; 0xff;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j + 3] = <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.pw &gt;&gt; 8;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j + 4] =</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      (<a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.waveform &lt;&lt; 4)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      | (<a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.test ? 0x08 : 0)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      | (<a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.ring_mod ? 0x04 : 0)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      | (<a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.sync ? 0x02 : 0)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      | (envelope.<a class="code" href="class_envelope_generator.html#ada51c77311410abd073c2756b9836e83">gate</a> ? 0x01 : 0);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j + 5] = (envelope.<a class="code" href="class_envelope_generator.html#a9521010d32cb75f4a89841ecb232b805">attack</a> &lt;&lt; 4) | envelope.<a class="code" href="class_envelope_generator.html#a979f0b900c6ca42a2b438fdbf84a71a0">decay</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j + 6] = (envelope.<a class="code" href="class_envelope_generator.html#af6f0c3073af27fd60cf5645f82cf367d">sustain</a> &lt;&lt; 4) | envelope.<a class="code" href="class_envelope_generator.html#aa44ceb2a85a82d0d56611d29fb85040b">release</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j++] = <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a> &amp; 0x007;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j++] = <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#aff03d94064cbb87157a8edd210ee4a75">fc</a> &gt;&gt; 3;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j++] = (<a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a8a4a24fe2316961996ebd0d5d6fe7590">res</a> &lt;&lt; 4) | <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a1403960468bd91d6ece759e92d35e904">filt</a>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j++] =</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    (<a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a746387c5fdbf186ab048cb0b617cedec">voice3off</a> ? 0x80 : 0)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    | (<a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a766cc0a81087bd71844f6e38fdc75f83">hp_bp_lp</a> &lt;&lt; 4)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    | <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a0984f19c378829eb6e8a75bfb10e27df">vol</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// These registers are superfluous, but included for completeness.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <a class="code" href="cubase64__3simple_playback_8m.html#ada3ed9e62ea0d1ae79903083ccfe54c6">for</a> (; j &lt; 0x1d; j++) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j] = <a class="code" href="class_s_i_d.html#ac79f303105acc55d9597a7014d8a26e1">read</a>(j);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordflow">for</span> (; j &lt; 0x20; j++) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[j] = 0;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  state.<a class="code" href="class_s_i_d_1_1_state.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a> = <a class="code" href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a>;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  state.<a class="code" href="class_s_i_d_1_1_state.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> = <a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a027fd2e502e93b85d74e8bc663d6804b">accumulator</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a166537d20e9a0e2fc7f912bdcfe5b6d6">shift_register</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a908bbf63c6595c87bae81e5c96e7aff8">rate_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a353fabb6c435e97002c1e8936ef67c6c">rate_counter</a>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a78192cbf9f830adb2eab6e5a08724e6e">rate_counter_period</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#af0917564fbbf43ab1ee49a0b5b46ff30">rate_period</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a7af526a69bf507ba923641fc7a7e3b79">exponential_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a0c9b44541a8bef8765e777312dcf3e86">exponential_counter</a>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a1c37cf144c297249161f5ad091707acb">exponential_counter_period</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#ae191d6bfb4766e9d51171b2eedfff683">exponential_counter_period</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a92be1335633e8c73863f6f4ab5f374b9">envelope_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a40e1ca5bc3f12ffc2d05b011c6ce8139">envelope_counter</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#af26fa1dcc386cff88619d8da14708785">envelope_state</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a876b486d3a5241a126bd5751c5f70f79">state</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    state.<a class="code" href="class_s_i_d_1_1_state.html#a5689410bb7ea5efc10bb7b13c8055f28">hold_zero</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>] = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a45867755dacd5d24d6f8c013de0cf138">hold_zero</a>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">return</span> state;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">// Write state.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="class_s_i_d.html#af5e83af1b259c21bedfaa42e7ac246a8">  363</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#af5e83af1b259c21bedfaa42e7ac246a8">SID::write_state</a>(<span class="keyword">const</span> <a class="code" href="class_s_i_d_1_1_state.html">State</a>&amp; state)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt;= 0x18; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <a class="code" href="class_s_i_d.html#a8c1ccef3d45c31f0259717e4a77e4b78">write</a>(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, state.<a class="code" href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">sid_register</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>]);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <a class="code" href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a889db961d737bd98db726c6fd3a00dd2">accumulator</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#a027fd2e502e93b85d74e8bc663d6804b">accumulator</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a92d711c22040a38dd032a4dd233b8eff">shift_register</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#a166537d20e9a0e2fc7f912bdcfe5b6d6">shift_register</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a353fabb6c435e97002c1e8936ef67c6c">rate_counter</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#a908bbf63c6595c87bae81e5c96e7aff8">rate_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#af0917564fbbf43ab1ee49a0b5b46ff30">rate_period</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#a78192cbf9f830adb2eab6e5a08724e6e">rate_counter_period</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a0c9b44541a8bef8765e777312dcf3e86">exponential_counter</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#a7af526a69bf507ba923641fc7a7e3b79">exponential_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#ae191d6bfb4766e9d51171b2eedfff683">exponential_counter_period</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#a1c37cf144c297249161f5ad091707acb">exponential_counter_period</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a40e1ca5bc3f12ffc2d05b011c6ce8139">envelope_counter</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#a92be1335633e8c73863f6f4ab5f374b9">envelope_counter</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a876b486d3a5241a126bd5751c5f70f79">state</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#af26fa1dcc386cff88619d8da14708785">envelope_state</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a45867755dacd5d24d6f8c013de0cf138">hold_zero</a> = state.<a class="code" href="class_s_i_d_1_1_state.html#a5689410bb7ea5efc10bb7b13c8055f28">hold_zero</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>];</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">// Enable filter.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a2b8b78e19e6472c88dcbc00f77de34b6">  391</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#a2b8b78e19e6472c88dcbc00f77de34b6">SID::enable_filter</a>(<span class="keywordtype">bool</span> enable)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a2b8b78e19e6472c88dcbc00f77de34b6">enable_filter</a>(enable);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">// Enable external filter.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="class_s_i_d.html#ab8e4ab7af63c7f294d8e71bf5153bf2e">  400</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#ab8e4ab7af63c7f294d8e71bf5153bf2e">SID::enable_external_filter</a>(<span class="keywordtype">bool</span> enable)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <a class="code" href="class_s_i_d.html#a027bb66729611ac59f3d5f81d9751ea0">extfilt</a>.<a class="code" href="class_external_filter.html#a2b8b78e19e6472c88dcbc00f77de34b6">enable_filter</a>(enable);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">// I0() computes the 0th order modified Bessel function of the first kind.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">// This function is originally from resample-1.5/filterkit.c by J. O. Smith.</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a6db3df3c11b08ba5f116229e283791e5">  410</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="class_s_i_d.html#a6db3df3c11b08ba5f116229e283791e5">SID::I0</a>(<span class="keywordtype">double</span> <a class="code" href="vector-demo_8c.html#a83a96667fb436e224e8501b7b9bc612c">x</a>)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// Max error acceptable in I0.</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> I0e = 1<a class="code" href="cubase64__5analyze_noise_8m.html#a30d3b8e44898693b3b5b95b32743e82b">e</a>-6;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="cubase64__2correlate_waveforms_8m.html#ae47e734ba8f84b7dceb313053f097ee5">sum</a>, u, halfx, temp;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="cubase64__2correlate_waveforms_8m.html#ae47e734ba8f84b7dceb313053f097ee5">sum</a> = u = <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> = 1;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  halfx = <a class="code" href="vector-demo_8c.html#a83a96667fb436e224e8501b7b9bc612c">x</a>/2.0;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    temp = halfx/<a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>++;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    u *= temp*temp;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <a class="code" href="cubase64__2correlate_waveforms_8m.html#ae47e734ba8f84b7dceb313053f097ee5">sum</a> += u;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  } <span class="keywordflow">while</span> (u &gt;= I0e*<a class="code" href="cubase64__2correlate_waveforms_8m.html#ae47e734ba8f84b7dceb313053f097ee5">sum</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="cubase64__2correlate_waveforms_8m.html#ae47e734ba8f84b7dceb313053f097ee5">sum</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">// Setting of SID sampling parameters.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">// Use a clock freqency of 985248Hz for PAL C64, 1022730Hz for NTSC C64.</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">// The default end of passband frequency is pass_freq = 0.9*sample_freq/2</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">// for sample frequencies up to ~ 44.1kHz, and 20kHz for higher sample</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">// frequencies.</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">// For resampling, the ratio between the clock frequency and the sample</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">// frequency is limited as follows:</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">//   125*clock_freq/sample_freq &lt; 16384</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">// E.g. provided a clock frequency of ~ 1MHz, the sample frequency can not</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">// be set lower than ~ 8kHz. A lower sample frequency would make the</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">// resampling code overfill its 16k sample ring buffer.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">// </span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">// The end of passband frequency is also limited:</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">//   pass_freq &lt;= 0.9*sample_freq/2</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">// E.g. for a 44.1kHz sampling rate the end of passband frequency is limited</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">// to slightly below 20kHz. This constraint ensures that the FIR table is</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">// not overfilled.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="class_s_i_d.html#acf53270393a1e0aaeb5ab924dbb12d79">  453</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_s_i_d.html#acf53270393a1e0aaeb5ab924dbb12d79">SID::set_sampling_parameters</a>(<span class="keywordtype">double</span> clock_freq, <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0">sampling_method</a> <a class="code" href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a59a31db1436d75d219a8e2d9b645b3e0">method</a>,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;          <span class="keywordtype">double</span> sample_freq, <span class="keywordtype">double</span> pass_freq,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;          <span class="keywordtype">double</span> filter_scale)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;{</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// Check resampling constraints.</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a59a31db1436d75d219a8e2d9b645b3e0">method</a> == <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0a3fe21597c3ecad715c9ec36c5becd8ae">SAMPLE_RESAMPLE_INTERPOLATE</a> || <a class="code" href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a59a31db1436d75d219a8e2d9b645b3e0">method</a> == <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0abcbb81353cbca0fb7e1b553a52b93429">SAMPLE_RESAMPLE_FAST</a>)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">// Check whether the sample ring buffer would overfill.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a2f727e2766e29e74e4b7d1b3e397df61">FIR_N</a>*clock_freq/sample_freq &gt;= <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>) {</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// The default passband limit is 0.9*sample_freq/2 for sample</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="comment">// frequencies below ~ 44.1kHz, and 20kHz for higher sample frequencies.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (pass_freq &lt; 0) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      pass_freq = 20000;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">if</span> (2*pass_freq/sample_freq &gt;= 0.9) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  pass_freq = 0.9*sample_freq/2;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// Check whether the FIR table would overfill.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pass_freq &gt; 0.9*sample_freq/2) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">// The filter scaling is only included to avoid clipping, so keep</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="comment">// it sane.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (filter_scale &lt; 0.9 || filter_scale &gt; 1.0) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <a class="code" href="class_s_i_d.html#a71587bb543f4eb3a9659da2bad8e2bfb">clock_frequency</a> = clock_freq;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="class_s_i_d.html#a6ca0b7cab1017cd3a0943384ccca5172">sampling</a> = <a class="code" href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a59a31db1436d75d219a8e2d9b645b3e0">method</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="class_s_i_d.html#ab4527333736df080d056ce72f492de9c">cycles_per_sample</a> =</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a>(clock_freq/sample_freq*(1 &lt;&lt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>) + 0.5);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> = 0;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="class_s_i_d.html#a4e33219250ef7622b467dd9ed9f71f41">sample_prev</a> = 0;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">// FIR initialization is only necessary for resampling.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a59a31db1436d75d219a8e2d9b645b3e0">method</a> != <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0a3fe21597c3ecad715c9ec36c5becd8ae">SAMPLE_RESAMPLE_INTERPOLATE</a> &amp;&amp; <a class="code" href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a59a31db1436d75d219a8e2d9b645b3e0">method</a> != <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0abcbb81353cbca0fb7e1b553a52b93429">SAMPLE_RESAMPLE_FAST</a>)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keyword">delete</span>[] <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keyword">delete</span>[] <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a> = 0;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> pi = 3.1415926535897932385;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="comment">// 16 bits -&gt; -96dB stopband attenuation.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="_p_s_i_d_8doc.html#a930f861689f227013a59e377911121a4">A</a> = -20*log10(1.0/(1 &lt;&lt; 16));</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="comment">// A fraction of the bandwidth is allocated to the transition band,</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordtype">double</span> dw = (1 - 2*pass_freq/sample_freq)*pi;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="comment">// The cutoff frequency is midway through the transition band.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keywordtype">double</span> wc = (2*pass_freq/sample_freq + 1)*pi/2;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// For calculation of beta and N see the reference for the kaiserord</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// function in the MATLAB Signal Processing Toolbox:</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// http://www.mathworks.com/access/helpdesk/help/toolbox/signal/kaiserord.html</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> beta = 0.1102*(<a class="code" href="_p_s_i_d_8doc.html#a930f861689f227013a59e377911121a4">A</a> - 8.7);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> I0beta = <a class="code" href="class_s_i_d.html#a6db3df3c11b08ba5f116229e283791e5">I0</a>(beta);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// The filter order will maximally be 124 with the current constraints.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// N &gt;= (96.33 - 7.95)/(2.285*0.1*pi) -&gt; N &gt;= 123</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// The filter order is equal to the number of zero crossings, i.e.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// it should be an even number (sinc is symmetric about x = 0).</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">int</span> N = int((<a class="code" href="_p_s_i_d_8doc.html#a930f861689f227013a59e377911121a4">A</a> - 7.95)/(2.285*dw) + 0.5);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  N += N &amp; 1;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordtype">double</span> f_samples_per_cycle = sample_freq/clock_freq;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordtype">double</span> f_cycles_per_sample = clock_freq/sample_freq;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">// The filter length is equal to the filter order + 1.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// The filter length must be an odd number (sinc is symmetric about x = 0).</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a> = int(N*f_cycles_per_sample) + 1;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a> |= 1;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// We clamp the filter table resolution to 2^n, making the fixpoint</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="comment">// sample_offset a whole multiple of the filter table resolution.</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structres.html">res</a> = <a class="code" href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a59a31db1436d75d219a8e2d9b645b3e0">method</a> == <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0a3fe21597c3ecad715c9ec36c5becd8ae">SAMPLE_RESAMPLE_INTERPOLATE</a> ?</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a5ac3cfb508eaa9955d3983d7c05e43aa">FIR_RES_INTERPOLATE</a> : <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#aa632c5e2160874b997395ca3b0186cf0">FIR_RES_FAST</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a> = (int)ceil(<a class="code" href="multidemo_8c.html#a45c862cc0ba3a2a26c325256e953d227">log</a>(<a class="code" href="structres.html">res</a>/f_cycles_per_sample)/<a class="code" href="multidemo_8c.html#a45c862cc0ba3a2a26c325256e953d227">log</a>(2));</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <a class="code" href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">fir_RES</a> = 1 &lt;&lt; <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160; </div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="comment">// Allocate memory for FIR tables.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keyword">delete</span>[] <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a> = <span class="keyword">new</span> <span class="keywordtype">short</span>[<a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>*<a class="code" href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">fir_RES</a>];</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160; </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="comment">// Calculate fir_RES FIR tables for linear interpolation.</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; <a class="code" href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">fir_RES</a>; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordtype">int</span> fir_offset = <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>*<a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a> + <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>/2;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordtype">double</span> j_offset = double(<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>)/<a class="code" href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">fir_RES</a>;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// Calculate FIR table. This is the sinc function, weighted by the</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// Kaiser window.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = -<a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>/2; j &lt;= <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>/2; j++) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordtype">double</span> jx = j - j_offset;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordtype">double</span> wt = wc*jx/f_cycles_per_sample;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordtype">double</span> temp = jx/(<a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>/2);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordtype">double</span> Kaiser =</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  fabs(temp) &lt;= 1 ? <a class="code" href="class_s_i_d.html#a6db3df3c11b08ba5f116229e283791e5">I0</a>(beta*sqrt(1 - temp*temp))/I0beta : 0;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordtype">double</span> sincwt =</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  fabs(wt) &gt;= 1<a class="code" href="cubase64__5analyze_noise_8m.html#a30d3b8e44898693b3b5b95b32743e82b">e</a>-6 ? sin(wt)/wt : 1;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordtype">double</span> val =</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  (1 &lt;&lt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#afffa15931cbca99378d2e4673add646d">FIR_SHIFT</a>)*filter_scale*f_samples_per_cycle*wc/pi*sincwt*Kaiser;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a>[fir_offset + j] = <a class="code" href="readme__resid_8txt.html#a1cbedcc33990b77eae61c0e6ee8eaa7d">short</a>(val + 0.5);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <span class="comment">// Allocate sample buffer.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> = <span class="keyword">new</span> <span class="keywordtype">short</span>[<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>*2];</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="comment">// Clear sample buffer.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>*2; j++) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[j] = 0;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> = 0;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">// Adjustment of SID sampling frequency.</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">// In some applications, e.g. a C64 emulator, it can be desirable to</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">// synchronize sound with a timer source. This is supported by adjustment of</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">// the SID sampling frequency.</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">// NB! Adjustment of the sampling frequency may lead to noticeable shifts in</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">// frequency, and should only be used for interactive applications. Note also</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">// that any adjustment of the sampling frequency will change the</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">// characteristics of the resampling filter, since the filter is not rebuilt.</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a0420e2f810512163428cfc002752750f">  591</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#a0420e2f810512163428cfc002752750f">SID::adjust_sampling_frequency</a>(<span class="keywordtype">double</span> sample_freq)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;{</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="class_s_i_d.html#ab4527333736df080d056ce72f492de9c">cycles_per_sample</a> =</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a>(<a class="code" href="class_s_i_d.html#a71587bb543f4eb3a9659da2bad8e2bfb">clock_frequency</a>/sample_freq*(1 &lt;&lt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>) + 0.5);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">// Return array of default spline interpolation points to map FC to</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">// filter cutoff frequency.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="class_s_i_d.html#aacedf3c3033314167fc04764cdea18c6">  602</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#aacedf3c3033314167fc04764cdea18c6">SID::fc_default</a>(<span class="keyword">const</span> <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a5d176368c31e8c1507c63593ba63af7a">fc_point</a>*&amp; points, <span class="keywordtype">int</span>&amp; count)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;{</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#aacedf3c3033314167fc04764cdea18c6">fc_default</a>(points, count);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">// Return FC spline plotter object.</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00611"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a09b7847b95ded3e71742cf2f1962ec93">  611</a></span>&#160;<a class="code" href="class_point_plotter.html">PointPlotter&lt;sound_sample&gt;</a> <a class="code" href="class_s_i_d.html#a09b7847b95ded3e71742cf2f1962ec93">SID::fc_plotter</a>()</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;{</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a09b7847b95ded3e71742cf2f1962ec93">fc_plotter</a>();</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">// SID clocking - 1 cycle.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">  620</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">SID::clock</a>()</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;{</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// Age bus value.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">if</span> (--<a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> &lt;= 0) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a> = 0;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> = 0;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// Clock amplitude modulators.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a1e5a1558db01f79a8874591bad4ea905">clock</a>();</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// Clock oscillators.</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a1e5a1558db01f79a8874591bad4ea905">clock</a>();</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">// Synchronize oscillators.</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a372886f4e3db5f5a0fcdeeb18ebbfa41">synchronize</a>();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="comment">// Clock filter.</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a8e50429a169f4dcf78d0e1d8414c510a">clock</a>(<a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>(), <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>(), <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>(), <a class="code" href="class_s_i_d.html#a15fe397b04a015239924785f5d0c907a">ext_in</a>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="comment">// Clock external filter.</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <a class="code" href="class_s_i_d.html#a027bb66729611ac59f3d5f81d9751ea0">extfilt</a>.<a class="code" href="class_external_filter.html#a829bb5f1c730a69633278e519f7f56fd">clock</a>(<a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#aee7ec0e25a37c6a2321b68c631a8b332">output</a>());</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">// SID clocking - delta_t cycles.</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00656"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a6a6ed2cbdb2a06f6305d751425fd3ba2">  656</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">SID::clock</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> delta_t)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;{</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160; </div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">if</span> (delta_t &lt;= 0) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// Age bus value.</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> -= delta_t;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> &lt;= 0) {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">bus_value</a> = 0;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">bus_value_ttl</a> = 0;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// Clock amplitude modulators.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">envelope</a>.<a class="code" href="class_envelope_generator.html#a1e5a1558db01f79a8874591bad4ea905">clock</a>(delta_t);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// Clock and synchronize oscillators.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">// Loop until we reach the current cycle.</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> delta_t_osc = delta_t;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keywordflow">while</span> (delta_t_osc) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> delta_t_min = delta_t_osc;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="comment">// Find minimum number of cycles to an oscillator accumulator MSB toggle.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">// We have to clock on each MSB on / MSB off for hard sync to operate</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// correctly.</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="class_waveform_generator.html">WaveformGenerator</a>&amp; <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a> = <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="comment">// It is only necessary to clock on the MSB of an oscillator that is</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">// a sync source and has freq != 0.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">if</span> (!(<a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.sync_dest-&gt;sync &amp;&amp; <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.freq)) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a0910932fa0f3640b8008f47a91262e9a">reg16</a> freq = <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.freq;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#ab0581f55aa80be209c0d39c879c7cb8b">reg24</a> accumulator = <a class="code" href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a>.accumulator;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="comment">// Clock on MSB off if MSB is on, clock on MSB on if MSB is off.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#ab0581f55aa80be209c0d39c879c7cb8b">reg24</a> delta_accumulator =</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  (accumulator &amp; 0x800000 ? 0x1000000 : 0x800000) - accumulator;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160; </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> delta_t_next = delta_accumulator/freq;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordflow">if</span> (delta_accumulator%freq) {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  ++delta_t_next;</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">if</span> (delta_t_next &lt; delta_t_min) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  delta_t_min = delta_t_next;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="comment">// Clock oscillators.</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a1e5a1558db01f79a8874591bad4ea905">clock</a>(delta_t_min);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// Synchronize oscillators.</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; 3; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>].<a class="code" href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">wave</a>.<a class="code" href="class_waveform_generator.html#a372886f4e3db5f5a0fcdeeb18ebbfa41">synchronize</a>();</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    }</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    delta_t_osc -= delta_t_min;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// Clock filter.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#a8e50429a169f4dcf78d0e1d8414c510a">clock</a>(delta_t,</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;         <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[0].<a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>(), <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[1].<a class="code" href="class_voice.html#aee7ec0e25a37c6a2321b68c631a8b332">output</a>(), <a class="code" href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">voice</a>[2].<a class="code" href="class_voice.html#aee7ec0e25a37c6a2321b68c631a8b332">output</a>(), <a class="code" href="class_s_i_d.html#a15fe397b04a015239924785f5d0c907a">ext_in</a>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// Clock external filter.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <a class="code" href="class_s_i_d.html#a027bb66729611ac59f3d5f81d9751ea0">extfilt</a>.<a class="code" href="class_external_filter.html#a829bb5f1c730a69633278e519f7f56fd">clock</a>(delta_t, <a class="code" href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">filter</a>.<a class="code" href="class_filter.html#aee7ec0e25a37c6a2321b68c631a8b332">output</a>());</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">// SID clocking with audio sampling.</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">// Fixpoint arithmetics is used.</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">// The example below shows how to clock the SID a specified amount of cycles</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">// while producing audio output:</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">// while (delta_t) {</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">//   bufindex += sid.clock(delta_t, buf + bufindex, buflength - bufindex);</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">//   write(dsp, buf, bufindex*2);</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">//   bufindex = 0;</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">// }</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">// </span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00747"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a03de8f586f4428208c6dc9baa79bc03a">  747</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">SID::clock</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a>&amp; delta_t, <span class="keywordtype">short</span>* buf, <span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, <span class="keywordtype">int</span> interleave)</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;{</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="class_s_i_d.html#a6ca0b7cab1017cd3a0943384ccca5172">sampling</a>) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0a32b98b4aed7e5b96af005e4b8d001b9b">SAMPLE_FAST</a>:</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a603396a2059eaffb93f4395b704248a5">clock_fast</a>(delta_t, buf, <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, interleave);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0ae75f716a35c29a4396346d0475dad30b">SAMPLE_INTERPOLATE</a>:</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a29416b845331f5744ad80634bf1f8119">clock_interpolate</a>(delta_t, buf, <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, interleave);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0a3fe21597c3ecad715c9ec36c5becd8ae">SAMPLE_RESAMPLE_INTERPOLATE</a>:</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a576c3cb3e848a3d638a8cabcbb0c2f3f">clock_resample_interpolate</a>(delta_t, buf, <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, interleave);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0abcbb81353cbca0fb7e1b553a52b93429">SAMPLE_RESAMPLE_FAST</a>:</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_s_i_d.html#a8e32fb2594f9bbb5fdf0c2a81ea1fa51">clock_resample_fast</a>(delta_t, buf, <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>, interleave);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;}</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">// SID clocking with audio sampling - delta clocking picking nearest sample.</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#aba9a59fe000e7ef0d9c5efc0eefcf3ae">RESID_INLINE</a></div>
<div class="line"><a name="l00766"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a603396a2059eaffb93f4395b704248a5">  766</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a603396a2059eaffb93f4395b704248a5">SID::clock_fast</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a>&amp; delta_t, <span class="keywordtype">short</span>* buf, <span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>,</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="keywordtype">int</span> interleave)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;{</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a> = 0;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> next_sample_offset = <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> + <a class="code" href="class_s_i_d.html#ab4527333736df080d056ce72f492de9c">cycles_per_sample</a> + (1 &lt;&lt; (<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a> - 1));</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> delta_t_sample = next_sample_offset &gt;&gt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">if</span> (delta_t_sample &gt; delta_t) {</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a> &gt;= <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>(delta_t_sample);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    delta_t -= delta_t_sample;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> = (next_sample_offset &amp; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#ab94ff938b9ed512025134e35d194d011">FIXP_MASK</a>) - (1 &lt;&lt; (<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a> - 1));</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    buf[<a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>++*interleave] = <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>();</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  }</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>(delta_t);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> -= delta_t &lt;&lt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  delta_t = 0;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;}</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">// SID clocking with audio sampling - cycle based with linear sample</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">// interpolation.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">// Here the chip is clocked every cycle. This yields higher quality</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment">// sound since the samples are linearly interpolated, and since the</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">// external filter attenuates frequencies above 16kHz, thus reducing</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">// sampling noise.</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#aba9a59fe000e7ef0d9c5efc0eefcf3ae">RESID_INLINE</a></div>
<div class="line"><a name="l00803"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a29416b845331f5744ad80634bf1f8119">  803</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a29416b845331f5744ad80634bf1f8119">SID::clock_interpolate</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a>&amp; delta_t, <span class="keywordtype">short</span>* buf, <span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>,</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         <span class="keywordtype">int</span> interleave)</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;{</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a> = 0;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> next_sample_offset = <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> + <a class="code" href="class_s_i_d.html#ab4527333736df080d056ce72f492de9c">cycles_per_sample</a>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> delta_t_sample = next_sample_offset &gt;&gt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">if</span> (delta_t_sample &gt; delta_t) {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    }</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a> &gt;= <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    }</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; delta_t_sample - 1; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>();</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    }</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; delta_t_sample) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="class_s_i_d.html#a4e33219250ef7622b467dd9ed9f71f41">sample_prev</a> = <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    delta_t -= delta_t_sample;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> = next_sample_offset &amp; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#ab94ff938b9ed512025134e35d194d011">FIXP_MASK</a>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordtype">short</span> sample_now = <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    buf[<a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>++*interleave] =</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <a class="code" href="class_s_i_d.html#a4e33219250ef7622b467dd9ed9f71f41">sample_prev</a> + (<a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a>*(sample_now - <a class="code" href="class_s_i_d.html#a4e33219250ef7622b467dd9ed9f71f41">sample_prev</a>) &gt;&gt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="class_s_i_d.html#a4e33219250ef7622b467dd9ed9f71f41">sample_prev</a> = sample_now;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  }</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; delta_t - 1; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>();</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  }</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; delta_t) {</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <a class="code" href="class_s_i_d.html#a4e33219250ef7622b467dd9ed9f71f41">sample_prev</a> = <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>();</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> -= delta_t &lt;&lt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  delta_t = 0;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>;</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;}</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">// SID clocking with audio sampling - cycle based with audio resampling.</span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">// This is the theoretically correct (and computationally intensive) audio</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">// sample generation. The samples are generated by resampling to the specified</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">// sampling frequency. The work rate is inversely proportional to the</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">// percentage of the bandwidth allocated to the filter transition band.</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">// This implementation is based on the paper &quot;A Flexible Sampling-Rate</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;<span class="comment">// Conversion Method&quot;, by J. O. Smith and P. Gosset, or rather on the</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="comment">// expanded tutorial on the &quot;Digital Audio Resampling Home Page&quot;:</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="comment">// http://www-ccrma.stanford.edu/~jos/resample/</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="comment">// By building shifted FIR tables with samples according to the</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="comment">// sampling frequency, this implementation dramatically reduces the</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="comment">// computational effort in the filter convolutions, without any loss</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment">// of accuracy. The filter convolutions are also vectorizable on</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">// current hardware.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">// Further possible optimizations are:</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">// * An equiripple filter design could yield a lower filter order, see</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">//   http://www.mwrf.com/Articles/ArticleID/7229/7229.html</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">// * The Convolution Theorem could be used to bring the complexity of</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">//   convolution down from O(n*n) to O(n*log(n)) using the Fast Fourier</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">//   Transform, see http://en.wikipedia.org/wiki/Convolution_theorem</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">// * Simply resampling in two steps can also yield computational</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">//   savings, since the transition band will be wider in the first step</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">//   and the required filter order is thus lower in this step.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">//   Laurent Ganier has found the optimal intermediate sampling frequency</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">//   to be (via derivation of sum of two steps):</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">//     2 * pass_freq + sqrt [ 2 * pass_freq * orig_sample_freq</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">//       * (dest_sample_freq - 2 * pass_freq) / dest_sample_freq ]</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">// NB! the result of right shifting negative numbers is really</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">// implementation dependent in the C++ standard.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#aba9a59fe000e7ef0d9c5efc0eefcf3ae">RESID_INLINE</a></div>
<div class="line"><a name="l00885"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a576c3cb3e848a3d638a8cabcbb0c2f3f">  885</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a576c3cb3e848a3d638a8cabcbb0c2f3f">SID::clock_resample_interpolate</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a>&amp; delta_t, <span class="keywordtype">short</span>* buf, <span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>,</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            <span class="keywordtype">int</span> interleave)</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a> = 0;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> next_sample_offset = <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> + <a class="code" href="class_s_i_d.html#ab4527333736df080d056ce72f492de9c">cycles_per_sample</a>;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> delta_t_sample = next_sample_offset &gt;&gt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="keywordflow">if</span> (delta_t_sample &gt; delta_t) {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a> &gt;= <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; delta_t_sample; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a>] = <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> + <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>] = <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>();</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      ++<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a>;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> &amp;= 0x3fff;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    }</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    delta_t -= delta_t_sample;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> = next_sample_offset &amp; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#ab94ff938b9ed512025134e35d194d011">FIXP_MASK</a>;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keywordtype">int</span> fir_offset = <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a>*<a class="code" href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">fir_RES</a> &gt;&gt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordtype">int</span> fir_offset_rmd = <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a>*<a class="code" href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">fir_RES</a> &amp; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#ab94ff938b9ed512025134e35d194d011">FIXP_MASK</a>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">short</span>* fir_start = <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a> + fir_offset*<a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">short</span>* sample_start = <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> + <a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> - <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a> + <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// Convolution with filter impulse response.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordtype">int</span> v1 = 0;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>; j++) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      v1 += sample_start[j]*fir_start[j];</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    }</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="comment">// Use next FIR table, wrap around to first FIR table using</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">// previous sample.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">if</span> (++fir_offset == <a class="code" href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">fir_RES</a>) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      fir_offset = 0;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      --sample_start;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    fir_start = <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a> + fir_offset*<a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">// Convolution with filter impulse response.</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordtype">int</span> v2 = 0;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>; j++) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      v2 += sample_start[j]*fir_start[j];</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">// Linear interpolation.</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="comment">// fir_offset_rmd is equal for all samples, it can thus be factorized out:</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    <span class="comment">// sum(v1 + rmd*(v2 - v1)) = sum(v1) + rmd*(sum(v2) - sum(v1))</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <span class="keywordtype">int</span> v = v1 + (fir_offset_rmd*(v2 - v1) &gt;&gt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    v &gt;&gt;= <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#afffa15931cbca99378d2e4673add646d">FIR_SHIFT</a>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="comment">// Saturated arithmetics to guard against 16 bit sample overflow.</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> half = 1 &lt;&lt; 15;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">if</span> (v &gt;= half) {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      v = half - 1;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v &lt; -half) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      v = -half;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160; </div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    buf[<a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>++*interleave] = v;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  }</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; delta_t; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a>] = <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> + <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>] = <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>();</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    ++<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> &amp;= 0x3fff;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> -= delta_t &lt;&lt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  delta_t = 0;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;}</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">// SID clocking with audio sampling - cycle based with audio resampling.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">// ----------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#aba9a59fe000e7ef0d9c5efc0eefcf3ae">RESID_INLINE</a></div>
<div class="line"><a name="l00968"></a><span class="lineno"><a class="line" href="class_s_i_d.html#a8e32fb2594f9bbb5fdf0c2a81ea1fa51">  968</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="class_s_i_d.html#a8e32fb2594f9bbb5fdf0c2a81ea1fa51">SID::clock_resample_fast</a>(<a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a>&amp; delta_t, <span class="keywordtype">short</span>* buf, <span class="keywordtype">int</span> <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;           <span class="keywordtype">int</span> interleave)</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;{</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a> = 0;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> next_sample_offset = <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> + <a class="code" href="class_s_i_d.html#ab4527333736df080d056ce72f492de9c">cycles_per_sample</a>;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a> delta_t_sample = next_sample_offset &gt;&gt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="keywordflow">if</span> (delta_t_sample &gt; delta_t) {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    }</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a> &gt;= <a class="code" href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a>) {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; delta_t_sample; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>();</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a>] = <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> + <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>] = <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>();</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      ++<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a>;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> &amp;= 0x3fff;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    }</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    delta_t -= delta_t_sample;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> = next_sample_offset &amp; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#ab94ff938b9ed512025134e35d194d011">FIXP_MASK</a>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordtype">int</span> fir_offset = <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a>*<a class="code" href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">fir_RES</a> &gt;&gt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordtype">short</span>* fir_start = <a class="code" href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">fir</a> + fir_offset*<a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordtype">short</span>* sample_start = <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a> + <a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> - <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a> + <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="comment">// Convolution with filter impulse response.</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordtype">int</span> v = 0;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; <a class="code" href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">fir_N</a>; j++) {</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      v += sample_start[j]*fir_start[j];</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    }</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    v &gt;&gt;= <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#afffa15931cbca99378d2e4673add646d">FIR_SHIFT</a>;</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="comment">// Saturated arithmetics to guard against 16 bit sample overflow.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> half = 1 &lt;&lt; 15;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (v &gt;= half) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      v = half - 1;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    }</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v &lt; -half) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      v = -half;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    buf[<a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>++*interleave] = v;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> = 0; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a> &lt; delta_t; <a class="code" href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>++) {</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <a class="code" href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">clock</a>();</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a>] = <a class="code" href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">sample</a>[<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> + <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a>] = <a class="code" href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">output</a>();</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    ++<a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a>;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <a class="code" href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">sample_index</a> &amp;= 0x3fff;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <a class="code" href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">sample_offset</a> -= delta_t &lt;&lt; <a class="code" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  delta_t = 0;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_filter_html_a09b7847b95ded3e71742cf2f1962ec93"><div class="ttname"><a href="class_filter.html#a09b7847b95ded3e71742cf2f1962ec93">Filter::fc_plotter</a></div><div class="ttdeci">PointPlotter&lt; sound_sample &gt; fc_plotter()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00302">filter.cpp:302</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a0420e2f810512163428cfc002752750f"><div class="ttname"><a href="class_s_i_d.html#a0420e2f810512163428cfc002752750f">SID::adjust_sampling_frequency</a></div><div class="ttdeci">void adjust_sampling_frequency(double sample_freq)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00591">sid.cpp:591</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_aad1fee63f4848ae839246b1af23b8268"><div class="ttname"><a href="class_s_i_d.html#aad1fee63f4848ae839246b1af23b8268">SID::input</a></div><div class="ttdeci">void input(int sample)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00108">sid.cpp:108</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_ab29fa52815936b0b603bae7cf25eaf74"><div class="ttname"><a href="class_s_i_d_1_1_state.html#ab29fa52815936b0b603bae7cf25eaf74">SID::State::bus_value_ttl</a></div><div class="ttdeci">cycle_count bus_value_ttl</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00064">sid.h:64</a></div></div>
<div class="ttc" id="aclass_potentiometer_html_afad15229939e330518aa81f45cd3d518"><div class="ttname"><a href="class_potentiometer.html#afad15229939e330518aa81f45cd3d518">Potentiometer::readPOT</a></div><div class="ttdeci">reg8 readPOT()</div><div class="ttdef"><b>Definition:</b> <a href="pot_8cpp_source.html#l00022">pot.cpp:22</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a25ece2091d29d82ac7bdff9763e113b8"><div class="ttname"><a href="class_s_i_d.html#a25ece2091d29d82ac7bdff9763e113b8">SID::filter</a></div><div class="ttdeci">Filter filter</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00100">sid.h:100</a></div></div>
<div class="ttc" id="aclass_filter_html_adc5db42a67714673638b6680e729a1aa"><div class="ttname"><a href="class_filter.html#adc5db42a67714673638b6680e729a1aa">Filter::writeFC_HI</a></div><div class="ttdeci">void writeFC_HI(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00227">filter.cpp:227</a></div></div>
<div class="ttc" id="aclass_filter_html_a7d0cf64e99ba7d320528da9351a7a379"><div class="ttname"><a href="class_filter.html#a7d0cf64e99ba7d320528da9351a7a379">Filter::set_chip_model</a></div><div class="ttdeci">void set_chip_model(chip_model model)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00157">filter.cpp:157</a></div></div>
<div class="ttc" id="aclass_filter_html_aff03d94064cbb87157a8edd210ee4a75"><div class="ttname"><a href="class_filter.html#aff03d94064cbb87157a8edd210ee4a75">Filter::fc</a></div><div class="ttdeci">reg12 fc</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8h_source.html#l00159">filter.h:159</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a3e5fbb678ec2a5180c62b6d38b9bddf0"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0">sampling_method</a></div><div class="ttdeci">sampling_method</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00052">siddefs.h:52</a></div></div>
<div class="ttc" id="aclass_filter_html_a2b8b78e19e6472c88dcbc00f77de34b6"><div class="ttname"><a href="class_filter.html#a2b8b78e19e6472c88dcbc00f77de34b6">Filter::enable_filter</a></div><div class="ttdeci">void enable_filter(bool enable)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00148">filter.cpp:148</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a582457204864dd5f4ef02e7c9224602a"><div class="ttname"><a href="class_s_i_d.html#a582457204864dd5f4ef02e7c9224602a">SID::sample_offset</a></div><div class="ttdeci">cycle_count sample_offset</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00116">sid.h:116</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_ad1891dec1e5d0715c8a82a6165f76ca7"><div class="ttname"><a href="class_s_i_d.html#ad1891dec1e5d0715c8a82a6165f76ca7">SID::~SID</a></div><div class="ttdeci">~SID()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00065">sid.cpp:65</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_af5e83af1b259c21bedfaa42e7ac246a8"><div class="ttname"><a href="class_s_i_d.html#af5e83af1b259c21bedfaa42e7ac246a8">SID::write_state</a></div><div class="ttdeci">void write_state(const State &amp;state)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00363">sid.cpp:363</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_af26fa1dcc386cff88619d8da14708785"><div class="ttname"><a href="class_s_i_d_1_1_state.html#af26fa1dcc386cff88619d8da14708785">SID::State::envelope_state</a></div><div class="ttdeci">EnvelopeGenerator::State envelope_state[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00073">sid.h:73</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a576c3cb3e848a3d638a8cabcbb0c2f3f"><div class="ttname"><a href="class_s_i_d.html#a576c3cb3e848a3d638a8cabcbb0c2f3f">SID::clock_resample_interpolate</a></div><div class="ttdeci">RESID_INLINE int clock_resample_interpolate(cycle_count &amp;delta_t, short *buf, int n, int interleave)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00885">sid.cpp:885</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_ad20897c5c8bd47f5d4005989bead0e55"><div class="ttname"><a href="class_s_i_d.html#ad20897c5c8bd47f5d4005989bead0e55">SID::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00089">sid.cpp:89</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a07389ddeb24af85890976d122b9f3870"><div class="ttname"><a href="class_s_i_d.html#a07389ddeb24af85890976d122b9f3870">SID::SID</a></div><div class="ttdeci">SID()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00043">sid.cpp:43</a></div></div>
<div class="ttc" id="aclass_voice_html_a59f569ac4906d36e6ab2cb741c99f42b"><div class="ttname"><a href="class_voice.html#a59f569ac4906d36e6ab2cb741c99f42b">Voice::wave</a></div><div class="ttdeci">WaveformGenerator wave</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2voice_8h_source.html#l00043">voice.h:43</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a297255fa8525347249bf898121219d2f"><div class="ttname"><a href="class_s_i_d.html#a297255fa8525347249bf898121219d2f">SID::potx</a></div><div class="ttdeci">Potentiometer potx</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00102">sid.h:102</a></div></div>
<div class="ttc" id="aclass_voice_html_a0c598484aad6e730b227cabd790bdccf"><div class="ttname"><a href="class_voice.html#a0c598484aad6e730b227cabd790bdccf">Voice::envelope</a></div><div class="ttdeci">EnvelopeGenerator envelope</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2voice_8h_source.html#l00044">voice.h:44</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_af0917564fbbf43ab1ee49a0b5b46ff30"><div class="ttname"><a href="class_envelope_generator.html#af0917564fbbf43ab1ee49a0b5b46ff30">EnvelopeGenerator::rate_period</a></div><div class="ttdeci">reg16 rate_period</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00055">envelope.h:55</a></div></div>
<div class="ttc" id="aclass_filter_html_a746387c5fdbf186ab048cb0b617cedec"><div class="ttname"><a href="class_filter.html#a746387c5fdbf186ab048cb0b617cedec">Filter::voice3off</a></div><div class="ttdeci">reg8 voice3off</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8h_source.html#l00168">filter.h:168</a></div></div>
<div class="ttc" id="aclass_external_filter_html_ad20897c5c8bd47f5d4005989bead0e55"><div class="ttname"><a href="class_external_filter.html#ad20897c5c8bd47f5d4005989bead0e55">ExternalFilter::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="extfilt_8cpp_source.html#l00073">extfilt.cpp:73</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_html_a0ff6d080449124d52d868d9ce2ffe871"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a0ff6d080449124d52d868d9ce2ffe871">RINGSIZE</a></div><div class="ttdeci">#define RINGSIZE</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00034">sid.cpp:34</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a581d76c617e790a29babf6647fa82393"><div class="ttname"><a href="class_s_i_d.html#a581d76c617e790a29babf6647fa82393">SID::read_state</a></div><div class="ttdeci">State read_state()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00303">sid.cpp:303</a></div></div>
<div class="ttc" id="aclass_filter_html_aacedf3c3033314167fc04764cdea18c6"><div class="ttname"><a href="class_filter.html#aacedf3c3033314167fc04764cdea18c6">Filter::fc_default</a></div><div class="ttdeci">void fc_default(const fc_point *&amp;points, int &amp;count)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00288">filter.cpp:288</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a3e5fbb678ec2a5180c62b6d38b9bddf0abcbb81353cbca0fb7e1b553a52b93429"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0abcbb81353cbca0fb7e1b553a52b93429">SAMPLE_RESAMPLE_FAST</a></div><div class="ttdeci">@ SAMPLE_RESAMPLE_FAST</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00053">siddefs.h:53</a></div></div>
<div class="ttc" id="aclass_filter_html_a4a7204d2d82c410541ce5a0da9c6bd26"><div class="ttname"><a href="class_filter.html#a4a7204d2d82c410541ce5a0da9c6bd26">Filter::writeMODE_VOL</a></div><div class="ttdeci">void writeMODE_VOL(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00241">filter.cpp:241</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a5689410bb7ea5efc10bb7b13c8055f28"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a5689410bb7ea5efc10bb7b13c8055f28">SID::State::hold_zero</a></div><div class="ttdeci">bool hold_zero[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00074">sid.h:74</a></div></div>
<div class="ttc" id="aclass_filter_html_a8e50429a169f4dcf78d0e1d8414c510a"><div class="ttname"><a href="class_filter.html#a8e50429a169f4dcf78d0e1d8414c510a">Filter::clock</a></div><div class="ttdeci">RESID_INLINE void clock(sound_sample voice1, sound_sample voice2, sound_sample voice3, sound_sample ext_in)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8h_source.html#l00215">filter.h:215</a></div></div>
<div class="ttc" id="acubase64__3simple_playback_8m_html_ada3ed9e62ea0d1ae79903083ccfe54c6"><div class="ttname"><a href="cubase64__3simple_playback_8m.html#ada3ed9e62ea0d1ae79903083ccfe54c6">for</a></div><div class="ttdeci">for(i=1:sliceLength) % render the whole slice audio(audioIndex)</div></div>
<div class="ttc" id="aclass_envelope_generator_html_aa44ceb2a85a82d0d56611d29fb85040b"><div class="ttname"><a href="class_envelope_generator.html#aa44ceb2a85a82d0d56611d29fb85040b">EnvelopeGenerator::release</a></div><div class="ttdeci">reg4 release</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00064">envelope.h:64</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a8c1ccef3d45c31f0259717e4a77e4b78"><div class="ttname"><a href="class_s_i_d.html#a8c1ccef3d45c31f0259717e4a77e4b78">SID::write</a></div><div class="ttdeci">void write(reg8 offset, reg8 value)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00185">sid.cpp:185</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html"><div class="ttname"><a href="class_envelope_generator.html">EnvelopeGenerator</a></div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00034">envelope.h:34</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a45867755dacd5d24d6f8c013de0cf138"><div class="ttname"><a href="class_envelope_generator.html#a45867755dacd5d24d6f8c013de0cf138">EnvelopeGenerator::hold_zero</a></div><div class="ttdeci">bool hold_zero</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00059">envelope.h:59</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a5d74787dedbc4e11c1ab15bf487e61f8ad590443978dc58d64aed5001f56efcdf"><div class="ttname"><a href="class_envelope_generator.html#a5d74787dedbc4e11c1ab15bf487e61f8ad590443978dc58d64aed5001f56efcdf">EnvelopeGenerator::RELEASE</a></div><div class="ttdeci">@ RELEASE</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00039">envelope.h:39</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a93c3f10995e9e0be361ece49eaef4c97"><div class="ttname"><a href="class_s_i_d.html#a93c3f10995e9e0be361ece49eaef4c97">SID::fir</a></div><div class="ttdeci">short * fir</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00126">sid.h:126</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a027fd2e502e93b85d74e8bc663d6804b"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a027fd2e502e93b85d74e8bc663d6804b">SID::State::accumulator</a></div><div class="ttdeci">reg24 accumulator[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00066">sid.h:66</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a9521010d32cb75f4a89841ecb232b805"><div class="ttname"><a href="class_envelope_generator.html#a9521010d32cb75f4a89841ecb232b805">EnvelopeGenerator::attack</a></div><div class="ttdeci">reg4 attack</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00061">envelope.h:61</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a91e6b5172145ebb86e17b21e72e2715c"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a91e6b5172145ebb86e17b21e72e2715c">reg8</a></div><div class="ttdeci">unsigned int reg8</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00040">siddefs.h:40</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a29416b845331f5744ad80634bf1f8119"><div class="ttname"><a href="class_s_i_d.html#a29416b845331f5744ad80634bf1f8119">SID::clock_interpolate</a></div><div class="ttdeci">RESID_INLINE int clock_interpolate(cycle_count &amp;delta_t, short *buf, int n, int interleave)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00803">sid.cpp:803</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a979f0b900c6ca42a2b438fdbf84a71a0"><div class="ttname"><a href="class_envelope_generator.html#a979f0b900c6ca42a2b438fdbf84a71a0">EnvelopeGenerator::decay</a></div><div class="ttdeci">reg4 decay</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00062">envelope.h:62</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a1e5a1558db01f79a8874591bad4ea905"><div class="ttname"><a href="class_envelope_generator.html#a1e5a1558db01f79a8874591bad4ea905">EnvelopeGenerator::clock</a></div><div class="ttdeci">RESID_INLINE void clock()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00093">envelope.h:93</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a3e5fbb678ec2a5180c62b6d38b9bddf0a3fe21597c3ecad715c9ec36c5becd8ae"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0a3fe21597c3ecad715c9ec36c5becd8ae">SAMPLE_RESAMPLE_INTERPOLATE</a></div><div class="ttdeci">@ SAMPLE_RESAMPLE_INTERPOLATE</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00053">siddefs.h:53</a></div></div>
<div class="ttc" id="aclass_voice_html_ad20897c5c8bd47f5d4005989bead0e55"><div class="ttname"><a href="class_voice.html#ad20897c5c8bd47f5d4005989bead0e55">Voice::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="voice_8cpp_source.html#l00128">voice.cpp:128</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a2b8b78e19e6472c88dcbc00f77de34b6"><div class="ttname"><a href="class_s_i_d.html#a2b8b78e19e6472c88dcbc00f77de34b6">SID::enable_filter</a></div><div class="ttdeci">void enable_filter(bool enable)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00391">sid.cpp:391</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_ae191d6bfb4766e9d51171b2eedfff683"><div class="ttname"><a href="class_envelope_generator.html#ae191d6bfb4766e9d51171b2eedfff683">EnvelopeGenerator::exponential_counter_period</a></div><div class="ttdeci">reg8 exponential_counter_period</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00057">envelope.h:57</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_af6f0c3073af27fd60cf5645f82cf367d"><div class="ttname"><a href="class_envelope_generator.html#af6f0c3073af27fd60cf5645f82cf367d">EnvelopeGenerator::sustain</a></div><div class="ttdeci">reg4 sustain</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00063">envelope.h:63</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_a0af43b6b6735d78f8e0ad3fecef20a77"><div class="ttname"><a href="class_waveform_generator.html#a0af43b6b6735d78f8e0ad3fecef20a77">WaveformGenerator::writePW_HI</a></div><div class="ttdeci">void writePW_HI(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="wave_8cpp_source.html#l00084">wave.cpp:84</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a908bbf63c6595c87bae81e5c96e7aff8"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a908bbf63c6595c87bae81e5c96e7aff8">SID::State::rate_counter</a></div><div class="ttdeci">reg16 rate_counter[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00068">sid.h:68</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_html_a8caab34c3bd9d2089ebc92c46377a706"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a8caab34c3bd9d2089ebc92c46377a706">FIXP_SHIFT</a></div><div class="ttdeci">#define FIXP_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00037">sid.cpp:37</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a495e3d314f6e174e3a50253009ef4406"><div class="ttname"><a href="class_s_i_d.html#a495e3d314f6e174e3a50253009ef4406">SID::fir_RES</a></div><div class="ttdeci">int fir_RES</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00120">sid.h:120</a></div></div>
<div class="ttc" id="acubase64__5analyze_noise_8m_html_a30d3b8e44898693b3b5b95b32743e82b"><div class="ttname"><a href="cubase64__5analyze_noise_8m.html#a30d3b8e44898693b3b5b95b32743e82b">e</a></div><div class="ttdeci">All above of max level will be max e</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__5analyze_noise_8m_source.html#l00201">cubase64_5analyzeNoise.m:201</a></div></div>
<div class="ttc" id="achipchip_8c_html_af07147e3e498f1cc010dc6472a61f1f6"><div class="ttname"><a href="chipchip_8c.html#af07147e3e498f1cc010dc6472a61f1f6">sample</a></div><div class="ttdeci">unsigned char sample</div><div class="ttdef"><b>Definition:</b> <a href="chipchip_8c_source.html#l00053">chipchip.c:53</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_a65b09609ec0c8e86a8de72f518938dd6"><div class="ttname"><a href="class_waveform_generator.html#a65b09609ec0c8e86a8de72f518938dd6">WaveformGenerator::writeFREQ_HI</a></div><div class="ttdeci">void writeFREQ_HI(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="wave_8cpp_source.html#l00074">wave.cpp:74</a></div></div>
<div class="ttc" id="a64_m_a_p10_8_t_x_t_html_ab2f380f4f9f0408bdfecbf615ad93e68"><div class="ttname"><a href="64_m_a_p10_8_t_x_t.html#ab2f380f4f9f0408bdfecbf615ad93e68">s</a></div><div class="ttdeci">EMPTY ROM containing FF s or AA s</div><div class="ttdef"><b>Definition:</b> <a href="64_m_a_p10_8_t_x_t_source.html#l01389">64MAP10.TXT:1389</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_a30bfff3b299217694b026a259e058b7e"><div class="ttname"><a href="class_waveform_generator.html#a30bfff3b299217694b026a259e058b7e">WaveformGenerator::readOSC</a></div><div class="ttdeci">reg8 readOSC()</div><div class="ttdef"><b>Definition:</b> <a href="wave_8cpp_source.html#l00124">wave.cpp:124</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a6db3df3c11b08ba5f116229e283791e5"><div class="ttname"><a href="class_s_i_d.html#a6db3df3c11b08ba5f116229e283791e5">SID::I0</a></div><div class="ttdeci">static double I0(double x)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00410">sid.cpp:410</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a42db6c4b71f51dd3f006f296ff2b2fd2"><div class="ttname"><a href="class_envelope_generator.html#a42db6c4b71f51dd3f006f296ff2b2fd2">EnvelopeGenerator::readENV</a></div><div class="ttdeci">reg8 readENV()</div><div class="ttdef"><b>Definition:</b> <a href="envelope_8cpp_source.html#l00224">envelope.cpp:224</a></div></div>
<div class="ttc" id="aclass_filter_html_ad20897c5c8bd47f5d4005989bead0e55"><div class="ttname"><a href="class_filter.html#ad20897c5c8bd47f5d4005989bead0e55">Filter::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00193">filter.cpp:193</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_aba9a59fe000e7ef0d9c5efc0eefcf3ae"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#aba9a59fe000e7ef0d9c5efc0eefcf3ae">RESID_INLINE</a></div><div class="ttdeci">#define RESID_INLINE</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00066">siddefs.h:66</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_html_a2f727e2766e29e74e4b7d1b3e397df61"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a2f727e2766e29e74e4b7d1b3e397df61">FIR_N</a></div><div class="ttdeci">#define FIR_N</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00030">sid.cpp:30</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a9ea2b72d996c188dba740847ecbf7349"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a9ea2b72d996c188dba740847ecbf7349">SID::State::sid_register</a></div><div class="ttdeci">char sid_register[0x20]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00061">sid.h:61</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a8b37770414e868331d3cc265d4c08bcd"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a8b37770414e868331d3cc265d4c08bcd">chip_model</a></div><div class="ttdeci">chip_model</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00050">siddefs.h:50</a></div></div>
<div class="ttc" id="aclass_voice_html_a3107c6016125b0e5d69d2f6281931153"><div class="ttname"><a href="class_voice.html#a3107c6016125b0e5d69d2f6281931153">Voice::set_sync_source</a></div><div class="ttdeci">void set_sync_source(Voice *)</div><div class="ttdef"><b>Definition:</b> <a href="voice_8cpp_source.html#l00111">voice.cpp:111</a></div></div>
<div class="ttc" id="aclass_voice_html_aee7ec0e25a37c6a2321b68c631a8b332"><div class="ttname"><a href="class_voice.html#aee7ec0e25a37c6a2321b68c631a8b332">Voice::output</a></div><div class="ttdeci">RESID_INLINE sound_sample output()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2voice_8h_source.html#l00069">voice.h:69</a></div></div>
<div class="ttc" id="aclass_filter_html_a766cc0a81087bd71844f6e38fdc75f83"><div class="ttname"><a href="class_filter.html#a766cc0a81087bd71844f6e38fdc75f83">Filter::hp_bp_lp</a></div><div class="ttdeci">reg8 hp_bp_lp</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8h_source.html#l00171">filter.h:171</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_afeabd12b164c3ed7bb215d3be46bb94b"><div class="ttname"><a href="class_envelope_generator.html#afeabd12b164c3ed7bb215d3be46bb94b">EnvelopeGenerator::writeATTACK_DECAY</a></div><div class="ttdeci">void writeATTACK_DECAY(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="envelope_8cpp_source.html#l00203">envelope.cpp:203</a></div></div>
<div class="ttc" id="aclass_filter_html_a1403960468bd91d6ece759e92d35e904"><div class="ttname"><a href="class_filter.html#a1403960468bd91d6ece759e92d35e904">Filter::filt</a></div><div class="ttdeci">reg8 filt</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8h_source.html#l00165">filter.h:165</a></div></div>
<div class="ttc" id="avector-demo_8c_html_a83a96667fb436e224e8501b7b9bc612c"><div class="ttname"><a href="vector-demo_8c.html#a83a96667fb436e224e8501b7b9bc612c">x</a></div><div class="ttdeci">unsigned char x</div><div class="ttdef"><b>Definition:</b> <a href="vector-demo_8c_source.html#l00005">vector-demo.c:5</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a4768c84e70f55a2e17ad2e5c9613881a"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a4768c84e70f55a2e17ad2e5c9613881a">bits</a></div><div class="ttdeci">bits</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00043">cubase64_1analyzePitch.m:43</a></div></div>
<div class="ttc" id="aclass_voice_html_a7d0cf64e99ba7d320528da9351a7a379"><div class="ttname"><a href="class_voice.html#a7d0cf64e99ba7d320528da9351a7a379">Voice::set_chip_model</a></div><div class="ttdeci">void set_chip_model(chip_model model)</div><div class="ttdef"><b>Definition:</b> <a href="voice_8cpp_source.html#l00034">voice.cpp:34</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_html"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h.html">sid.h</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a7af526a69bf507ba923641fc7a7e3b79"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a7af526a69bf507ba923641fc7a7e3b79">SID::State::exponential_counter</a></div><div class="ttdeci">reg16 exponential_counter[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00070">sid.h:70</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a876b486d3a5241a126bd5751c5f70f79"><div class="ttname"><a href="class_envelope_generator.html#a876b486d3a5241a126bd5751c5f70f79">EnvelopeGenerator::state</a></div><div class="ttdeci">State state</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00068">envelope.h:68</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a3e5fbb678ec2a5180c62b6d38b9bddf0a32b98b4aed7e5b96af005e4b8d001b9b"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0a32b98b4aed7e5b96af005e4b8d001b9b">SAMPLE_FAST</a></div><div class="ttdeci">@ SAMPLE_FAST</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00052">siddefs.h:52</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_ac79f303105acc55d9597a7014d8a26e1"><div class="ttname"><a href="class_s_i_d.html#ac79f303105acc55d9597a7014d8a26e1">SID::read</a></div><div class="ttdeci">reg8 read(reg8 offset)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00165">sid.cpp:165</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html"><div class="ttname"><a href="class_waveform_generator.html">WaveformGenerator</a></div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2wave_8h_source.html#l00033">wave.h:33</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a3e5fbb678ec2a5180c62b6d38b9bddf0ae75f716a35c29a4396346d0475dad30b"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a3e5fbb678ec2a5180c62b6d38b9bddf0ae75f716a35c29a4396346d0475dad30b">SAMPLE_INTERPOLATE</a></div><div class="ttdeci">@ SAMPLE_INTERPOLATE</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00052">siddefs.h:52</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_afbba612df1bf7802e9f561d14c05b653"><div class="ttname"><a href="class_s_i_d.html#afbba612df1bf7802e9f561d14c05b653">SID::bus_value</a></div><div class="ttdeci">reg8 bus_value</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00105">sid.h:105</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_html_a5ac3cfb508eaa9955d3983d7c05e43aa"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#a5ac3cfb508eaa9955d3983d7c05e43aa">FIR_RES_INTERPOLATE</a></div><div class="ttdeci">#define FIR_RES_INTERPOLATE</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00031">sid.cpp:31</a></div></div>
<div class="ttc" id="a_p_s_i_d_8doc_html_a930f861689f227013a59e377911121a4"><div class="ttname"><a href="_p_s_i_d_8doc.html#a930f861689f227013a59e377911121a4">A</a></div><div class="ttdeci">Read Y in A</div><div class="ttdef"><b>Definition:</b> <a href="_p_s_i_d_8doc_source.html#l00185">PSID.doc:185</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_acf53270393a1e0aaeb5ab924dbb12d79"><div class="ttname"><a href="class_s_i_d.html#acf53270393a1e0aaeb5ab924dbb12d79">SID::set_sampling_parameters</a></div><div class="ttdeci">bool set_sampling_parameters(double clock_freq, sampling_method method, double sample_freq, double pass_freq=-1, double filter_scale=0.97)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00453">sid.cpp:453</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a7fb58163fedb28d871058fcd1bcc9c8e"><div class="ttname"><a href="class_s_i_d.html#a7fb58163fedb28d871058fcd1bcc9c8e">SID::poty</a></div><div class="ttdeci">Potentiometer poty</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00103">sid.h:103</a></div></div>
<div class="ttc" id="acubase64__4encode_waveforms_8m_html_a9fef684aaa870adc27303f21f263d344"><div class="ttname"><a href="cubase64__4encode_waveforms_8m.html#a9fef684aaa870adc27303f21f263d344">wave</a></div><div class="ttdeci">Now smooth the Sustain Level so that it _never_ raises the volume unless we re playing a silent wave</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__4encode_waveforms_8m_source.html#l00333">cubase64_4encodeWaveforms.m:333</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a92be1335633e8c73863f6f4ab5f374b9"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a92be1335633e8c73863f6f4ab5f374b9">SID::State::envelope_counter</a></div><div class="ttdeci">reg8 envelope_counter[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00072">sid.h:72</a></div></div>
<div class="ttc" id="abass__addon_8h_html_a1035fa6ce6de576a06377fdd08bfe16e"><div class="ttname"><a href="bass__addon_8h.html#a1035fa6ce6de576a06377fdd08bfe16e">value</a></div><div class="ttdeci">DWORD void * value</div><div class="ttdef"><b>Definition:</b> <a href="bass__addon_8h_source.html#l00046">bass_addon.h:46</a></div></div>
<div class="ttc" id="astructres_html"><div class="ttname"><a href="structres.html">res</a></div><div class="ttdef"><b>Definition:</b> <a href="parse_8h_source.html#l00053">parse.h:53</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a79924c9ace7e8ae97ed59697d5dc9e02"><div class="ttname"><a href="class_s_i_d.html#a79924c9ace7e8ae97ed59697d5dc9e02">SID::output</a></div><div class="ttdeci">int output()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00119">sid.cpp:119</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_ac9f02802ae0c3013b4b39d85436641d4"><div class="ttname"><a href="class_waveform_generator.html#ac9f02802ae0c3013b4b39d85436641d4">WaveformGenerator::writePW_LO</a></div><div class="ttdeci">void writePW_LO(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="wave_8cpp_source.html#l00079">wave.cpp:79</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a1c37cf144c297249161f5ad091707acb"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a1c37cf144c297249161f5ad091707acb">SID::State::exponential_counter_period</a></div><div class="ttdeci">reg16 exponential_counter_period[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00071">sid.h:71</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a0910932fa0f3640b8008f47a91262e9a"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a0910932fa0f3640b8008f47a91262e9a">reg16</a></div><div class="ttdeci">unsigned int reg16</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00042">siddefs.h:42</a></div></div>
<div class="ttc" id="aclass_filter_html_a0984f19c378829eb6e8a75bfb10e27df"><div class="ttname"><a href="class_filter.html#a0984f19c378829eb6e8a75bfb10e27df">Filter::vol</a></div><div class="ttdeci">reg4 vol</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8h_source.html#l00174">filter.h:174</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a027bb66729611ac59f3d5f81d9751ea0"><div class="ttname"><a href="class_s_i_d.html#a027bb66729611ac59f3d5f81d9751ea0">SID::extfilt</a></div><div class="ttdeci">ExternalFilter extfilt</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00101">sid.h:101</a></div></div>
<div class="ttc" id="aclass_filter_html_a3cd4b0322d027edc7817f4148a63afd0"><div class="ttname"><a href="class_filter.html#a3cd4b0322d027edc7817f4148a63afd0">Filter::writeFC_LO</a></div><div class="ttdeci">void writeFC_LO(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00221">filter.cpp:221</a></div></div>
<div class="ttc" id="aclass_external_filter_html_a2b8b78e19e6472c88dcbc00f77de34b6"><div class="ttname"><a href="class_external_filter.html#a2b8b78e19e6472c88dcbc00f77de34b6">ExternalFilter::enable_filter</a></div><div class="ttdeci">void enable_filter(bool enable)</div><div class="ttdef"><b>Definition:</b> <a href="extfilt_8cpp_source.html#l00046">extfilt.cpp:46</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a0c9b44541a8bef8765e777312dcf3e86"><div class="ttname"><a href="class_envelope_generator.html#a0c9b44541a8bef8765e777312dcf3e86">EnvelopeGenerator::exponential_counter</a></div><div class="ttdeci">reg8 exponential_counter</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00056">envelope.h:56</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a7a1c117819d2bb640564731c5ae6f660"><div class="ttname"><a href="class_s_i_d.html#a7a1c117819d2bb640564731c5ae6f660">SID::sample_index</a></div><div class="ttdeci">int sample_index</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00117">sid.h:117</a></div></div>
<div class="ttc" id="areadme__resid_8txt_html_a1cbedcc33990b77eae61c0e6ee8eaa7d"><div class="ttname"><a href="readme__resid_8txt.html#a1cbedcc33990b77eae61c0e6ee8eaa7d">short</a></div><div class="ttdeci">This is a reverse engineered software emulation of the MOS6581 a full fledged Commodore and a popular SID tune player The VICE home page however reSID should still be of great interest to Commodore nostalgics The emulator engine is cycle emulating the internal operations of the SID chip SID s audio filter is modeled as an actual two integrator loop biquadratic filter circuit The engine has been developed based on available information on sampling of the OSC3 and ENV3 filter and meticulous testing In short</div><div class="ttdef"><b>Definition:</b> <a href="readme__resid_8txt_source.html#l00021">readme_resid.txt:21</a></div></div>
<div class="ttc" id="abass__addon_8h_html_ac74d04db1b94e91597c8147a2f90e9af"><div class="ttname"><a href="bass__addon_8h.html#ac74d04db1b94e91597c8147a2f90e9af">offset</a></div><div class="ttdeci">DWORD offset</div><div class="ttdef"><b>Definition:</b> <a href="bass__addon_8h_source.html#l00045">bass_addon.h:45</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_ab0581f55aa80be209c0d39c879c7cb8b"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#ab0581f55aa80be209c0d39c879c7cb8b">reg24</a></div><div class="ttdeci">unsigned int reg24</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00043">siddefs.h:43</a></div></div>
<div class="ttc" id="aclass_external_filter_html_a7d0cf64e99ba7d320528da9351a7a379"><div class="ttname"><a href="class_external_filter.html#a7d0cf64e99ba7d320528da9351a7a379">ExternalFilter::set_chip_model</a></div><div class="ttdeci">void set_chip_model(chip_model model)</div><div class="ttdef"><b>Definition:</b> <a href="extfilt_8cpp_source.html#l00055">extfilt.cpp:55</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_a1e5a1558db01f79a8874591bad4ea905"><div class="ttname"><a href="class_waveform_generator.html#a1e5a1558db01f79a8874591bad4ea905">WaveformGenerator::clock</a></div><div class="ttdeci">RESID_INLINE void clock()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2wave_8h_source.html#l00132">wave.h:132</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_ace96c75c32484e3e991d1c941ec8dccb"><div class="ttname"><a href="class_s_i_d.html#ace96c75c32484e3e991d1c941ec8dccb">SID::voice</a></div><div class="ttdeci">Voice voice[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00099">sid.h:99</a></div></div>
<div class="ttc" id="aclass_external_filter_html_aee7ec0e25a37c6a2321b68c631a8b332"><div class="ttname"><a href="class_external_filter.html#aee7ec0e25a37c6a2321b68c631a8b332">ExternalFilter::output</a></div><div class="ttdeci">RESID_INLINE sound_sample output()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2extfilt_8h_source.html#l00157">extfilt.h:157</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a5d176368c31e8c1507c63593ba63af7a"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a5d176368c31e8c1507c63593ba63af7a">fc_point</a></div><div class="ttdeci">sound_sample fc_point[2]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00048">siddefs.h:48</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a09b7847b95ded3e71742cf2f1962ec93"><div class="ttname"><a href="class_s_i_d.html#a09b7847b95ded3e71742cf2f1962ec93">SID::fc_plotter</a></div><div class="ttdeci">PointPlotter&lt; sound_sample &gt; fc_plotter()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00611">sid.cpp:611</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a4e33219250ef7622b467dd9ed9f71f41"><div class="ttname"><a href="class_s_i_d.html#a4e33219250ef7622b467dd9ed9f71f41">SID::sample_prev</a></div><div class="ttdeci">short sample_prev</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00118">sid.h:118</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_ada51c77311410abd073c2756b9836e83"><div class="ttname"><a href="class_envelope_generator.html#ada51c77311410abd073c2756b9836e83">EnvelopeGenerator::gate</a></div><div class="ttdeci">reg8 gate</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00066">envelope.h:66</a></div></div>
<div class="ttc" id="aclass_filter_html_aee7ec0e25a37c6a2321b68c631a8b332"><div class="ttname"><a href="class_filter.html#aee7ec0e25a37c6a2321b68c631a8b332">Filter::output</a></div><div class="ttdeci">sound_sample output()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8h_source.html#l00478">filter.h:478</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_ab29fa52815936b0b603bae7cf25eaf74"><div class="ttname"><a href="class_s_i_d.html#ab29fa52815936b0b603bae7cf25eaf74">SID::bus_value_ttl</a></div><div class="ttdeci">cycle_count bus_value_ttl</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00106">sid.h:106</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_afbba612df1bf7802e9f561d14c05b653"><div class="ttname"><a href="class_s_i_d_1_1_state.html#afbba612df1bf7802e9f561d14c05b653">SID::State::bus_value</a></div><div class="ttdeci">reg8 bus_value</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00063">sid.h:63</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_a92d711c22040a38dd032a4dd233b8eff"><div class="ttname"><a href="class_waveform_generator.html#a92d711c22040a38dd032a4dd233b8eff">WaveformGenerator::shift_register</a></div><div class="ttdeci">reg24 shift_register</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2wave_8h_source.html#l00064">wave.h:64</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_acd6d2f4cb8be9e37f096923c44f33637"><div class="ttname"><a href="class_waveform_generator.html#acd6d2f4cb8be9e37f096923c44f33637">WaveformGenerator::writeFREQ_LO</a></div><div class="ttdeci">void writeFREQ_LO(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="wave_8cpp_source.html#l00069">wave.cpp:69</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a7da8512bd12875eda315597f6ba56852"><div class="ttname"><a href="class_s_i_d.html#a7da8512bd12875eda315597f6ba56852">SID::sample</a></div><div class="ttdeci">short * sample</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00123">sid.h:123</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a353fabb6c435e97002c1e8936ef67c6c"><div class="ttname"><a href="class_envelope_generator.html#a353fabb6c435e97002c1e8936ef67c6c">EnvelopeGenerator::rate_counter</a></div><div class="ttdeci">reg16 rate_counter</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00054">envelope.h:54</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_aacedf3c3033314167fc04764cdea18c6"><div class="ttname"><a href="class_s_i_d.html#aacedf3c3033314167fc04764cdea18c6">SID::fc_default</a></div><div class="ttdeci">void fc_default(const fc_point *&amp;points, int &amp;count)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00602">sid.cpp:602</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a15fe397b04a015239924785f5d0c907a"><div class="ttname"><a href="class_s_i_d.html#a15fe397b04a015239924785f5d0c907a">SID::ext_in</a></div><div class="ttdeci">int ext_in</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00111">sid.h:111</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_ab8e4ab7af63c7f294d8e71bf5153bf2e"><div class="ttname"><a href="class_s_i_d.html#ab8e4ab7af63c7f294d8e71bf5153bf2e">SID::enable_external_filter</a></div><div class="ttdeci">void enable_external_filter(bool enable)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00400">sid.cpp:400</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_a889db961d737bd98db726c6fd3a00dd2"><div class="ttname"><a href="class_waveform_generator.html#a889db961d737bd98db726c6fd3a00dd2">WaveformGenerator::accumulator</a></div><div class="ttdeci">reg24 accumulator</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2wave_8h_source.html#l00063">wave.h:63</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_html_ab94ff938b9ed512025134e35d194d011"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#ab94ff938b9ed512025134e35d194d011">FIXP_MASK</a></div><div class="ttdeci">#define FIXP_MASK</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00038">sid.cpp:38</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_html_aa632c5e2160874b997395ca3b0186cf0"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#aa632c5e2160874b997395ca3b0186cf0">FIR_RES_FAST</a></div><div class="ttdeci">#define FIR_RES_FAST</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00032">sid.cpp:32</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html"><div class="ttname"><a href="class_s_i_d_1_1_state.html">SID::State</a></div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00056">sid.h:56</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_adc4b822fb503209d0f5d113331cd9821"><div class="ttname"><a href="class_envelope_generator.html#adc4b822fb503209d0f5d113331cd9821">EnvelopeGenerator::writeSUSTAIN_RELEASE</a></div><div class="ttdeci">void writeSUSTAIN_RELEASE(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="envelope_8cpp_source.html#l00215">envelope.cpp:215</a></div></div>
<div class="ttc" id="aclass_envelope_generator_html_a40e1ca5bc3f12ffc2d05b011c6ce8139"><div class="ttname"><a href="class_envelope_generator.html#a40e1ca5bc3f12ffc2d05b011c6ce8139">EnvelopeGenerator::envelope_counter</a></div><div class="ttdeci">reg8 envelope_counter</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2envelope_8h_source.html#l00058">envelope.h:58</a></div></div>
<div class="ttc" id="amidi__mapper_8h_html_a76f11d9a0a47b94f72c2d0e77fb32240"><div class="ttname"><a href="midi__mapper_8h.html#a76f11d9a0a47b94f72c2d0e77fb32240">n</a></div><div class="ttdeci">int n</div><div class="ttdef"><b>Definition:</b> <a href="midi__mapper_8h_source.html#l00059">midi_mapper.h:59</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a71587bb543f4eb3a9659da2bad8e2bfb"><div class="ttname"><a href="class_s_i_d.html#a71587bb543f4eb3a9659da2bad8e2bfb">SID::clock_frequency</a></div><div class="ttdeci">double clock_frequency</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00108">sid.h:108</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a78192cbf9f830adb2eab6e5a08724e6e"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a78192cbf9f830adb2eab6e5a08724e6e">SID::State::rate_counter_period</a></div><div class="ttdeci">reg16 rate_counter_period[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00069">sid.h:69</a></div></div>
<div class="ttc" id="aclass_filter_html_a936b207fda074a84f9b990e0e0ddaccd"><div class="ttname"><a href="class_filter.html#a936b207fda074a84f9b990e0e0ddaccd">Filter::writeRES_FILT</a></div><div class="ttdeci">void writeRES_FILT(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8cpp_source.html#l00233">filter.cpp:233</a></div></div>
<div class="ttc" id="aclass_waveform_generator_html_a372886f4e3db5f5a0fcdeeb18ebbfa41"><div class="ttname"><a href="class_waveform_generator.html#a372886f4e3db5f5a0fcdeeb18ebbfa41">WaveformGenerator::synchronize</a></div><div class="ttdeci">RESID_INLINE void synchronize()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2wave_8h_source.html#l00223">wave.h:223</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a7d0cf64e99ba7d320528da9351a7a379"><div class="ttname"><a href="class_s_i_d.html#a7d0cf64e99ba7d320528da9351a7a379">SID::set_chip_model</a></div><div class="ttdeci">void set_chip_model(chip_model model)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00075">sid.cpp:75</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a8e32fb2594f9bbb5fdf0c2a81ea1fa51"><div class="ttname"><a href="class_s_i_d.html#a8e32fb2594f9bbb5fdf0c2a81ea1fa51">SID::clock_resample_fast</a></div><div class="ttdeci">RESID_INLINE int clock_resample_fast(cycle_count &amp;delta_t, short *buf, int n, int interleave)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00968">sid.cpp:968</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a603396a2059eaffb93f4395b704248a5"><div class="ttname"><a href="class_s_i_d.html#a603396a2059eaffb93f4395b704248a5">SID::clock_fast</a></div><div class="ttdeci">RESID_INLINE int clock_fast(cycle_count &amp;delta_t, short *buf, int n, int interleave)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00766">sid.cpp:766</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a185b809d013177456ca59a424de13c28"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a185b809d013177456ca59a424de13c28">range</a></div><div class="ttdeci">Copy the normalized in the range[-1.0 .. 1.0]</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00900">cubase64_1analyzePitch.m:900</a></div></div>
<div class="ttc" id="amultidemo_8c_html_a45c862cc0ba3a2a26c325256e953d227"><div class="ttname"><a href="multidemo_8c.html#a45c862cc0ba3a2a26c325256e953d227">log</a></div><div class="ttdeci">void log(char *msg)</div><div class="ttdef"><b>Definition:</b> <a href="multidemo_8c_source.html#l00052">multidemo.c:52</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a6ca0b7cab1017cd3a0943384ccca5172"><div class="ttname"><a href="class_s_i_d.html#a6ca0b7cab1017cd3a0943384ccca5172">SID::sampling</a></div><div class="ttdeci">sampling_method sampling</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00114">sid.h:114</a></div></div>
<div class="ttc" id="aclass_external_filter_html_a829bb5f1c730a69633278e519f7f56fd"><div class="ttname"><a href="class_external_filter.html#a829bb5f1c730a69633278e519f7f56fd">ExternalFilter::clock</a></div><div class="ttdeci">RESID_INLINE void clock(sound_sample Vi)</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2extfilt_8h_source.html#l00085">extfilt.h:85</a></div></div>
<div class="ttc" id="aclass_point_plotter_html"><div class="ttname"><a href="class_point_plotter.html">PointPlotter</a></div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2spline_8h_source.html#l00250">spline.h:250</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a166537d20e9a0e2fc7f912bdcfe5b6d6"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a166537d20e9a0e2fc7f912bdcfe5b6d6">SID::State::shift_register</a></div><div class="ttdeci">reg24 shift_register[3]</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00067">sid.h:67</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_html_afffa15931cbca99378d2e4673add646d"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html#afffa15931cbca99378d2e4673add646d">FIR_SHIFT</a></div><div class="ttdeci">#define FIR_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00033">sid.cpp:33</a></div></div>
<div class="ttc" id="aclass_voice_html_a4ffdee30d142e2595e040deaa2ff3a5a"><div class="ttname"><a href="class_voice.html#a4ffdee30d142e2595e040deaa2ff3a5a">Voice::writeCONTROL_REG</a></div><div class="ttdeci">void writeCONTROL_REG(reg8)</div><div class="ttdef"><b>Definition:</b> <a href="voice_8cpp_source.html#l00119">voice.cpp:119</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_ab4527333736df080d056ce72f492de9c"><div class="ttname"><a href="class_s_i_d.html#ab4527333736df080d056ce72f492de9c">SID::cycles_per_sample</a></div><div class="ttdeci">cycle_count cycles_per_sample</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00115">sid.h:115</a></div></div>
<div class="ttc" id="acubase64__1analyze_pitch_8m_html_a6f6ccfcf58b31cb6412107d9d5281426"><div class="ttname"><a href="cubase64__1analyze_pitch_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a></div><div class="ttdeci">for i</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__1analyze_pitch_8m_source.html#l00246">cubase64_1analyzePitch.m:246</a></div></div>
<div class="ttc" id="acubase64__2correlate_waveforms_8m_html_ae47e734ba8f84b7dceb313053f097ee5"><div class="ttname"><a href="cubase64__2correlate_waveforms_8m.html#ae47e734ba8f84b7dceb313053f097ee5">sum</a></div><div class="ttdeci">worst case sum</div><div class="ttdef"><b>Definition:</b> <a href="cubase64__2correlate_waveforms_8m_source.html#l00392">cubase64_2correlateWaveforms.m:392</a></div></div>
<div class="ttc" id="a_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt_html_a59a31db1436d75d219a8e2d9b645b3e0"><div class="ttname"><a href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt.html#a59a31db1436d75d219a8e2d9b645b3e0">method</a></div><div class="ttdeci">and that you are informed that you can do these things To protect your we need to make restrictions that forbid distributors to deny you these rights or to ask you to surrender these rights These restrictions translate to certain responsibilities for you if you distribute copies of the library or if you modify it For if you distribute copies of the whether gratis or for a you must give the recipients all the rights that we gave you You must make sure that receive or can get the source code If you link other code with the you must provide complete object files to the so that they can relink them with the library after making changes to the library and recompiling it And you must show them these terms so they know their rights We protect your rights with a two step method</div><div class="ttdef"><b>Definition:</b> <a href="_munt_vsti_2_c_o_p_y_i_n_g_8_l_e_s_s_e_r_8txt_source.html#l00049">COPYING.LESSER.txt:49</a></div></div>
<div class="ttc" id="aclass_filter_html_a8a4a24fe2316961996ebd0d5d6fe7590"><div class="ttname"><a href="class_filter.html#a8a4a24fe2316961996ebd0d5d6fe7590">Filter::res</a></div><div class="ttdeci">reg8 res</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2filter_8h_source.html#l00162">filter.h:162</a></div></div>
<div class="ttc" id="aclass_s_i_d_1_1_state_html_a790355057d12e9c1ce7643551c16fecd"><div class="ttname"><a href="class_s_i_d_1_1_state.html#a790355057d12e9c1ce7643551c16fecd">SID::State::State</a></div><div class="ttdeci">State()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00275">sid.cpp:275</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a91c4a467078baf29eb254476f50fa310"><div class="ttname"><a href="class_s_i_d.html#a91c4a467078baf29eb254476f50fa310">SID::clock</a></div><div class="ttdeci">void clock()</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp_source.html#l00620">sid.cpp:620</a></div></div>
<div class="ttc" id="aclass_s_i_d_html_a5d4b20130380f7d128e898b7f7c511a6"><div class="ttname"><a href="class_s_i_d.html#a5d4b20130380f7d128e898b7f7c511a6">SID::fir_N</a></div><div class="ttdeci">int fir_N</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8h_source.html#l00119">sid.h:119</a></div></div>
<div class="ttc" id="a_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_html_a64f100d1bad4fc726f157ddbc3b2be6e"><div class="ttname"><a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h.html#a64f100d1bad4fc726f157ddbc3b2be6e">cycle_count</a></div><div class="ttdeci">int cycle_count</div><div class="ttdef"><b>Definition:</b> <a href="_goat_tracker__2_875_2goattrk2_2src_2resid_2siddefs_8h_source.html#l00046">siddefs.h:46</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1438cc8c1a18e5b5e27392fc9c1a8795.html">musictools</a></li><li class="navelem"><a class="el" href="dir_17e68d802e3e325e8707ae00f20adaca.html">GoatTracker_2.75</a></li><li class="navelem"><a class="el" href="dir_20f75f6c12e12f9fba9c33b39b534248.html">goattrk2</a></li><li class="navelem"><a class="el" href="dir_84b122b346a7317a1a20c0062e2c14ca.html">src</a></li><li class="navelem"><a class="el" href="dir_cad14d4ebdfc5ea368837d1864779fbc.html">resid</a></li><li class="navelem"><a class="el" href="_goat_tracker__2_875_2goattrk2_2src_2resid_2sid_8cpp.html">sid.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
