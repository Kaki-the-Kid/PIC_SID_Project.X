<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIC SID Project: Dac Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIC SID Project
   &#160;<span id="projectnumber">prototype</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classre_s_i_dfp_1_1_dac.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Dac Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="residfp-builder_2residfp_2dac_8h_source.html">Dac.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a45cc5d5c0668980445fc66878db4ea19"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classre_s_i_dfp_1_1_dac.html#a45cc5d5c0668980445fc66878db4ea19">Dac</a> (unsigned int <a class="el" href="_p_s_i_d_8doc.html#adca6a14c25c01025c8f808944943ac8e">bits</a>)</td></tr>
<tr class="separator:a45cc5d5c0668980445fc66878db4ea19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96bcb610dc5a5745135b9bfb899632b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classre_s_i_dfp_1_1_dac.html#a96bcb610dc5a5745135b9bfb899632b0">~Dac</a> ()</td></tr>
<tr class="separator:a96bcb610dc5a5745135b9bfb899632b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea331ef9eaeb0b9fa56fdfd846585efb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="bassmidi_8h.html#a1775701abced24e4580d5d7a69fca07a">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classre_s_i_dfp_1_1_dac.html#aea331ef9eaeb0b9fa56fdfd846585efb">kinkedDac</a> (ChipModel chipModel)</td></tr>
<tr class="separator:aea331ef9eaeb0b9fa56fdfd846585efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8764a91cc6a8969019d4ca3d43ec260"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classre_s_i_dfp_1_1_dac.html#ab8764a91cc6a8969019d4ca3d43ec260">getOutput</a> (unsigned int <a class="el" href="cubase64__2correlate_waveforms_8m.html#a16cb36ce647295784959c98179ff6db9">input</a>) const</td></tr>
<tr class="separator:ab8764a91cc6a8969019d4ca3d43ec260"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Estimate DAC nonlinearity. The <a class="el" href="classre_s_i_dfp_1_1_s_i_d.html">SID</a> DACs are built up as R-2R ladder as follows: </p><pre class="fragment">    n  n-1      2   1   0    VGND
    |   |       |   |   |      |   Termination
   2R  2R      2R  2R  2R     2R   only for
    |   |       |   |   |      |   MOS 8580
Vo  --R---R--...--R---R--    ---
</pre><p>All MOS 6581 DACs are missing a termination resistor at bit 0. This causes pronounced errors for the lower 4 - 5 bits (e.g. the output for bit 0 is actually equal to the output for bit 1), resulting in DAC discontinuities for the lower bits. In addition to this, the 6581 DACs exhibit further severe discontinuities for higher bits, which may be explained by a less than perfect match between the R and 2R resistors, or by output impedance in the NMOS transistors providing the bit voltages. A good approximation of the actual DAC output is achieved for 2R/R ~ 2.20.</p>
<p>The MOS 8580 DACs, on the other hand, do not exhibit any discontinuities. These DACs include the correct termination resistor, and also seem to have very accurately matched R and 2R resistors (2R/R = 2.00).</p>
<p>On the 6581 the output of the waveform and envelope DACs go through a voltage follower built with two NMOS: </p><pre class="fragment">        Vdd

         |
       |-+
</pre><p> Vin ----&mdash;| T1 (enhancement-mode) |-+ | o-----&mdash; Vout | |-+ +&mdash;| T2 (depletion-mode) | |-+ | |</p>
<p>GND GND </p>

<p class="definition">Definition at line <a class="el" href="residfp-builder_2residfp_2dac_8h_source.html#l00075">75</a> of file <a class="el" href="residfp-builder_2residfp_2dac_8h_source.html">Dac.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a45cc5d5c0668980445fc66878db4ea19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45cc5d5c0668980445fc66878db4ea19">&#9670;&nbsp;</a></span>Dac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classre_s_i_dfp_1_1_dac.html">Dac</a> </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize DAC model.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bits</td><td>the number of input bits </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_dac_8cpp_source.html#l00028">28</a> of file <a class="el" href="_dac_8cpp_source.html">Dac.cpp</a>.</p>

</div>
</div>
<a id="a96bcb610dc5a5745135b9bfb899632b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96bcb610dc5a5745135b9bfb899632b0">&#9670;&nbsp;</a></span>~Dac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="classre_s_i_dfp_1_1_dac.html">Dac</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_dac_8cpp_source.html#l00033">33</a> of file <a class="el" href="_dac_8cpp_source.html">Dac.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab8764a91cc6a8969019d4ca3d43ec260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8764a91cc6a8969019d4ca3d43ec260">&#9670;&nbsp;</a></span>getOutput()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double getOutput </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the Vo output for a given combination of input bits.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>the digital input </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the analog output value </dd></dl>

<p class="definition">Definition at line <a class="el" href="_dac_8cpp_source.html#l00038">38</a> of file <a class="el" href="_dac_8cpp_source.html">Dac.cpp</a>.</p>

</div>
</div>
<a id="aea331ef9eaeb0b9fa56fdfd846585efb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea331ef9eaeb0b9fa56fdfd846585efb">&#9670;&nbsp;</a></span>kinkedDac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bassmidi_8h.html#a1775701abced24e4580d5d7a69fca07a">void</a> kinkedDac </td>
          <td>(</td>
          <td class="paramtype">ChipModel&#160;</td>
          <td class="paramname"><em>chipModel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Build DAC model for specific chip.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chipModel</td><td>6581 or 8580 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_dac_8cpp_source.html#l00053">53</a> of file <a class="el" href="_dac_8cpp_source.html">Dac.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>musictools/libsidplayfp-2.0.1/src/builders/residfp-builder/residfp/<a class="el" href="residfp-builder_2residfp_2dac_8h_source.html">Dac.h</a></li>
<li>musictools/libsidplayfp-2.0.1/src/builders/residfp-builder/residfp/<a class="el" href="_dac_8cpp_source.html">Dac.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacere_s_i_dfp.html">reSIDfp</a></li><li class="navelem"><a class="el" href="classre_s_i_dfp_1_1_dac.html">Dac</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
